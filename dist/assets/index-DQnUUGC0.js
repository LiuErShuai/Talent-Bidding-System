import{_ as $,r as v,m as q,x as P,a as f,b as s,t as V,h as l,j as a,k as r,u as D,o as m,f as O,q as u,F as x,d as z,i as B,W as c}from"./index-JBLc9mc5.js";const S={class:"apply-page"},W={class:"apply-modal"},G={class:"apply-header"},H={class:"title-group"},J={class:"title"},K={class:"apply-body"},Q={class:"team-select-block"},X={class:"team-radio-list"},Y={class:"form-actions"},Z={__name:"index",setup(ee){const T=P(),I=D(),k=v("项目名称"),_=v(!1),g=v(),C=v([{id:"team-dev",name:"智能开发小组",memberCount:4},{id:"team-ai",name:"AI创新团队",memberCount:3}]),n=v({mode:"team",teamId:"",plan:"",advantages:"",division:"",attachments:[],agree:!1}),j={mode:[{required:!0,message:"请选择揭榜方式",trigger:"change"}],teamId:[{validator:(d,e,o)=>{n.value.mode==="team"&&!e?o(new Error("团队揭榜时，请选择一个团队或创建新团队")):o()},trigger:"change"}],plan:[{validator:(d,e,o)=>{const i=(e||"").trim().length;i?i<500?o(new Error("项目实施方案至少 500 字")):o():o(new Error("请填写项目实施方案"))},trigger:"blur"}],advantages:[{validator:(d,e,o)=>{const i=(e||"").trim().length;i?i<200?o(new Error("团队优势说明至少 200 字")):o():o(new Error("请填写团队优势说明"))},trigger:"blur"}],agree:[{validator:(d,e,o)=>{e?o():o(new Error("请先阅读并同意相关协议"))},trigger:"change"}]},A=()=>{c.warning("最多只能上传 5 个附件")},h=d=>{const o=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/zip","application/x-zip-compressed"].includes(d.type),i=d.size/1024/1024<20;return o?i?!0:(c.error("单个文件大小不能超过 20MB"),!1):(c.error("仅支持 pdf / doc / ppt / zip 类型的文件"),!1)},F=async()=>{if(g.value)try{await g.value.validate(),_.value=!0,setTimeout(()=>{c.success("揭榜申请提交成功！"),I.push("/projects")},1e3)}catch{}finally{_.value=!1}},E=()=>{I.back()};return q(()=>{const d=T.params.projectId;d&&(k.value=`项目 ${d}`)}),(d,e)=>{const o=r("el-radio"),i=r("el-radio-group"),p=r("el-form-item"),b=r("el-divider"),U=r("el-option"),M=r("el-select"),y=r("el-input"),w=r("el-button"),N=r("el-upload"),R=r("el-checkbox"),L=r("el-form");return m(),f("div",S,[s("div",W,[s("header",G,[s("div",H,[s("h1",J,"提交揭榜申请 - "+V(k.value),1),e[8]||(e[8]=s("p",{class:"subtitle"},"请完整填写以下信息，以便企业和平台评估你的团队",-1))]),s("button",{class:"close-btn",onClick:E},"返回")]),s("section",K,[l(L,{ref_key:"applyFormRef",ref:g,model:n.value,rules:j,"label-width":"120px",class:"apply-form"},{default:a(()=>[l(p,{label:"揭榜方式",prop:"mode"},{default:a(()=>[l(i,{modelValue:n.value.mode,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.mode=t)},{default:a(()=>[l(o,{label:"personal"},{default:a(()=>[...e[9]||(e[9]=[u("个人揭榜",-1)])]),_:1}),l(o,{label:"team"},{default:a(()=>[...e[10]||(e[10]=[u("团队揭榜",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),n.value.mode==="team"?(m(),f(x,{key:0},[l(b),l(p,{label:"团队选择",prop:"teamId"},{default:a(()=>[s("div",Q,[l(M,{modelValue:n.value.teamId,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.teamId=t),placeholder:"选择已有团队",class:"team-select"},{default:a(()=>[(m(!0),f(x,null,z(C.value,t=>(m(),B(U,{key:t.id,label:`${t.name}（${t.memberCount}人）`,value:t.id},null,8,["label","value"]))),128)),l(U,{label:"+ 创建新团队",value:"new"})]),_:1},8,["modelValue"]),s("div",X,[l(i,{modelValue:n.value.teamId,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value.teamId=t)},{default:a(()=>[(m(!0),f(x,null,z(C.value,t=>(m(),B(o,{key:t.id,label:t.id},{default:a(()=>[u(V(t.name)+"（"+V(t.memberCount)+"人） ",1)]),_:2},1032,["label"]))),128)),l(o,{label:"new"},{default:a(()=>[...e[11]||(e[11]=[u("+ 创建新团队",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})],64)):O("",!0),l(b),l(p,{label:"项目实施方案",prop:"plan"},{default:a(()=>[l(y,{modelValue:n.value.plan,"onUpdate:modelValue":e[3]||(e[3]=t=>n.value.plan=t),type:"textarea",autosize:"","show-word-limit":"",placeholder:`请详细描述你/你的团队的实施方案，包括：
1. 技术选型
2. 实施步骤
3. 时间安排
4. 预期成果
（至少500字）`},null,8,["modelValue"])]),_:1}),l(p,{label:"团队优势说明",prop:"advantages"},{default:a(()=>[l(y,{modelValue:n.value.advantages,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.advantages=t),type:"textarea",autosize:"","show-word-limit":"",placeholder:`请说明你的团队的优势，包括：
- 成员技能
- 往期项目经验
- 分工计划
（至少200字）`},null,8,["modelValue"])]),_:1}),l(p,{label:"成员分工计划"},{default:a(()=>[l(y,{modelValue:n.value.division,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value.division=t),type:"textarea",autosize:"","show-word-limit":"",placeholder:"请描述每位成员的具体分工（如负责模块、任务等）"},null,8,["modelValue"])]),_:1}),l(p,{label:"附件上传"},{default:a(()=>[l(N,{"file-list":n.value.attachments,"onUpdate:fileList":e[6]||(e[6]=t=>n.value.attachments=t),action:"#",multiple:"",limit:5,"auto-upload":!1,"on-exceed":A,"before-upload":h},{tip:a(()=>[...e[13]||(e[13]=[s("div",{class:"el-upload__tip"}," 支持 pdf / doc / ppt / zip，单个文件不超过 20MB，最多 5 个。 ",-1)])]),default:a(()=>[l(w,{type:"primary"},{default:a(()=>[...e[12]||(e[12]=[u("选择文件",-1)])]),_:1})]),_:1},8,["file-list"])]),_:1}),l(b),l(p,{prop:"agree","label-width":"0"},{default:a(()=>[l(R,{modelValue:n.value.agree,"onUpdate:modelValue":e[7]||(e[7]=t=>n.value.agree=t)},{default:a(()=>[...e[14]||(e[14]=[u(" 我已阅读并同意 ",-1),s("a",{href:"javascript:void(0)"},"《揭榜协议》",-1),u(" 和 ",-1),s("a",{href:"javascript:void(0)"},"《平台使用条款》",-1)])]),_:1},8,["modelValue"])]),_:1}),s("div",Y,[l(w,{onClick:E},{default:a(()=>[...e[15]||(e[15]=[u("取消",-1)])]),_:1}),l(w,{type:"primary",loading:_.value,onClick:F},{default:a(()=>[...e[16]||(e[16]=[u(" 提交揭榜申请 ",-1)])]),_:1},8,["loading"])])]),_:1},8,["model"])])])])}}},se=$(Z,[["__scopeId","data-v-0b78fdfb"]]);export{se as default};
