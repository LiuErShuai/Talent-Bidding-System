const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/user-3IRbMYFY.js","assets/index-JBLc9mc5.js","assets/index-nAdWKCPE.css"])))=>i.map(i=>d[i]);
import{_ as M,i as h,f as x,j as l,b as e,h as s,a as d,y as $,I as A,k as b,q as k,t as m,Z as J,$ as W,a0 as Y,F as E,d as R,a1 as F,E as Z,o as i,g as L,r as U,a2 as q,m as K,Y as G,W as T,c as z,n as V,w as H,v as Q,a3 as X,e as S,a4 as ee,u as te}from"./index-JBLc9mc5.js";import{u as O}from"./user-CpDNe0O5.js";import{updateUserInfoAPI as ae}from"./user-3IRbMYFY.js";const se={class:"card-header"},le={class:"profile-section"},ie={key:1,class:"not-available"},oe={key:1,class:"not-available"},ne={key:1,class:"not-available"},re={key:1,class:"not-available"},de={key:1,class:"not-available"},ue={key:1,class:"not-available"},ce={key:1,class:"not-available"},me={key:0},ve={key:1,class:"not-available"},pe={key:0,class:"profile-section"},fe={key:2,class:"profile-section"},ge={class:"bio-content"},_e={key:4,class:"profile-section"},be={class:"project-item"},he={class:"project-role"},ye={key:0,class:"project-description"},ke={__name:"ProfileCard",props:{userData:{type:Object,required:!0,default:()=>({})},hasProfile:{type:Boolean,default:!0}},setup(u){const I=f=>f?new Date(f).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"未知",C=f=>f.startTime&&f.endTime?`${I(f.startTime)} - ${I(f.endTime)}`:f.startTime?`${I(f.startTime)} - 进行中`:"时间未知",r=f=>({已完成:"success",进行中:"warning",已暂停:"info",已取消:"danger"})[f]||"info";return(f,a)=>{const p=b("el-tag"),g=b("el-descriptions-item"),N=b("el-descriptions"),w=b("el-divider"),v=b("el-timeline-item"),o=b("el-timeline"),y=b("el-card");return u.hasProfile?(i(),h(y,{key:0,class:"profile-card"},{header:l(()=>[e("div",se,[e("h2",null,[s($(Z),{style:{width:"1em",height:"1em","margin-right":"8px"}}),a[0]||(a[0]=e("span",null,"个人资料",-1))]),a[1]||(a[1]=e("p",null,"您的完整个人信息",-1))])]),default:l(()=>[e("div",le,[e("h3",null,[s($(A),{style:{width:"1em",height:"1em","margin-right":"8px"}}),a[2]||(a[2]=e("span",null,"基本信息",-1))]),s(N,{column:2,border:"",size:"default"},{default:l(()=>[s(g,{label:"姓名"},{default:l(()=>[u.userData.realName?(i(),h(p,{key:0,type:"success"},{default:l(()=>[k(m(u.userData.realName),1)]),_:1})):(i(),d("span",ie,"暂无信息"))]),_:1}),s(g,{label:"学号"},{default:l(()=>[u.userData.studentId?(i(),h(p,{key:0,type:"info"},{default:l(()=>[k(m(u.userData.studentId),1)]),_:1})):(i(),d("span",oe,"暂无信息"))]),_:1}),s(g,{label:"学院"},{default:l(()=>[u.userData.college?(i(),h(p,{key:0,type:"warning"},{default:l(()=>[s($(A),{style:{width:"1em",height:"1em","margin-right":"4px"}}),k(" "+m(u.userData.college),1)]),_:1})):(i(),d("span",ne,"暂无信息"))]),_:1}),s(g,{label:"专业"},{default:l(()=>[u.userData.major?(i(),h(p,{key:0,type:"primary"},{default:l(()=>[s($(A),{style:{width:"1em",height:"1em","margin-right":"4px"}}),k(" "+m(u.userData.major),1)]),_:1})):(i(),d("span",re,"暂无信息"))]),_:1}),s(g,{label:"年级"},{default:l(()=>[u.userData.grade?(i(),h(p,{key:0,type:"success"},{default:l(()=>[k(m(u.userData.grade),1)]),_:1})):(i(),d("span",de,"暂无信息"))]),_:1}),s(g,{label:"联系方式"},{default:l(()=>[u.userData.phone?(i(),h(p,{key:0,type:"success"},{default:l(()=>[s($(J),{style:{width:"1em",height:"1em","margin-right":"4px"}}),k(" "+m(u.userData.phone),1)]),_:1})):(i(),d("span",ue,"暂无信息"))]),_:1}),s(g,{label:"邮箱"},{default:l(()=>[u.userData.email?(i(),h(p,{key:0,type:"info"},{default:l(()=>[s($(W),{style:{width:"1em",height:"1em","margin-right":"4px"}}),k(" "+m(u.userData.email),1)]),_:1})):(i(),d("span",ce,"暂无信息"))]),_:1}),s(g,{label:"注册时间"},{default:l(()=>[u.userData.registerTime?(i(),d("span",me,m(I(u.userData.registerTime)),1)):(i(),d("span",ve,"暂无信息"))]),_:1})]),_:1})]),s(w),u.userData.skills?.length?(i(),d("div",pe,[e("h3",null,[s($(Y),{style:{width:"1em",height:"1em","margin-right":"8px"}}),a[3]||(a[3]=e("span",null,"技术技能",-1))]),e("div",null,[(i(!0),d(E,null,R(u.userData.skills,c=>(i(),h(p,{key:c,class:"skill-tag",type:"info",effect:"light"},{default:l(()=>[k(m(c),1)]),_:2},1024))),128))])])):x("",!0),u.userData.bio?(i(),h(w,{key:1})):x("",!0),u.userData.bio?(i(),d("div",fe,[e("h3",null,[s($(A),{style:{width:"1em",height:"1em","margin-right":"8px"}}),a[4]||(a[4]=e("span",null,"个人技术简介",-1))]),e("div",ge,[e("p",null,m(u.userData.bio),1)])])):x("",!0),u.userData.projectExperiences?.length?(i(),h(w,{key:3})):x("",!0),u.userData.projectExperiences?.length?(i(),d("div",_e,[e("h3",null,[s($(F),{style:{width:"1em",height:"1em","margin-right":"8px"}}),a[5]||(a[5]=e("span",null,"项目经历",-1))]),s(o,null,{default:l(()=>[(i(!0),d(E,null,R(u.userData.projectExperiences,(c,D)=>(i(),h(v,{key:D,timestamp:C(c),placement:"top"},{default:l(()=>[e("div",be,[e("h4",null,[s($(F),{style:{width:"1em",height:"1em","margin-right":"8px"}}),e("span",null,m(c.projectName),1),s(p,{type:r(c.status),size:"small",style:{"margin-left":"8px"}},{default:l(()=>[k(m(c.status),1)]),_:2},1032,["type"])]),e("p",he,"角色："+m(c.role),1),c.description?(i(),d("p",ye,m(c.description),1)):x("",!0)])]),_:2},1032,["timestamp"]))),128))]),_:1})])):x("",!0)]),_:1})):x("",!0)}}},we=M(ke,[["__scopeId","data-v-3f90d067"]]),De={class:"settings-form"},$e={class:"form-actions"},Ve={__name:"SettingsForm",setup(u){const I=L(),C=O(),r=U(),f=U(!1),a=q({realName:"",studentId:"",college:"",major:"",grade:"",phone:"",email:"",bio:""}),p={realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度在2到20个字符",trigger:"blur"}],college:[{required:!0,message:"请输入学院",trigger:"blur"}],major:[{required:!0,message:"请输入专业",trigger:"blur"}],grade:[{required:!0,message:"请输入年级",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],bio:[{max:500,message:"个人简介不能超过500个字符",trigger:"blur"}]},g=()=>{const v=C.profile;if(v)a.realName=v.realName||"",a.studentId=v.studentId||"",a.college=v.college||"",a.major=v.major||"",a.grade=v.grade||"",a.phone=v.phone||"",a.email=v.email||"",a.bio=v.bio||"";else{const o=I.userInfo;o&&(a.realName=o.realName||o.username||"",a.studentId=o.studentId||"",a.college=o.college||"",a.major=o.major||"",a.grade=o.grade||"",a.phone=o.phone||"",a.email=o.email||"",a.bio=o.bio||"")}},N=async()=>{try{if(!await r.value.validate())return;f.value=!0;const o=await ae({realName:a.realName,college:a.college,major:a.major,grade:a.grade,phone:a.phone,email:a.email,bio:a.bio});o.code===200?(C.setProfile({...C.profile,...a}),I.updateUserInfo({realName:a.realName,phone:a.phone,email:a.email}),T.success("设置保存成功")):T.error(o.message||"保存失败")}catch(v){console.error("Save profile error:",v),T.error("保存失败: "+(v.message||"未知错误"))}finally{f.value=!1}},w=()=>{G.confirm("确定要重置所有设置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{g(),T.success("已重置")}).catch(()=>{})};return K(()=>{g()}),(v,o)=>{const y=b("el-input"),c=b("el-form-item"),D=b("el-col"),j=b("el-row"),_=b("el-form"),t=b("el-card"),P=b("el-button");return i(),d("div",De,[s(t,{class:"settings-card"},{header:l(()=>[...o[8]||(o[8]=[e("div",{class:"card-header"},[e("h2",null,"编辑个人信息")],-1)])]),default:l(()=>[s(_,{model:a,rules:p,ref_key:"profileFormRef",ref:r,"label-width":"120px"},{default:l(()=>[s(j,{gutter:24},{default:l(()=>[s(D,{span:12},{default:l(()=>[s(c,{label:"姓名",prop:"realName"},{default:l(()=>[s(y,{modelValue:a.realName,"onUpdate:modelValue":o[0]||(o[0]=n=>a.realName=n),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1})]),_:1}),s(D,{span:12},{default:l(()=>[s(c,{label:"学号"},{default:l(()=>[s(y,{modelValue:a.studentId,"onUpdate:modelValue":o[1]||(o[1]=n=>a.studentId=n),disabled:"",placeholder:"学号不可修改"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(j,{gutter:24},{default:l(()=>[s(D,{span:12},{default:l(()=>[s(c,{label:"学院",prop:"college"},{default:l(()=>[s(y,{modelValue:a.college,"onUpdate:modelValue":o[2]||(o[2]=n=>a.college=n),placeholder:"请输入学院"},null,8,["modelValue"])]),_:1})]),_:1}),s(D,{span:12},{default:l(()=>[s(c,{label:"专业",prop:"major"},{default:l(()=>[s(y,{modelValue:a.major,"onUpdate:modelValue":o[3]||(o[3]=n=>a.major=n),placeholder:"请输入专业"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(j,{gutter:24},{default:l(()=>[s(D,{span:12},{default:l(()=>[s(c,{label:"年级",prop:"grade"},{default:l(()=>[s(y,{modelValue:a.grade,"onUpdate:modelValue":o[4]||(o[4]=n=>a.grade=n),placeholder:"请输入年级，如：2021级"},null,8,["modelValue"])]),_:1})]),_:1}),s(D,{span:12},{default:l(()=>[s(c,{label:"手机号",prop:"phone"},{default:l(()=>[s(y,{modelValue:a.phone,"onUpdate:modelValue":o[5]||(o[5]=n=>a.phone=n),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(j,{gutter:24},{default:l(()=>[s(D,{span:12},{default:l(()=>[s(c,{label:"邮箱",prop:"email"},{default:l(()=>[s(y,{modelValue:a.email,"onUpdate:modelValue":o[6]||(o[6]=n=>a.email=n),type:"email",placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(c,{label:"个人技术简介",prop:"bio"},{default:l(()=>[s(y,{modelValue:a.bio,"onUpdate:modelValue":o[7]||(o[7]=n=>a.bio=n),type:"textarea",rows:4,placeholder:"请输入个人技术简介，包括技术栈、项目经验等...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),e("div",$e,[s(P,{onClick:w},{default:l(()=>[...o[9]||(o[9]=[k("重置",-1)])]),_:1}),s(P,{type:"primary",onClick:N,loading:f.value},{default:l(()=>[...o[10]||(o[10]=[k(" 保存设置 ",-1)])]),_:1},8,["loading"])])])}}},xe=M(Ve,[["__scopeId","data-v-2f0a5036"]]),Ie={class:"user-container"},Ce={class:"main-content"},Ne={class:"user-layout"},Pe={class:"user-sidebar"},Ue={class:"user-main"},Te={class:"user-banner-section"},je={class:"banner-content"},Se={class:"user-avatar-section"},Be={class:"user-avatar-large"},Ae=["src"],Ee={key:0,class:"avatar-edit-overlay"},Re={class:"user-info-main"},qe={class:"user-name-row"},Me={class:"user-name"},Fe={class:"user-stats-overview"},ze={class:"stat-item"},Le={class:"stat-number"},Ke={class:"stat-item"},Oe={class:"stat-number"},Je={class:"stat-item"},We={class:"stat-number"},Ye={class:"stat-item"},Ze={class:"stat-number"},Ge={key:0,class:"info-section"},He={key:1,class:"loading-container"},Qe={key:1,class:"info-section"},Xe={key:2,class:"info-section"},et={class:"info-grid"},tt={class:"info-card"},at={class:"skills-input-row"},st={class:"skills-tags"},lt=["onClick"],it={key:0,class:"empty-hint"},ot={key:3,class:"info-section"},nt={class:"info-grid"},rt={class:"info-card"},dt={class:"info-item"},ut={class:"info-value"},ct={class:"info-item"},mt={class:"info-value"},vt={class:"info-item"},pt={class:"info-value"},ft={key:4,class:"info-section"},gt={key:5,class:"info-section"},_t={key:6,class:"info-section"},bt={key:7,class:"info-section"},ht={key:8,class:"info-section"},yt={__name:"index",setup(u){te();const I=O(),C=L(),r=U("profile"),f=U(!1),a=U(null),p=U(null),g=z(()=>C.userInfo||{}),N=z(()=>C.userRole||"student"),w=U(["Vue","JavaScript","Python"]),v=U(""),o=()=>{const _=v.value.trim();_&&(w.value.includes(_)||w.value.push(_),v.value="")},y=_=>{w.value.splice(_,1)},c=q({createdProjects:12,participatedBids:25,completedProjects:8,successRate:67});q([{id:1,type:"login",action:"登录系统",time:new Date(Date.now()-1e3*60*30)},{id:2,type:"project",action:'发布了新项目 "AI智能客服系统开发"',time:new Date(Date.now()-1e3*60*60*2)},{id:3,type:"bid",action:'参与竞标 "电商平台UI设计"',time:new Date(Date.now()-1e3*60*60*5)},{id:4,type:"login",action:"上次登录",time:new Date(Date.now()-1e3*60*60*24)}]);const D=async _=>{const t=_.target.files[0];if(t){if(t.size>2*1024*1024){T.error("头像大小不能超过2MB");return}try{const{uploadAvatarAPI:P}=await ee(async()=>{const{uploadAvatarAPI:B}=await import("./user-3IRbMYFY.js");return{uploadAvatarAPI:B}},__vite__mapDeps([0,1,2])),n=await P(t);n.code===200?(p.value&&(p.value.avatar=n.data.avatarUrl),C.updateUserInfo({avatar:n.data.avatarUrl}),T.success("头像上传成功")):T.error(n.message||"头像上传失败")}catch(P){console.error("Upload avatar error:",P),T.error("头像上传失败")}}},j=async()=>{try{const _=await I.fetchUserProfile();_&&(p.value=_)}catch(_){console.error("Load user profile error:",_)}};return K(()=>{j()}),(_,t)=>{const P=b("el-skeleton");return i(),d("div",Ie,[e("main",Ce,[e("div",Ne,[e("aside",Pe,[t[11]||(t[11]=e("div",{class:"sidebar-title"},"个人中心",-1)),e("button",{class:V(["sidebar-item",{active:r.value==="profile"}]),onClick:t[0]||(t[0]=n=>r.value="profile")}," 个人资料 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="detail"}]),onClick:t[1]||(t[1]=n=>r.value="detail")}," 详细资料 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="skills"}]),onClick:t[2]||(t[2]=n=>r.value="skills")}," 技能标签管理 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="account"}]),onClick:t[3]||(t[3]=n=>r.value="account")}," 账号设置 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="achievements"}]),onClick:t[4]||(t[4]=n=>r.value="achievements")}," 我的成果 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="rewards"}]),onClick:t[5]||(t[5]=n=>r.value="rewards")}," 我的奖金 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="ability"}]),onClick:t[6]||(t[6]=n=>r.value="ability")}," 能力评估 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="certificates"}]),onClick:t[7]||(t[7]=n=>r.value="certificates")}," 我的证书 ",2),e("button",{class:V(["sidebar-item",{active:r.value==="privacy"}]),onClick:t[8]||(t[8]=n=>r.value="privacy")}," 隐私设置 ",2)]),e("div",Ue,[e("section",Te,[e("div",je,[e("div",Se,[e("div",{class:"avatar-upload",onClick:t[9]||(t[9]=n=>f.value?_.$refs.avatarInput.click():null)},[e("div",Be,[e("img",{src:p.value?.avatar||g.value.avatar||"https://picsum.photos/seed/user123/120/120.jpg",alt:"用户头像"},null,8,Ae),f.value?(i(),d("div",Ee,[...t[12]||(t[12]=[e("span",null,"更换头像",-1)])])):x("",!0)]),e("input",{ref_key:"avatarInput",ref:a,type:"file",accept:"image/*",style:{display:"none"},onChange:D},null,544)]),e("div",Re,[e("div",qe,[e("h1",Me,m(g.value.username||p.value?.realName||"用户"),1),e("span",{class:V(["role-tag",N.value==="admin"?"admin":"user"])},m(N.value==="admin"?"管理员":N.value==="student"?"学生":N.value==="enterprise"?"企业":N.value==="teacher"?"教师":"普通用户"),3)]),t[13]||(t[13]=e("p",{class:"user-description"},"欢迎来到个人中心，管理您的个人信息和项目",-1))])]),e("div",Fe,[e("div",ze,[e("span",Le,m(c.createdProjects||0),1),t[14]||(t[14]=e("span",{class:"stat-label"},"创建项目",-1))]),e("div",Ke,[e("span",Oe,m(c.participatedBids||0),1),t[15]||(t[15]=e("span",{class:"stat-label"},"参与竞标",-1))]),e("div",Je,[e("span",We,m(c.completedProjects||0),1),t[16]||(t[16]=e("span",{class:"stat-label"},"完成项目",-1))]),e("div",Ye,[e("span",Ze,m(c.successRate||0)+"%",1),t[17]||(t[17]=e("span",{class:"stat-label"},"成功率",-1))])])])]),r.value==="profile"?(i(),d("section",Ge,[p.value?(i(),h(we,{key:0,"user-data":p.value,"has-profile":!!p.value},null,8,["user-data","has-profile"])):(i(),d("div",He,[s(P,{rows:5,animated:""})]))])):r.value==="detail"?(i(),d("section",Qe,[s(xe)])):r.value==="skills"?(i(),d("section",Xe,[t[18]||(t[18]=e("div",{class:"section-header"},[e("h2",{class:"section-title"},"技能标签管理")],-1)),e("div",et,[e("div",tt,[e("div",at,[H(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>v.value=n),class:"info-input",placeholder:"输入技能标签，如：Vue、Python",onKeyup:X(o,["enter"])},null,544),[[Q,v.value]]),e("button",{class:"save-btn",onClick:o},"添加标签")]),e("div",st,[(i(!0),d(E,null,R(w.value,(n,B)=>(i(),d("span",{key:n+B,class:"skill-tag"},[k(m(n)+" ",1),e("button",{class:"tag-remove",onClick:kt=>y(B)},"×",8,lt)]))),128)),w.value.length?x("",!0):(i(),d("p",it,"暂未添加任何技能标签"))])])])])):r.value==="account"?(i(),d("section",ot,[t[23]||(t[23]=e("div",{class:"section-header"},[e("h2",{class:"section-title"},"账号设置")],-1)),e("div",nt,[e("div",rt,[e("div",dt,[t[19]||(t[19]=e("label",{class:"info-label"},"登录账号：",-1)),e("span",ut,m(g.value.username),1)]),e("div",ct,[t[20]||(t[20]=e("label",{class:"info-label"},"绑定手机号：",-1)),e("span",mt,m(g.value.phone||"未设置"),1)]),e("div",vt,[t[21]||(t[21]=e("label",{class:"info-label"},"绑定邮箱：",-1)),e("span",pt,m(g.value.email||"未设置"),1)]),t[22]||(t[22]=e("p",{class:"empty-hint"},"密码修改、二次验证等功能可在此扩展。",-1))])])])):r.value==="achievements"?(i(),d("section",ft,[...t[24]||(t[24]=[S('<div class="section-header" data-v-a926be27><h2 class="section-title" data-v-a926be27>我的成果</h2></div><div class="info-grid" data-v-a926be27><div class="info-card" data-v-a926be27><p class="empty-hint" data-v-a926be27>这里可以展示你在项目中的成果、作品链接等内容。</p></div></div>',2)])])):r.value==="rewards"?(i(),d("section",gt,[...t[25]||(t[25]=[S('<div class="section-header" data-v-a926be27><h2 class="section-title" data-v-a926be27>我的奖金</h2></div><div class="info-grid" data-v-a926be27><div class="info-card" data-v-a926be27><p class="empty-hint" data-v-a926be27>这里可以展示项目奖金统计、收益明细等信息。</p></div></div>',2)])])):r.value==="ability"?(i(),d("section",_t,[...t[26]||(t[26]=[S('<div class="section-header" data-v-a926be27><h2 class="section-title" data-v-a926be27>能力评估</h2></div><div class="info-grid" data-v-a926be27><div class="info-card" data-v-a926be27><p class="empty-hint" data-v-a926be27>这里可以展示能力雷达图和综合评分。</p></div></div>',2)])])):r.value==="certificates"?(i(),d("section",bt,[...t[27]||(t[27]=[S('<div class="section-header" data-v-a926be27><h2 class="section-title" data-v-a926be27>我的证书</h2></div><div class="info-grid" data-v-a926be27><div class="info-card" data-v-a926be27><p class="empty-hint" data-v-a926be27>这里可以展示平台颁发的项目证书、荣誉证明等。</p></div></div>',2)])])):r.value==="privacy"?(i(),d("section",ht,[...t[28]||(t[28]=[S('<div class="section-header" data-v-a926be27><h2 class="section-title" data-v-a926be27>隐私设置</h2></div><div class="info-grid" data-v-a926be27><div class="info-card" data-v-a926be27><p class="empty-hint" data-v-a926be27>这里可以配置资料公开范围、消息通知等隐私选项。</p></div></div>',2)])])):x("",!0)])])])])}}},Vt=M(yt,[["__scopeId","data-v-a926be27"]]);export{Vt as default};
