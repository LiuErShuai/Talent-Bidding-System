import{am as t,H as s}from"./index-Bg6MLb3F.js";import{getUserProjectsAPI as o,getUserInfoAPI as l}from"./user-CcWMZW8s.js";const c=t("user",{state:()=>({profile:null,skills:[],projects:[],teams:[],loading:!1}),getters:{fullUserInfo:e=>e.profile,skillCount:e=>e.skills.length,projectCount:e=>e.projects.length},actions:{setProfile(e){this.profile=e,e?.skills&&(this.skills=e.skills)},setSkills(e){this.skills=e},setProjects(e){this.projects=e},setTeams(e){this.teams=e},async fetchUserProfile(){try{this.loading=!0;const e=await l();return e.code===200&&e.data?(this.setProfile(e.data),e.data.projectExperiences&&this.setProjects(e.data.projectExperiences),e.data):(s.error(e.message||"获取用户信息失败"),null)}catch(e){return console.error("Fetch user profile error:",e),s.error("获取用户信息失败"),null}finally{this.loading=!1}},async fetchUserProjects(e){try{const r=await o(e);return r.code===200&&r.data?(this.setProjects(r.data.projects||[]),r.data.projects||[]):(s.error(r.message||"获取项目经历失败"),[])}catch(r){return console.error("Fetch user projects error:",r),s.error("获取项目经历失败"),[]}}}});export{c as u};
