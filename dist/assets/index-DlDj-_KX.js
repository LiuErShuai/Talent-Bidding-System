import{_ as yt,g as bt,r as _,c as q,y as Dt,j as kt,a as o,b as e,h as s,i as l,k as d,e as G,F as N,d as R,u as It,o as n,l as r,p,A as Et,B as W,C as Mt,D as wt,G as ht,n as X,s as D,H,f as v,t as c,I as x,J as Nt,K as Rt,L as Vt,M as J,q as St,E as Q}from"./index-DnkofVqd.js";const At={class:"project-details-container"},Tt={class:"main-content"},xt={class:"breadcrumb-section mb20"},jt={class:"content-row"},Pt={class:"main-info-section"},Ct={class:"project-header"},Lt={class:"project-header-left"},Ot={class:"publisher-info"},Bt={class:"rating"},Ut={class:"action-section"},zt={class:"action-buttons"},Ft={class:"stats-section"},Yt={class:"stats"},$t={class:"stat-item"},Kt={class:"stat-item"},qt={class:"stat-item"},Gt={class:"project-steps-container mt15"},Wt={class:"ant-steps ant-steps-horizontal project-steps ant-steps-label-vertical"},Xt={class:"ant-steps-item-container"},Ht={class:"ant-steps-item-icon"},Jt={class:"ant-steps-icon"},Qt={key:1,class:"circle-icon"},Zt={class:"ant-steps-item-content"},te={class:"ant-steps-item-title"},ee={key:0,class:"ant-steps-item-description"},se={class:"color-grey-6 font-12"},ae={class:"tab-section"},le={class:"detail-content"},ne={class:"section"},ie={class:"section"},oe={class:"section"},de={class:"attachments"},re={class:"attachment-item"},ue={class:"attachment-item"},pe={class:"section"},ce={class:"milestone-tracking-content"},fe={key:0,class:"permission-notice"},ve={class:"milestone-timeline"},me={key:0,class:"timeline-connector"},_e={class:"milestone-marker"},ge={key:1,class:"marker-icon in-progress"},ye={key:2,class:"marker-icon pending"},be={class:"milestone-card"},De={class:"milestone-header"},ke={class:"milestone-title-row"},Ie={class:"milestone-title"},Ee={class:"milestone-meta"},Me={class:"milestone-date"},we={key:0,class:"milestone-actual-date"},he={key:1,class:"milestone-delay"},Ne={class:"milestone-description"},Re={key:0,class:"milestone-deliverables"},Ve={class:"deliverables-list"},Se={key:1,class:"milestone-sensitive-info"},Ae={key:0,class:"sensitive-section"},Te={class:"progress-detail"},xe={class:"progress-note"},je={key:1,class:"sensitive-section"},Pe={class:"communications-list"},Ce={class:"comm-header"},Le={class:"comm-author"},Oe={class:"comm-time"},Be={class:"comm-content"},Ue={key:2,class:"sensitive-section"},ze={class:"internal-notes"},Fe={key:3,class:"sensitive-section"},Ye={class:"attachments-list"},$e={key:2,class:"sensitive-info-placeholder"},Ke={key:3,class:"milestone-actions"},qe={class:"progress-input-group"},Ge={class:"progress-text"},We={class:"dialog-footer"},Xe={__name:"index",setup(He){const V=kt(),j=It(),P=bt(),U=_("details"),y=_((()=>{const i=V.params.id;return{rating:4.5,publisherId:"enterprise-001",bidderIds:{1:["test_student_001","student-001","student-002"],2:["student-001","student-002"],3:["student-002","student-003"]}[i]||["student-001","student-002"]}})()),k=q(()=>({id:P.userInfo?.id||"",role:P.userRole||"visitor",isLoggedIn:P.isAuthenticated})),S=q(()=>{if(!k.value.isLoggedIn)return!1;const i=k.value.id,t=k.value.role;return!!(t==="enterprise"&&i===y.value.publisherId||t==="student"&&y.value.bidderIds&&y.value.bidderIds.includes(i))}),b=_([{id:"milestone-proposal",code:"PROPOSAL_SUBMIT",title:"方案提交完成",description:"提交项目实施方案，包括技术方案、实施计划、团队分工等",status:"completed",plannedDate:"2025-11-21",actualDate:"2025-11-20",delayDays:-1,deliverables:["项目实施方案","技术方案文档","实施计划（甘特图）","团队分工说明"],progressDetail:{percentage:100,status:"success",note:"会议顺利召开，所有团队成员参与，明确了项目目标和分工"},communications:[{author:"李经理（企业方）",time:"2025-11-16 14:30",content:"项目启动顺利，期待团队的表现"},{author:"张同学（团队负责人）",time:"2025-11-16 15:00",content:"收到，我们会按照计划推进项目"}],internalNotes:"项目启动顺利，团队积极性高，预计可以提前完成",sensitiveAttachments:[{name:"项目启动会录音.mp3",size:"12.5MB"},{name:"内部讨论记录.docx",size:"856KB"}]},{id:"milestone-requirement",code:"REQUIREMENT_ANALYSIS",title:"需求分析完成",description:"完成详细需求分析，输出需求规格说明书",status:"completed",plannedDate:"2025-11-25",actualDate:"2025-11-24",delayDays:-1,deliverables:["需求规格说明书v1.0","需求分析报告"],progressDetail:{percentage:100,status:"success",note:"提前1天完成，需求分析全面细致"},communications:[{author:"王同学（需求分析师）",time:"2025-11-24 18:00",content:"需求分析已完成，请企业方审核"}],internalNotes:"需求分析质量较高，企业方反馈良好",sensitiveAttachments:[]},{id:"milestone-design",code:"SYSTEM_DESIGN",title:"系统设计完成",description:"完成系统架构设计和详细设计，输出设计文档",status:"in-progress",plannedDate:"2025-12-05",actualDate:null,delayDays:0,deliverables:["系统架构设计文档","数据库设计文档","接口设计文档"],progressDetail:{percentage:75,status:null,note:"架构设计已完成，正在进行详细设计，预计12月4日完成"},communications:[{author:"赵同学（架构师）",time:"2025-11-30 16:20",content:"架构设计已完成，正在完善详细设计文档"},{author:"李经理（企业方）",time:"2025-11-30 17:00",content:"架构设计思路清晰，请继续完善详细设计"}],internalNotes:"设计进度正常，团队协作良好",sensitiveAttachments:[{name:"架构设计评审记录.pdf",size:"2.3MB"}]},{id:"milestone-development",code:"CORE_DEVELOPMENT",title:"核心功能开发完成",description:"完成系统核心功能模块的开发",status:"pending",plannedDate:"2025-12-20",actualDate:null,delayDays:null,deliverables:["核心功能代码","单元测试报告","功能演示视频"],progressDetail:null,communications:[],internalNotes:null,sensitiveAttachments:[]},{id:"milestone-weekly",code:"WEEKLY_REPORT",title:"周报/月报提交",description:"定期提交项目进度报告，包括本周完成、下周计划、问题与风险",status:"in-progress",plannedDate:"2025-12-15",actualDate:null,delayDays:null,deliverables:["周报/月报文档"],progressDetail:{percentage:0,status:null,note:"请定期提交周报/月报，记录项目进展"},communications:[],internalNotes:null,sensitiveAttachments:[]},{id:"milestone-midterm",code:"MIDTERM_DEFENSE",title:"中期答辩",description:"项目中期检查，展示项目进展和阶段性成果",status:"pending",plannedDate:"2025-12-28",actualDate:null,delayDays:null,deliverables:["中期答辩PPT","阶段性成果展示","演练视频"],progressDetail:null,communications:[],internalNotes:null,sensitiveAttachments:[]},{id:"milestone-delivery",code:"FINAL_DELIVERY",title:"成果提交",description:"提交最终项目成果，包括代码包、文档、测试报告等",status:"pending",plannedDate:"2026-01-15",actualDate:null,delayDays:null,deliverables:["最终代码包","产品说明书","测试报告","用户手册","演示视频"],progressDetail:null,communications:[],internalNotes:null,sensitiveAttachments:[]}]),Z=i=>({completed:"success","in-progress":"warning",pending:"info",delayed:"danger"})[i]||"info",tt=i=>({completed:"已完成","in-progress":"进行中",pending:"待开始",delayed:"已延迟"})[i]||"未知",et=i=>!(!S.value||k.value.role!=="student"||!y.value.bidderIds?.includes(k.value.id)||i.status!=="in-progress"&&i.status!=="pending"),st=i=>["PROJECT_START","REQUIREMENT_ANALYSIS","SYSTEM_DESIGN","CORE_DEVELOPMENT","WEEKLY_REPORT"].includes(i.code),I=_(!1),E=_(null),C=_(null),L=_(!1),f=_({progress:0,description:"",deliverables:[],risks:""}),at={progress:[{required:!0,message:"请设置完成进度",trigger:"change"}],description:[{required:!0,message:"请填写完成说明",trigger:"blur"},{min:10,message:"完成说明至少10个字符",trigger:"blur"}]},lt=i=>{E.value=i,f.value={progress:i.progressDetail?.percentage||0,description:i.progressDetail?.note||"",deliverables:[],risks:""},I.value=!0},nt=async()=>{if(C.value)try{await C.value.validate(),L.value=!0,await new Promise(t=>setTimeout(t,1e3));const i=b.value.findIndex(t=>t.id===E.value.id);i!==-1&&(b.value[i]={...b.value[i],status:f.value.progress===100?"completed":"in-progress",actualDate:f.value.progress===100?new Date().toISOString().split("T")[0]:null,progressDetail:{percentage:f.value.progress,status:f.value.progress===100?"success":null,note:f.value.description}}),Q.success("提交成功"),I.value=!1}catch(i){i!==!1&&Q.error("提交失败："+(i.message||"未知错误"))}finally{L.value=!1}},it=i=>{const t=V.params.id,M=i.code,B={PROPOSAL_SUBMIT:`/project/${t}/milestone/proposal`,MIDTERM_DEFENSE:`/project/${t}/milestone/midterm`,FINAL_DELIVERY:`/project/${t}/milestone/delivery`}[M]||`/student/Submit?id=${t}&milestone=${M}`;j.push(B)},ot=_([{code:"BIDDING",title:"揭榜征集",status:"finish",timeInfo:"2025-11-03",startDate:"2025-11-01",endDate:"2025-11-15",deadline:"2025-11-15"},{code:"PROPOSAL",title:"方案提交",status:"process",timeInfo:"剩余5天",startDate:"2025-11-16",endDate:"2025-11-21",deadline:"2025-11-21"},{code:"EXECUTION",title:"项目执行",status:"wait",timeInfo:"预计30天",startDate:null,endDate:null,deadline:null},{code:"MIDTERM",title:"中期答辩",status:"wait",timeInfo:"预计7天",startDate:null,endDate:null,deadline:null},{code:"DELIVERY",title:"成果提交",status:"wait",timeInfo:"预计5天",startDate:null,endDate:null,deadline:null},{code:"REVIEW",title:"成果评审",status:"wait",timeInfo:"预计7天",startDate:null,endDate:null,deadline:null},{code:"ANNOUNCEMENT",title:"结项公示",status:"wait",timeInfo:"预计7天",startDate:null,endDate:null,deadline:null}]),dt=()=>{j.push("/projects")},rt=()=>{const i=V.params.id;i&&j.push(`/apply/${i}`)};return Dt(()=>{V.params.id}),(i,t)=>{const M=d("router-link"),O=d("el-tag"),B=d("el-rate"),u=d("el-icon"),g=d("el-button"),z=d("el-collapse-item"),F=d("el-collapse"),A=d("el-link"),w=d("el-tab-pane"),Y=d("el-alert"),ut=d("el-divider"),pt=d("el-progress"),ct=d("el-empty"),ft=d("el-tabs"),vt=d("el-slider"),T=d("el-form-item"),$=d("el-input"),mt=d("el-upload"),_t=d("el-form"),gt=d("el-dialog");return n(),o("div",At,[e("div",Tt,[e("div",xt,[s(M,{class:"color-deep-blue",to:"/home"},{default:l(()=>[...t[8]||(t[8]=[r("首页 > ",-1)])]),_:1}),s(M,{class:"color-deep-blue",to:"/projects"},{default:l(()=>[...t[9]||(t[9]=[r("项目大厅 > ",-1)])]),_:1}),t[10]||(t[10]=e("span",null,"项目详情",-1))]),e("div",jt,[e("div",Pt,[e("div",Ct,[e("div",Lt,[s(O,{class:"status-tag",type:"success"},{default:l(()=>[...t[11]||(t[11]=[r("揭榜中",-1)])]),_:1}),t[12]||(t[12]=e("h1",{class:"project-title"},"AI智能客服系统",-1))]),e("button",{class:"back-project-btn",onClick:dt},"返回大厅")]),e("div",Ot,[t[14]||(t[14]=e("span",{class:"publisher"},"发布方：XX科技有限公司",-1)),e("div",Bt,[s(B,{modelValue:y.value.rating,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value.rating=a),disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"]),t[13]||(t[13]=e("span",{class:"rating-text"},"4.5分 (28条评价)",-1))])]),t[15]||(t[15]=G('<div class="basic-info-card" data-v-aff3a1df><div class="info-row" data-v-aff3a1df><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>悬赏金额</span><span class="value price" data-v-aff3a1df>￥15,000</span></div><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>项目领域</span><span class="value" data-v-aff3a1df>人工智能</span></div></div><div class="info-row" data-v-aff3a1df><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>揭榜模式</span><span class="value" data-v-aff3a1df>团队悬赏</span></div><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>需求人数</span><span class="value" data-v-aff3a1df>2-4人</span></div></div><div class="info-row" data-v-aff3a1df><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>项目周期</span><span class="value" data-v-aff3a1df>60天</span></div><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>发布时间</span><span class="value" data-v-aff3a1df>2025-11-01</span></div></div><div class="info-row" data-v-aff3a1df><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>截止时间</span><span class="value" data-v-aff3a1df>2025-11-15</span></div><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>剩余时间</span><span class="value time-left" data-v-aff3a1df>⏰ 7天</span></div></div><div class="info-row" data-v-aff3a1df><div class="info-item" data-v-aff3a1df><span class="label" data-v-aff3a1df>已揭榜数</span><span class="value" data-v-aff3a1df>12人</span></div></div></div>',1))]),e("div",Ut,[e("div",zt,[s(g,{type:"primary",class:"action-btn primary",onClick:rt},{default:l(()=>[s(u,null,{default:l(()=>[s(p(Et))]),_:1}),t[16]||(t[16]=r(" 我要揭榜 ",-1))]),_:1}),s(g,{class:"action-btn secondary"},{default:l(()=>[s(u,null,{default:l(()=>[s(p(W))]),_:1}),t[17]||(t[17]=r(" 关注项目 ",-1))]),_:1}),s(g,{class:"action-btn secondary"},{default:l(()=>[s(u,null,{default:l(()=>[s(p(Mt))]),_:1}),t[18]||(t[18]=r(" 咨询企业 ",-1))]),_:1})]),t[23]||(t[23]=G('<div class="progress-section" data-v-aff3a1df><h4 data-v-aff3a1df>项目进度</h4><div class="progress-bar" data-v-aff3a1df><div class="progress-line" data-v-aff3a1df><div class="progress-dot active" data-v-aff3a1df></div><div class="progress-dot" data-v-aff3a1df></div><div class="progress-dot" data-v-aff3a1df></div><div class="progress-dot" data-v-aff3a1df></div></div><div class="progress-labels" data-v-aff3a1df><span class="active" data-v-aff3a1df>发布</span><span data-v-aff3a1df>揭榜</span><span data-v-aff3a1df>评审</span><span data-v-aff3a1df>完成</span></div></div></div>',1)),e("div",Ft,[t[22]||(t[22]=e("h4",null,"统计信息",-1)),e("div",Yt,[e("div",$t,[s(u,null,{default:l(()=>[s(p(wt))]),_:1}),t[19]||(t[19]=e("span",null,"浏览量: 1,234",-1))]),e("div",Kt,[s(u,null,{default:l(()=>[s(p(W))]),_:1}),t[20]||(t[20]=e("span",null,"关注数: 45",-1))]),e("div",qt,[s(u,null,{default:l(()=>[s(p(ht))]),_:1}),t[21]||(t[21]=e("span",null,"揭榜数: 12",-1))])])])])]),e("div",Gt,[e("div",Wt,[(n(!0),o(N,null,R(ot.value,(a,K)=>(n(),o("div",{key:a.code,class:X(["ant-steps-item","ant-steps-item-custom",{"ant-steps-item-finish":a.status==="finish","ant-steps-item-process":a.status==="process","ant-steps-item-wait":a.status==="wait"}])},[e("div",Xt,[t[24]||(t[24]=e("div",{class:"ant-steps-item-tail"},null,-1)),e("div",Ht,[e("span",Jt,[a.status==="finish"?(n(),D(u,{key:0,class:"icon-check"},{default:l(()=>[s(p(H))]),_:1})):(n(),o("div",Qt))])]),e("div",Zt,[e("div",te,c(a.title),1),a.timeInfo?(n(),o("div",ee,[e("span",se,c(a.timeInfo),1)])):v("",!0)])])],2))),128))])]),e("div",ae,[s(ft,{modelValue:U.value,"onUpdate:modelValue":t[1]||(t[1]=a=>U.value=a),class:"detail-tabs"},{default:l(()=>[s(w,{label:"项目详情",name:"details"},{default:l(()=>[e("div",le,[t[39]||(t[39]=e("div",{class:"section"},[e("h3",null,"■ 项目背景"),e("p",null,"随着人工智能技术的发展，智能客服已成为企业提升服务质量的重要工具。当前市场上大多数智能客服系统存在响应速度慢、理解能力有限等问题，急需开发一款高性能的AI智能客服系统。")],-1)),t[40]||(t[40]=e("div",{class:"section"},[e("h3",null,"■ 项目目标"),e("ul",null,[e("li",null,"实现7×24小时智能在线客服"),e("li",null,"支持多轮对话和上下文理解"),e("li",null,"集成知识库管理系统"),e("li",null,"支持多种渠道接入（网页、微信、APP）"),e("li",null,"提供完善的统计分析功能")])],-1)),t[41]||(t[41]=e("div",{class:"section"},[e("h3",null,"■ 成果形式"),e("ul",null,[e("li",null,"完整的系统源代码"),e("li",null,"系统部署文档"),e("li",null,"用户使用手册"),e("li",null,"项目演示视频")])],-1)),e("div",ne,[t[26]||(t[26]=e("h3",null,"■ 功能要求",-1)),s(F,null,{default:l(()=>[s(z,{title:"点击展开查看详细功能要求"},{default:l(()=>[...t[25]||(t[25]=[e("div",null,"详细的功能需求包括：用户管理、对话管理、知识库管理、统计分析、系统设置等模块。",-1)])]),_:1})]),_:1})]),e("div",ie,[t[28]||(t[28]=e("h3",null,"■ 性能指标",-1)),s(F,null,{default:l(()=>[s(z,{title:"点击展开查看性能指标"},{default:l(()=>[...t[27]||(t[27]=[e("div",null,"响应时间小于200ms，并发用户数支持1000+，系统可用性99.9%。",-1)])]),_:1})]),_:1})]),t[42]||(t[42]=e("div",{class:"section"},[e("h3",null,"■ 评审方式"),e("p",null,"企业+专家联合评审")],-1)),t[43]||(t[43]=e("div",{class:"section"},[e("h3",null,"■ 知识产权"),e("p",null,"所有权归学生团队，企业拥有使用权")],-1)),e("div",oe,[t[33]||(t[33]=e("h3",null,"■ 附件资料",-1)),e("div",de,[e("div",re,[s(u,null,{default:l(()=>[s(p(x))]),_:1}),t[30]||(t[30]=e("span",null,"需求规格说明书.pdf (2.3MB)",-1)),s(A,{type:"primary"},{default:l(()=>[...t[29]||(t[29]=[r("[下载]",-1)])]),_:1})]),e("div",ue,[s(u,null,{default:l(()=>[s(p(x))]),_:1}),t[32]||(t[32]=e("span",null,"接口文档.docx (856KB)",-1)),s(A,{type:"primary"},{default:l(()=>[...t[31]||(t[31]=[r("[下载]",-1)])]),_:1})])])]),e("div",pe,[t[37]||(t[37]=e("h3",null,"■ 联系方式",-1)),t[38]||(t[38]=e("p",null,"联系人：李经理",-1)),e("p",null,[t[35]||(t[35]=r("联系电话：138****1234 ",-1)),s(A,{type:"primary"},{default:l(()=>[...t[34]||(t[34]=[r("[查看完整]",-1)])]),_:1}),t[36]||(t[36]=r(" (揭榜后可见)",-1))])])])]),_:1}),s(w,{label:"揭榜名单",name:"bidders"},{default:l(()=>[...t[44]||(t[44]=[e("div",{class:"tab-content"},"揭榜名单内容将在这里显示",-1)])]),_:1}),s(w,{label:"评论(23)",name:"comments"},{default:l(()=>[...t[45]||(t[45]=[e("div",{class:"tab-content"},"评论内容将在这里显示",-1)])]),_:1}),s(w,{label:"企业介绍",name:"company"},{default:l(()=>[...t[46]||(t[46]=[e("div",{class:"tab-content"},"企业介绍内容将在这里显示",-1)])]),_:1}),s(w,{label:"项目里程碑",name:"milestones"},{default:l(()=>[e("div",ce,[S.value?v("",!0):(n(),o("div",fe,[s(Y,{type:"info",closable:!1,"show-icon":""},{title:l(()=>[...t[47]||(t[47]=[e("span",null,"您当前以访客身份查看，部分敏感信息仅对项目参与者（发布方和承接方）可见",-1)])]),_:1})])),e("div",ve,[(n(!0),o(N,null,R(b.value,(a,K)=>(n(),o("div",{key:a.id,class:X(["milestone-item",{"milestone-completed":a.status==="completed","milestone-in-progress":a.status==="in-progress","milestone-pending":a.status==="pending","milestone-delayed":a.status==="delayed"}])},[K<b.value.length-1?(n(),o("div",me)):v("",!0),e("div",_e,[a.status==="completed"?(n(),D(u,{key:0,class:"marker-icon completed"},{default:l(()=>[s(p(H))]),_:1})):a.status==="in-progress"?(n(),o("div",ge,[...t[48]||(t[48]=[e("div",{class:"pulse-dot"},null,-1)])])):(n(),o("div",ye))]),e("div",be,[e("div",De,[e("div",ke,[e("h3",Ie,c(a.title),1),s(O,{type:Z(a.status),size:"small"},{default:l(()=>[r(c(tt(a.status)),1)]),_:2},1032,["type"])]),e("div",Ee,[e("span",Me,[s(u,null,{default:l(()=>[s(p(Nt))]),_:1}),r(" "+c(a.plannedDate),1)]),a.actualDate?(n(),o("span",we," 实际完成："+c(a.actualDate),1)):v("",!0),a.delayDays&&a.delayDays>0?(n(),o("span",he," 延迟 "+c(a.delayDays)+" 天 ",1)):v("",!0)])]),e("div",Ne,[e("p",null,c(a.description),1)]),a.deliverables&&a.deliverables.length>0?(n(),o("div",Re,[t[49]||(t[49]=e("div",{class:"section-title"},"交付物",-1)),e("ul",Ve,[(n(!0),o(N,null,R(a.deliverables,(m,h)=>(n(),o("li",{key:h},[s(u,null,{default:l(()=>[s(p(x))]),_:1}),e("span",null,c(m),1)]))),128))])])):v("",!0),S.value?(n(),o("div",Se,[s(ut,null,{default:l(()=>[s(u,null,{default:l(()=>[s(p(Rt))]),_:1}),t[50]||(t[50]=e("span",null,"项目参与者信息",-1))]),_:1}),a.progressDetail?(n(),o("div",Ae,[t[51]||(t[51]=e("div",{class:"section-title"},"详细进度",-1)),e("div",Te,[s(pt,{percentage:a.progressDetail.percentage,status:a.progressDetail.status,"stroke-width":8},null,8,["percentage","status"]),e("p",xe,c(a.progressDetail.note),1)])])):v("",!0),a.communications&&a.communications.length>0?(n(),o("div",je,[t[52]||(t[52]=e("div",{class:"section-title"},"沟通记录",-1)),e("div",Pe,[(n(!0),o(N,null,R(a.communications,(m,h)=>(n(),o("div",{key:h,class:"communication-item"},[e("div",Ce,[e("span",Le,c(m.author),1),e("span",Oe,c(m.time),1)]),e("p",Be,c(m.content),1)]))),128))])])):v("",!0),a.internalNotes?(n(),o("div",Ue,[t[53]||(t[53]=e("div",{class:"section-title"},"内部备注",-1)),e("div",ze,[e("p",null,c(a.internalNotes),1)])])):v("",!0),a.sensitiveAttachments&&a.sensitiveAttachments.length>0?(n(),o("div",Fe,[t[55]||(t[55]=e("div",{class:"section-title"},"内部附件",-1)),e("div",Ye,[(n(!0),o(N,null,R(a.sensitiveAttachments,(m,h)=>(n(),o("div",{key:h,class:"attachment-item"},[s(u,null,{default:l(()=>[s(p(x))]),_:1}),e("span",null,c(m.name)+" ("+c(m.size)+")",1),s(A,{type:"primary",underline:!1},{default:l(()=>[...t[54]||(t[54]=[r("[下载]",-1)])]),_:1})]))),128))])])):v("",!0)])):(n(),o("div",$e,[s(Y,{type:"info",closable:!1,"show-icon":""},{title:l(()=>[...t[56]||(t[56]=[e("span",null,"此里程碑包含项目参与者专属信息，仅项目发布方和承接方可查看",-1)])]),_:1})])),S.value&&et(a)?(n(),o("div",Ke,[st(a)?(n(),D(g,{key:0,type:"primary",size:"default",onClick:m=>lt(a)},{default:l(()=>[s(u,null,{default:l(()=>[s(p(Vt))]),_:1}),t[57]||(t[57]=r(" 更新进度 ",-1))]),_:1},8,["onClick"])):(n(),D(g,{key:1,type:"primary",size:"default",onClick:m=>it(a)},{default:l(()=>[s(u,null,{default:l(()=>[s(p(J))]),_:1}),r(" 提交"+c(a.title)+" ",1),s(u,null,{default:l(()=>[s(p(St))]),_:1})]),_:2},1032,["onClick"]))])):v("",!0)])],2))),128))]),b.value.length===0?(n(),D(ct,{key:1,description:"暂无里程碑信息"})):v("",!0)])]),_:1})]),_:1},8,["modelValue"])])]),s(gt,{modelValue:I.value,"onUpdate:modelValue":t[7]||(t[7]=a=>I.value=a),title:E.value?E.value.title+" - 更新进度":"里程碑操作",width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[e("div",We,[s(g,{onClick:t[6]||(t[6]=a=>I.value=!1)},{default:l(()=>[...t[60]||(t[60]=[r("取消",-1)])]),_:1}),s(g,{type:"primary",onClick:nt,loading:L.value},{default:l(()=>[...t[61]||(t[61]=[r(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[E.value?(n(),D(_t,{key:0,ref_key:"milestoneFormRef",ref:C,model:f.value,rules:at,"label-width":"120px"},{default:l(()=>[s(T,{label:"完成进度",prop:"progress"},{default:l(()=>[e("div",qe,[s(vt,{modelValue:f.value.progress,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value.progress=a),min:0,max:100,"show-tooltip":!0},null,8,["modelValue"]),e("span",Ge,c(f.value.progress)+"%",1)])]),_:1}),s(T,{label:"完成说明",prop:"description"},{default:l(()=>[s($,{modelValue:f.value.description,"onUpdate:modelValue":t[3]||(t[3]=a=>f.value.description=a),type:"textarea",rows:4,placeholder:"请描述本里程碑的完成情况、遇到的问题、解决方案等...","show-word-limit":"",maxlength:"1000"},null,8,["modelValue"])]),_:1}),s(T,{label:"交付物",prop:"deliverables"},{default:l(()=>[s(mt,{"file-list":f.value.deliverables,"onUpdate:fileList":t[4]||(t[4]=a=>f.value.deliverables=a),action:"#",multiple:"","auto-upload":!1,limit:10},{tip:l(()=>[...t[59]||(t[59]=[e("div",{class:"el-upload__tip"}," 支持上传多个文件，单个文件不超过 100MB，最多10个文件 ",-1)])]),default:l(()=>[s(g,{type:"primary"},{default:l(()=>[s(u,null,{default:l(()=>[s(p(J))]),_:1}),t[58]||(t[58]=r(" 上传文件 ",-1))]),_:1})]),_:1},8,["file-list"])]),_:1}),s(T,{label:"问题与风险"},{default:l(()=>[s($,{modelValue:f.value.risks,"onUpdate:modelValue":t[5]||(t[5]=a=>f.value.risks=a),type:"textarea",rows:3,placeholder:"如有问题或风险，请在此说明...","show-word-limit":"",maxlength:"500"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):v("",!0)]),_:1},8,["modelValue","title"])])}}},Ze=yt(Xe,[["__scopeId","data-v-aff3a1df"]]);export{Ze as default};
