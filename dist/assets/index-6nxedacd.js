import{_ as B}from"./桂电透明背景logo-ClRN5aIs.js";import{_ as T,u as O,g as $,r as M,w as P,a as d,o as a,b as o,t as y,F as f,d as N,z as I,n as R,E as V,y as F,c as j,f as L,h as c,i as n,k,s as A,l as g,p as H,V as W,x as z,j as G}from"./index-DnkofVqd.js";const m={VISITOR:"visitor",STUDENT:"student",ENTERPRISE:"enterprise",TEACHER:"teacher",ADMIN:"admin"};function ge(e,p){return p&&x[e]||x[m.VISITOR]}const x={[m.VISITOR]:{navItems:[{label:"首页",path:"/home",type:"link"},{label:"项目大厅",path:"/projects",type:"link",matchRoute:e=>e.path.startsWith("/projects")},{label:"成长中心",path:"/growth-center",type:"link",requireLogin:!0},{label:"消息",path:"/messages",type:"link",requireLogin:!0}],quickActions:[],variant:"default"},[m.STUDENT]:{navItems:[{label:"首页",path:"/home",type:"link"},{label:"创客空间",type:"dropdown",children:[{label:"项目大厅",path:"/projects"},{label:"热门项目",path:"/projects?sort=hot"},{label:"项目详情",path:"/projects"}]},{label:"项目大厅",path:"/projects",type:"link",matchRoute:e=>e.path.startsWith("/projects")},{label:"成长中心",path:"/growth-center",type:"link"},{label:"消息",path:"/messages",type:"link",badgeKey:"messages"}],quickActions:[{label:"个人中心",path:"/user",type:"normal"},{label:"设置",path:"/user?tab=settings",type:"normal"},{label:"退出登录",type:"danger"}],variant:"default"},[m.ENTERPRISE]:{navItems:[{label:"首页",path:"/home",type:"link"},{label:"项目管理",type:"dropdown",children:[{label:"我的项目",path:"/enterprise/my-projects"},{label:"发布项目",path:"/enterprise/publish"}]},{label:"成果中心",path:"/results-center",type:"link"},{label:"消息",path:"/messages",type:"link",badgeKey:"messages"}],quickActions:[{label:"个人中心",path:"/user",type:"normal"},{label:"设置",path:"/user?tab=settings",type:"normal"},{label:"退出登录",type:"danger"}],variant:"default"},[m.TEACHER]:{navItems:[{label:"首页",path:"/home",type:"link"},{label:"项目大厅",path:"/projects",type:"link",matchRoute:e=>e.path.startsWith("/projects")},{label:"学生管理",type:"dropdown",children:[{label:"学生列表",path:"/teacher/students"},{label:"成绩管理",path:"/teacher/grades"}]},{label:"消息",path:"/messages",type:"link",badgeKey:"messages"}],quickActions:[{label:"个人中心",path:"/user",type:"normal"},{label:"设置",path:"/user?tab=settings",type:"normal"},{label:"退出登录",type:"danger"}],variant:"default"},[m.ADMIN]:{navItems:[{label:"首页",path:"/home",type:"link"},{label:"项目审核",type:"dropdown",children:[{label:"项目初审",path:"/pre-review"},{label:"项目终审",path:"/final-review"},{label:"中期答辩",path:"/midterm-defense"}]},{label:"数据中心",path:"/statistics",type:"link"},{label:"消息",path:"/messages",type:"link",badgeKey:"messages"}],quickActions:[{label:"个人中心",path:"/user",type:"normal"},{label:"设置",path:"/user?tab=settings",type:"normal"},{label:"退出登录",type:"danger"}],variant:"default"}},J={class:"user-panel"},Q=["src","alt"],X={class:"user-name"},Y=["onClick"],Z="https://picsum.photos/seed/user123/40/40.jpg",ee={__name:"UserPanel",props:{userInfo:{type:Object,default:()=>({})},userRole:{type:String,default:"student"},quickActions:{type:Array,default:()=>[]}},setup(e){const p=O(),s=$(),l=M(!1),v=()=>{l.value=!l.value},b=()=>{l.value=!1},C=t=>{if(b(),t.type==="danger"&&!t.path){r();return}t.path&&p.push(t.path)},E=()=>{b(),p.push("/user")},S=()=>{b(),p.push("/user?tab=settings")},r=()=>{b(),s.logout(),localStorage.removeItem("token"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),V.success("已退出登录"),p.push("/login")},i={mounted(t,_){t.clickOutsideEvent=h=>{t===h.target||t.contains(h.target)||_.value()},document.addEventListener("click",t.clickOutsideEvent)},unmounted(t){document.removeEventListener("click",t.clickOutsideEvent)}};return(t,_)=>P((a(),d("div",J,[o("img",{src:e.userInfo.avatar||Z,alt:e.userInfo.username,class:"user-avatar",onClick:v},null,8,Q),o("div",{class:R(["user-dropdown",{active:l.value}])},[o("span",X,y(e.userInfo.username||"用户"),1),e.quickActions&&e.quickActions.length>0?(a(!0),d(f,{key:0},N(e.quickActions,(h,q)=>(a(),d("button",{key:q,class:R(["dropdown-link",{danger:h.type==="danger"}]),onClick:I(D=>C(h),["stop"])},y(h.label),11,Y))),128)):(a(),d(f,{key:1},[o("button",{class:"dropdown-link",onClick:I(E,["stop"])},"个人中心"),o("button",{class:"dropdown-link",onClick:I(S,["stop"])},"设置"),o("button",{class:"dropdown-link danger",onClick:I(r,["stop"])},"退出登录")],64))],2)])),[[i,b]])}},te=T(ee,[["__scopeId","data-v-ca84b87e"]]),ae={class:"header-inner"},se={class:"brand"},ne={class:"main-nav"},oe={class:"nav-link dropdown-trigger"},le={key:0,class:"badge"},re={key:0,class:"auth-area"},ie={__name:"index",props:{navItems:{type:Array,default:()=>[]},quickActions:{type:Array,default:()=>[]},variant:{type:String,default:"default",validator:e=>["default","transparent"].includes(e)},unreadCount:{type:Object,default:()=>({})},showAuthArea:{type:Boolean,default:!0}},setup(e){const p=O(),s=G(),l=$();F(()=>{l.initAuth()});const v=j(()=>l.isLoggedIn),b=j(()=>l.userInfo||{}),C=j(()=>l.userRole||""),E=r=>r.matchRoute&&typeof r.matchRoute=="function"?r.matchRoute(s):s.path===r.path,S=(r,i)=>{r.requireLogin&&!v.value&&(i.preventDefault(),V.warning(`请先登录后再使用${r.label}功能`),p.push(`/login?redirect=${encodeURIComponent(r.path)}`))};return(r,i)=>{const t=k("router-link"),_=k("el-icon"),h=k("el-dropdown-item"),q=k("el-dropdown-menu"),D=k("el-dropdown");return a(),d("header",{class:R(["main-header",{transparent:e.variant==="transparent"}])},[o("div",ae,[o("div",se,[c(t,{to:"/home",class:"brand-logo-link"},{default:n(()=>[...i[0]||(i[0]=[o("img",{src:B,alt:"创客平台",style:{height:"45px",width:"auto","max-width":"180px","object-fit":"contain","border-radius":"8px"}},null,-1)])]),_:1}),c(t,{to:"/home",class:"brand-name-link"},{default:n(()=>[...i[1]||(i[1]=[o("span",{class:"brand-name"},"创客平台",-1)])]),_:1})]),o("nav",ne,[(a(!0),d(f,null,N(e.navItems,(u,K)=>(a(),d(f,{key:K},[u.type==="dropdown"?(a(),A(D,{key:0,trigger:"hover",class:"nav-dropdown"},{dropdown:n(()=>[c(q,null,{default:n(()=>[(a(!0),d(f,null,N(u.children,(w,U)=>(a(),A(h,{key:U},{default:n(()=>[c(t,{to:w.path,class:"dropdown-item-link"},{default:n(()=>[g(y(w.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:2},1024)]),default:n(()=>[o("span",oe,[g(y(u.label)+" ",1),c(_,{class:"dropdown-icon"},{default:n(()=>[c(H(W))]),_:1})])]),_:2},1024)):(a(),A(z(u.requireLogin&&!v.value?"span":"router-link"),{key:1,to:u.path,class:R(["nav-link",{active:E(u),messages:u.badgeKey==="messages"}]),"active-class":"active",onClick:w=>S(u,w)},{default:n(()=>[o("span",null,y(u.label),1),u.badgeKey&&e.unreadCount[u.badgeKey]>0?(a(),d("span",le,y(e.unreadCount[u.badgeKey]),1)):L("",!0)]),_:2},1032,["to","class","onClick"]))],64))),128))]),e.showAuthArea?(a(),d("div",re,[v.value?(a(),A(te,{key:1,"user-info":b.value,"user-role":C.value,"quick-actions":e.quickActions},null,8,["user-info","user-role","quick-actions"])):(a(),d(f,{key:0},[c(t,{to:"/login",class:"auth-btn"},{default:n(()=>[...i[2]||(i[2]=[g("登录",-1)])]),_:1}),c(t,{to:"/register",class:"auth-btn solid"},{default:n(()=>[...i[3]||(i[3]=[g("注册",-1)])]),_:1})],64))])):L("",!0)])],2)}}},be=T(ie,[["__scopeId","data-v-43b4036e"]]),ue={class:"page-footer"},ce={class:"footer-links"},de={__name:"index",setup(e){return(p,s)=>{const l=k("router-link");return a(),d("footer",ue,[o("div",ce,[c(l,{to:"/about",class:"footer-link"},{default:n(()=>[...s[0]||(s[0]=[g("关于我们",-1)])]),_:1}),c(l,{to:"/contact",class:"footer-link"},{default:n(()=>[...s[1]||(s[1]=[g("联系我们",-1)])]),_:1}),c(l,{to:"/help",class:"footer-link"},{default:n(()=>[...s[2]||(s[2]=[g("帮助中心",-1)])]),_:1}),c(l,{to:"/privacy",class:"footer-link"},{default:n(()=>[...s[3]||(s[3]=[g("隐私政策",-1)])]),_:1})]),s[4]||(s[4]=o("p",{class:"copyright"}," Copyright © 2025 产教融合平台 All Rights Reserved ",-1))])}}},me=T(de,[["__scopeId","data-v-447f20b2"]]);export{be as A,me as a,ge as g};
