import{_ as Ie,g as we,r as g,c as se,y as Me,j as Ve,a as d,b as t,h as s,i as l,k as v,e as le,F as A,d as E,u as xe,o as i,l as r,p,A as Ne,B as ae,C as Ae,D as Ee,G as Ce,n as z,s as y,H as ne,f as m,t as u,I as C,q as Re,J as je,K as Pe,L as ie,M as F,N as Te,E as oe}from"./index-BAqyxCOb.js";const Oe={class:"project-details-container"},Se={class:"main-content"},Le={class:"breadcrumb-section mb20"},Be={class:"content-row"},$e={class:"main-info-section"},Ue={class:"project-header"},ze={class:"project-header-left"},Fe={class:"publisher-info"},Ye={class:"rating"},qe={class:"action-section"},Ge={class:"action-buttons"},He={class:"stats-section"},Ke={class:"stats"},We={class:"stat-item"},Xe={class:"stat-item"},Je={class:"stat-item"},Qe={class:"project-steps-container mt15"},Ze={class:"ant-steps ant-steps-horizontal project-steps ant-steps-label-vertical"},et={class:"ant-steps-item-container"},tt={class:"ant-steps-item-icon"},st={class:"ant-steps-icon"},lt={key:1,class:"circle-icon"},at={class:"ant-steps-item-content"},nt={class:"ant-steps-item-title"},it={key:0,class:"ant-steps-item-description"},ot={class:"color-grey-6 font-12"},dt={class:"tab-section"},ut={class:"detail-content"},rt={class:"section"},ct={class:"section"},pt={class:"section"},vt={class:"attachments"},mt={class:"attachment-item"},ft={class:"attachment-item"},_t={class:"section"},gt={class:"milestone-tracking-content"},yt={key:0,class:"permission-notice"},bt={class:"milestone-timeline"},Dt={key:0,class:"timeline-connector"},kt={class:"milestone-marker"},ht={key:1,class:"marker-icon in-progress"},It={key:2,class:"marker-icon pending"},wt={class:"milestone-card"},Mt={class:"milestone-header"},Vt={class:"milestone-title-row"},xt={class:"milestone-title"},Nt={class:"milestone-header-actions"},At={class:"milestone-meta"},Et={class:"milestone-date"},Ct={key:0,class:"milestone-actual-date"},Rt={key:1,class:"milestone-delay"},jt={class:"milestone-description-short"},Pt={class:"milestone-summary"},Tt={key:0,class:"summary-item"},Ot={key:1,class:"summary-item"},St={key:0,class:"milestone-actions"},Lt={class:"progress-input-group"},Bt={class:"progress-text"},$t={class:"dialog-footer"},Ut={key:0,class:"milestone-detail-content"},zt={class:"detail-section"},Ft={class:"section-header"},Yt={class:"section-content"},qt={class:"description-full"},Gt={class:"meta-info"},Ht={class:"meta-row"},Kt={class:"meta-row"},Wt={key:0,class:"meta-row"},Xt={key:1,class:"meta-row"},Jt={key:0,class:"detail-section"},Qt={class:"section-header"},Zt={class:"count-badge"},es={class:"section-content"},ts={class:"deliverables-list-full"},ss={key:1,class:"detail-section sensitive-section"},ls={key:0,class:"section-content"},as={class:"progress-detail-full"},ns={class:"progress-note"},is={key:1,class:"section-content"},os={class:"section-header"},ds={class:"count-badge"},us={class:"communications-list-full"},rs={class:"comm-header"},cs={class:"comm-author"},ps={class:"comm-time"},vs={class:"comm-content"},ms={key:2,class:"section-content"},fs={class:"internal-notes-full"},_s={key:3,class:"section-content"},gs={class:"section-header"},ys={class:"count-badge"},bs={class:"attachments-list-full"},Ds={key:2,class:"detail-section"},ks={class:"dialog-footer"},hs={__name:"index",setup(Is){const R=Ve(),S=xe(),L=we(),Y=g("details"),D=g((()=>{const o=R.params.id;return{rating:4.5,publisherId:"enterprise-001",bidderIds:{1:["test_student_001","student-001","student-002"],2:["student-001","student-002"],3:["student-002","student-003"]}[o]||["student-001","student-002"]}})()),h=se(()=>({id:L.userInfo?.id||"",role:L.userRole||"visitor",isLoggedIn:L.isAuthenticated})),I=se(()=>{if(!h.value.isLoggedIn)return!1;const o=h.value.id,e=h.value.role;return!!(e==="enterprise"&&o===D.value.publisherId||e==="student"&&D.value.bidderIds&&D.value.bidderIds.includes(o))}),k=g([{id:"milestone-bidding",code:"BIDDING",title:"揭榜征集",description:"学生查看并提交揭榜申请，企业/学校审核通过后确定承接方",status:"completed",plannedDate:"2025-11-05",actualDate:"2025-11-04",delayDays:-1,deliverables:["揭榜申请表","审核结果通知"],progressDetail:{percentage:100,status:"success",note:"所有申请已审核完毕，承接方已确定"},communications:[{author:"陈老师（教务中心）",time:"2025-11-04 16:30",content:"本次揭榜共收到12份申请，质量整体较高"}],internalNotes:"本期导师资源充足，匹配顺利",sensitiveAttachments:[]},{id:"milestone-proposal",code:"PROPOSAL",title:"方案提交",description:"提交项目实施方案，包括技术方案、实施计划、团队分工等，经多角色评审后确定最终方案",status:"completed",plannedDate:"2025-11-20",actualDate:"2025-11-19",delayDays:-1,deliverables:["实施方案包","评审意见清单"],progressDetail:{percentage:100,status:"success",note:"方案已通过评审，获得专家组一致认可"},communications:[{author:"王岚（评审专家）",time:"2025-11-19 16:00",content:"方案整体架构合理，技术选型得当，建议在安全性方面加强"}],internalNotes:"评审过程顺利，团队表现优秀",sensitiveAttachments:[{name:"评审专家意见汇总.docx",size:"2.3MB"}]},{id:"milestone-midterm",code:"MIDTERM",title:"中期答辩",description:"项目中期检查，展示项目进展和阶段性成果，专家评审并提出优化建议",status:"in-progress",plannedDate:"2025-12-25",actualDate:null,delayDays:0,deliverables:["中期答辩PPT","阶段成果包","评审结论"],progressDetail:{percentage:78,status:"warning",note:"中期答辩已完成，等待评审结论归档"},communications:[{author:"孙赫（专家委员会）",time:"2025-12-22 15:30",content:"项目进度符合预期，建议加强性能优化"},{author:"林一舟（项目经理）",time:"2025-12-23 09:00",content:"已记录专家建议，将在后续开发中重点关注"}],internalNotes:"中期进展良好，团队执行力强",sensitiveAttachments:[{name:"中期评审打分表.xlsx",size:"1.2MB"}]},{id:"milestone-delivery",code:"DELIVERY",title:"成果提交",description:"提交最终项目成果，包括代码包、文档、测试报告等，完成学校初审",status:"pending",plannedDate:"2026-01-20",actualDate:null,delayDays:null,deliverables:["成果代码仓","技术文档","运维手册","测试报告"],progressDetail:{percentage:20,status:"exception",note:"成果整理中，注意截止日期临近"},communications:[],internalNotes:"需要加快进度，确保按时提交",sensitiveAttachments:[]},{id:"milestone-review",code:"REVIEW",title:"成果评审",description:"企业+专家联合评审，评分并生成评审结果，确定项目排名",status:"pending",plannedDate:"2026-02-05",actualDate:null,delayDays:null,deliverables:["评审打分表","评审报告"],progressDetail:{percentage:0,status:"info",note:"等待成果提交完成后启动评审"},communications:[],internalNotes:"",sensitiveAttachments:[]},{id:"milestone-announcement",code:"ANNOUNCEMENT",title:"结项公示",description:"结果公示、处理申诉、协议签订、费用结算",status:"pending",plannedDate:"2026-02-20",actualDate:null,delayDays:null,deliverables:["公示文件","项目协议","结算单据"],progressDetail:{percentage:0,status:"info",note:"等待评审完成后启动公示流程"},communications:[],internalNotes:"",sensitiveAttachments:[]},{id:"milestone-completion",code:"COMPLETION",title:"任务完成",description:"完成验收签署、费用结算、经验复盘，标志项目顺利结束",status:"pending",plannedDate:"2026-02-28",actualDate:null,delayDays:null,deliverables:["验收确认单","项目复盘报告"],progressDetail:{percentage:0,status:"info",note:"等待前序阶段完成"},communications:[],internalNotes:"",sensitiveAttachments:[]}]),q=o=>({completed:"success","in-progress":"warning",pending:"info",delayed:"danger"})[o]||"info",G=o=>({completed:"已完成","in-progress":"进行中",pending:"待开始",delayed:"已延迟"})[o]||"未知",H=o=>!(!I.value||h.value.role!=="student"||!D.value.bidderIds?.includes(h.value.id)||o.status!=="in-progress"&&o.status!=="pending"),j=o=>!["PROPOSAL","MIDTERM","DELIVERY"].includes(o.code),w=g(!1),M=g(null),B=g(null),$=g(!1),f=g({progress:0,description:"",deliverables:[],risks:""}),de={progress:[{required:!0,message:"请设置完成进度",trigger:"change"}],description:[{required:!0,message:"请填写完成说明",trigger:"blur"},{min:10,message:"完成说明至少10个字符",trigger:"blur"}]},K=o=>{M.value=o,f.value={progress:o.progressDetail?.percentage||0,description:o.progressDetail?.note||"",deliverables:[],risks:""},w.value=!0},ue=async()=>{if(B.value)try{await B.value.validate(),$.value=!0,await new Promise(e=>setTimeout(e,1e3));const o=k.value.findIndex(e=>e.id===M.value.id);o!==-1&&(k.value[o]={...k.value[o],status:f.value.progress===100?"completed":"in-progress",actualDate:f.value.progress===100?new Date().toISOString().split("T")[0]:null,progressDetail:{percentage:f.value.progress,status:f.value.progress===100?"success":null,note:f.value.description}}),oe.success("提交成功"),w.value=!1}catch(o){o!==!1&&oe.error("提交失败："+(o.message||"未知错误"))}finally{$.value=!1}},W=o=>{const e=R.params.id,x=o.code,U={PROPOSAL:`/project/${e}/milestone/proposal`,MIDTERM:`/project/${e}/milestone/midterm`,DELIVERY:`/project/${e}/milestone/delivery`}[x]||`/student/Submit?id=${e}&milestone=${x}`;S.push(U)},V=g(!1),n=g(null),re=o=>{n.value=o,V.value=!0},ce=()=>{n.value&&(V.value=!1,j(n.value)?K(n.value):W(n.value))},pe=(o,e=100)=>o?o.length<=e?o:o.substring(0,e)+"...":"",ve=g([{code:"BIDDING",title:"揭榜征集",status:"finish",timeInfo:"2025-11-04",startDate:"2025-11-01",endDate:"2025-11-05",deadline:"2025-11-05"},{code:"PROPOSAL",title:"方案提交",status:"finish",timeInfo:"2025-11-19",startDate:"2025-11-06",endDate:"2025-11-20",deadline:"2025-11-20"},{code:"MIDTERM",title:"中期答辩",status:"process",timeInfo:"剩余2天",startDate:"2025-11-21",endDate:"2025-12-25",deadline:"2025-12-25"},{code:"DELIVERY",title:"成果提交",status:"wait",timeInfo:"预计25天",startDate:null,endDate:null,deadline:"2026-01-20"},{code:"REVIEW",title:"成果评审",status:"wait",timeInfo:"预计15天",startDate:null,endDate:null,deadline:"2026-02-05"},{code:"ANNOUNCEMENT",title:"结项公示",status:"wait",timeInfo:"预计15天",startDate:null,endDate:null,deadline:"2026-02-20"},{code:"COMPLETION",title:"任务完成",status:"wait",timeInfo:"预计8天",startDate:null,endDate:null,deadline:"2026-02-28"}]),me=()=>{S.push("/projects")},fe=()=>{const o=R.params.id;o&&S.push(`/apply/${o}`)};return Me(()=>{R.params.id}),(o,e)=>{const x=v("router-link"),P=v("el-tag"),U=v("el-rate"),c=v("el-icon"),_=v("el-button"),X=v("el-collapse-item"),J=v("el-collapse"),T=v("el-link"),N=v("el-tab-pane"),Q=v("el-alert"),_e=v("el-empty"),ge=v("el-tabs"),ye=v("el-slider"),O=v("el-form-item"),Z=v("el-input"),be=v("el-upload"),De=v("el-form"),ee=v("el-dialog"),ke=v("el-divider"),he=v("el-progress");return i(),d("div",Oe,[t("div",Se,[t("div",Le,[s(x,{class:"color-deep-blue",to:"/home"},{default:l(()=>[...e[10]||(e[10]=[r("首页 > ",-1)])]),_:1}),s(x,{class:"color-deep-blue",to:"/projects"},{default:l(()=>[...e[11]||(e[11]=[r("项目大厅 > ",-1)])]),_:1}),e[12]||(e[12]=t("span",null,"项目详情",-1))]),t("div",Be,[t("div",$e,[t("div",Ue,[t("div",ze,[s(P,{class:"status-tag",type:"success"},{default:l(()=>[...e[13]||(e[13]=[r("揭榜中",-1)])]),_:1}),e[14]||(e[14]=t("h1",{class:"project-title"},"AI智能客服系统",-1))]),t("button",{class:"back-project-btn",onClick:me},"返回大厅")]),t("div",Fe,[e[16]||(e[16]=t("span",{class:"publisher"},"发布方：XX科技有限公司",-1)),t("div",Ye,[s(U,{modelValue:D.value.rating,"onUpdate:modelValue":e[0]||(e[0]=a=>D.value.rating=a),disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"]),e[15]||(e[15]=t("span",{class:"rating-text"},"4.5分 (28条评价)",-1))])]),e[17]||(e[17]=le('<div class="basic-info-card" data-v-e2ce10f2><div class="info-row" data-v-e2ce10f2><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>悬赏金额</span><span class="value price" data-v-e2ce10f2>￥15,000</span></div><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>项目领域</span><span class="value" data-v-e2ce10f2>人工智能</span></div></div><div class="info-row" data-v-e2ce10f2><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>揭榜模式</span><span class="value" data-v-e2ce10f2>团队悬赏</span></div><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>需求人数</span><span class="value" data-v-e2ce10f2>2-4人</span></div></div><div class="info-row" data-v-e2ce10f2><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>项目周期</span><span class="value" data-v-e2ce10f2>60天</span></div><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>发布时间</span><span class="value" data-v-e2ce10f2>2025-11-01</span></div></div><div class="info-row" data-v-e2ce10f2><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>截止时间</span><span class="value" data-v-e2ce10f2>2025-11-15</span></div><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>剩余时间</span><span class="value time-left" data-v-e2ce10f2>⏰ 7天</span></div></div><div class="info-row" data-v-e2ce10f2><div class="info-item" data-v-e2ce10f2><span class="label" data-v-e2ce10f2>已揭榜数</span><span class="value" data-v-e2ce10f2>12人</span></div></div></div>',1))]),t("div",qe,[t("div",Ge,[s(_,{type:"primary",class:"action-btn primary",onClick:fe},{default:l(()=>[s(c,null,{default:l(()=>[s(p(Ne))]),_:1}),e[18]||(e[18]=r(" 我要揭榜 ",-1))]),_:1}),s(_,{class:"action-btn secondary"},{default:l(()=>[s(c,null,{default:l(()=>[s(p(ae))]),_:1}),e[19]||(e[19]=r(" 关注项目 ",-1))]),_:1}),s(_,{class:"action-btn secondary"},{default:l(()=>[s(c,null,{default:l(()=>[s(p(Ae))]),_:1}),e[20]||(e[20]=r(" 咨询企业 ",-1))]),_:1})]),e[25]||(e[25]=le('<div class="progress-section" data-v-e2ce10f2><h4 data-v-e2ce10f2>项目进度</h4><div class="progress-bar" data-v-e2ce10f2><div class="progress-line" data-v-e2ce10f2><div class="progress-dot active" data-v-e2ce10f2></div><div class="progress-dot" data-v-e2ce10f2></div><div class="progress-dot" data-v-e2ce10f2></div><div class="progress-dot" data-v-e2ce10f2></div></div><div class="progress-labels" data-v-e2ce10f2><span class="active" data-v-e2ce10f2>发布</span><span data-v-e2ce10f2>揭榜</span><span data-v-e2ce10f2>评审</span><span data-v-e2ce10f2>完成</span></div></div></div>',1)),t("div",He,[e[24]||(e[24]=t("h4",null,"统计信息",-1)),t("div",Ke,[t("div",We,[s(c,null,{default:l(()=>[s(p(Ee))]),_:1}),e[21]||(e[21]=t("span",null,"浏览量: 1,234",-1))]),t("div",Xe,[s(c,null,{default:l(()=>[s(p(ae))]),_:1}),e[22]||(e[22]=t("span",null,"关注数: 45",-1))]),t("div",Je,[s(c,null,{default:l(()=>[s(p(Ce))]),_:1}),e[23]||(e[23]=t("span",null,"揭榜数: 12",-1))])])])])]),t("div",Qe,[t("div",Ze,[(i(!0),d(A,null,E(ve.value,(a,b)=>(i(),d("div",{key:a.code,class:z(["ant-steps-item","ant-steps-item-custom",{"ant-steps-item-finish":a.status==="finish","ant-steps-item-process":a.status==="process","ant-steps-item-wait":a.status==="wait"}])},[t("div",et,[e[26]||(e[26]=t("div",{class:"ant-steps-item-tail"},null,-1)),t("div",tt,[t("span",st,[a.status==="finish"?(i(),y(c,{key:0,class:"icon-check"},{default:l(()=>[s(p(ne))]),_:1})):(i(),d("div",lt))])]),t("div",at,[t("div",nt,u(a.title),1),a.timeInfo?(i(),d("div",it,[t("span",ot,u(a.timeInfo),1)])):m("",!0)])])],2))),128))])]),t("div",dt,[s(ge,{modelValue:Y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Y.value=a),class:"detail-tabs"},{default:l(()=>[s(N,{label:"项目详情",name:"details"},{default:l(()=>[t("div",ut,[e[41]||(e[41]=t("div",{class:"section"},[t("h3",null,"■ 项目背景"),t("p",null,"随着人工智能技术的发展，智能客服已成为企业提升服务质量的重要工具。当前市场上大多数智能客服系统存在响应速度慢、理解能力有限等问题，急需开发一款高性能的AI智能客服系统。")],-1)),e[42]||(e[42]=t("div",{class:"section"},[t("h3",null,"■ 项目目标"),t("ul",null,[t("li",null,"实现7×24小时智能在线客服"),t("li",null,"支持多轮对话和上下文理解"),t("li",null,"集成知识库管理系统"),t("li",null,"支持多种渠道接入（网页、微信、APP）"),t("li",null,"提供完善的统计分析功能")])],-1)),e[43]||(e[43]=t("div",{class:"section"},[t("h3",null,"■ 成果形式"),t("ul",null,[t("li",null,"完整的系统源代码"),t("li",null,"系统部署文档"),t("li",null,"用户使用手册"),t("li",null,"项目演示视频")])],-1)),t("div",rt,[e[28]||(e[28]=t("h3",null,"■ 功能要求",-1)),s(J,null,{default:l(()=>[s(X,{title:"点击展开查看详细功能要求"},{default:l(()=>[...e[27]||(e[27]=[t("div",null,"详细的功能需求包括：用户管理、对话管理、知识库管理、统计分析、系统设置等模块。",-1)])]),_:1})]),_:1})]),t("div",ct,[e[30]||(e[30]=t("h3",null,"■ 性能指标",-1)),s(J,null,{default:l(()=>[s(X,{title:"点击展开查看性能指标"},{default:l(()=>[...e[29]||(e[29]=[t("div",null,"响应时间小于200ms，并发用户数支持1000+，系统可用性99.9%。",-1)])]),_:1})]),_:1})]),e[44]||(e[44]=t("div",{class:"section"},[t("h3",null,"■ 评审方式"),t("p",null,"企业+专家联合评审")],-1)),e[45]||(e[45]=t("div",{class:"section"},[t("h3",null,"■ 知识产权"),t("p",null,"所有权归学生团队，企业拥有使用权")],-1)),t("div",pt,[e[35]||(e[35]=t("h3",null,"■ 附件资料",-1)),t("div",vt,[t("div",mt,[s(c,null,{default:l(()=>[s(p(C))]),_:1}),e[32]||(e[32]=t("span",null,"需求规格说明书.pdf (2.3MB)",-1)),s(T,{type:"primary"},{default:l(()=>[...e[31]||(e[31]=[r("[下载]",-1)])]),_:1})]),t("div",ft,[s(c,null,{default:l(()=>[s(p(C))]),_:1}),e[34]||(e[34]=t("span",null,"接口文档.docx (856KB)",-1)),s(T,{type:"primary"},{default:l(()=>[...e[33]||(e[33]=[r("[下载]",-1)])]),_:1})])])]),t("div",_t,[e[39]||(e[39]=t("h3",null,"■ 联系方式",-1)),e[40]||(e[40]=t("p",null,"联系人：李经理",-1)),t("p",null,[e[37]||(e[37]=r("联系电话：138****1234 ",-1)),s(T,{type:"primary"},{default:l(()=>[...e[36]||(e[36]=[r("[查看完整]",-1)])]),_:1}),e[38]||(e[38]=r(" (揭榜后可见)",-1))])])])]),_:1}),s(N,{label:"揭榜名单",name:"bidders"},{default:l(()=>[...e[46]||(e[46]=[t("div",{class:"tab-content"},"揭榜名单内容将在这里显示",-1)])]),_:1}),s(N,{label:"评论(23)",name:"comments"},{default:l(()=>[...e[47]||(e[47]=[t("div",{class:"tab-content"},"评论内容将在这里显示",-1)])]),_:1}),s(N,{label:"企业介绍",name:"company"},{default:l(()=>[...e[48]||(e[48]=[t("div",{class:"tab-content"},"企业介绍内容将在这里显示",-1)])]),_:1}),s(N,{label:"项目里程碑",name:"milestones"},{default:l(()=>[t("div",gt,[I.value?m("",!0):(i(),d("div",yt,[s(Q,{type:"info",closable:!1,"show-icon":""},{title:l(()=>[...e[49]||(e[49]=[t("span",null,"您当前以访客身份查看，部分敏感信息仅对项目参与者（发布方和承接方）可见",-1)])]),_:1})])),t("div",bt,[(i(!0),d(A,null,E(k.value,(a,b)=>(i(),d("div",{key:a.id,class:z(["milestone-item",{"milestone-completed":a.status==="completed","milestone-in-progress":a.status==="in-progress","milestone-pending":a.status==="pending","milestone-delayed":a.status==="delayed"}])},[b<k.value.length-1?(i(),d("div",Dt)):m("",!0),t("div",kt,[a.status==="completed"?(i(),y(c,{key:0,class:"marker-icon completed"},{default:l(()=>[s(p(ne))]),_:1})):a.status==="in-progress"?(i(),d("div",ht,[...e[50]||(e[50]=[t("div",{class:"pulse-dot"},null,-1)])])):(i(),d("div",It))]),t("div",wt,[t("div",Mt,[t("div",Vt,[t("h3",xt,u(a.title),1),t("div",Nt,[s(P,{type:q(a.status),size:"small"},{default:l(()=>[r(u(G(a.status)),1)]),_:2},1032,["type"]),s(_,{type:"primary",size:"small",text:"",onClick:te=>re(a)},{default:l(()=>[e[51]||(e[51]=r(" 查看详情 ",-1)),s(c,null,{default:l(()=>[s(p(Re))]),_:1})]),_:1},8,["onClick"])])]),t("div",At,[t("span",Et,[s(c,null,{default:l(()=>[s(p(je))]),_:1}),r(" "+u(a.plannedDate),1)]),a.actualDate?(i(),d("span",Ct," 实际完成："+u(a.actualDate),1)):m("",!0),a.delayDays&&a.delayDays>0?(i(),d("span",Rt," 延迟 "+u(a.delayDays)+" 天 ",1)):m("",!0)])]),t("div",jt,[t("p",null,u(pe(a.description,100)),1)]),t("div",Pt,[a.deliverables&&a.deliverables.length>0?(i(),d("div",Tt,[s(c,null,{default:l(()=>[s(p(C))]),_:1}),t("span",null,"交付物："+u(a.deliverables.length)+" 项",1)])):m("",!0),a.progressDetail?(i(),d("div",Ot,[s(c,null,{default:l(()=>[s(p(Pe))]),_:1}),t("span",null,"进度："+u(a.progressDetail.percentage)+"%",1)])):m("",!0)]),I.value&&H(a)?(i(),d("div",St,[j(a)?(i(),y(_,{key:0,type:"primary",size:"default",onClick:te=>K(a)},{default:l(()=>[s(c,null,{default:l(()=>[s(p(ie))]),_:1}),e[52]||(e[52]=r(" 更新进度 ",-1))]),_:1},8,["onClick"])):(i(),y(_,{key:1,type:"primary",size:"default",onClick:te=>W(a)},{default:l(()=>[s(c,null,{default:l(()=>[s(p(F))]),_:1}),r(" 提交"+u(a.title),1)]),_:2},1032,["onClick"]))])):m("",!0)])],2))),128))]),k.value.length===0?(i(),y(_e,{key:1,description:"暂无里程碑信息"})):m("",!0)])]),_:1})]),_:1},8,["modelValue"])])]),s(ee,{modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=a=>w.value=a),title:M.value?M.value.title+" - 更新进度":"里程碑操作",width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[t("div",$t,[s(_,{onClick:e[6]||(e[6]=a=>w.value=!1)},{default:l(()=>[...e[55]||(e[55]=[r("取消",-1)])]),_:1}),s(_,{type:"primary",onClick:ue,loading:$.value},{default:l(()=>[...e[56]||(e[56]=[r(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[M.value?(i(),y(De,{key:0,ref_key:"milestoneFormRef",ref:B,model:f.value,rules:de,"label-width":"120px"},{default:l(()=>[s(O,{label:"完成进度",prop:"progress"},{default:l(()=>[t("div",Lt,[s(ye,{modelValue:f.value.progress,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value.progress=a),min:0,max:100,"show-tooltip":!0},null,8,["modelValue"]),t("span",Bt,u(f.value.progress)+"%",1)])]),_:1}),s(O,{label:"完成说明",prop:"description"},{default:l(()=>[s(Z,{modelValue:f.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value.description=a),type:"textarea",rows:4,placeholder:"请描述本里程碑的完成情况、遇到的问题、解决方案等...","show-word-limit":"",maxlength:"1000"},null,8,["modelValue"])]),_:1}),s(O,{label:"交付物",prop:"deliverables"},{default:l(()=>[s(be,{"file-list":f.value.deliverables,"onUpdate:fileList":e[4]||(e[4]=a=>f.value.deliverables=a),action:"#",multiple:"","auto-upload":!1,limit:10},{tip:l(()=>[...e[54]||(e[54]=[t("div",{class:"el-upload__tip"}," 支持上传多个文件，单个文件不超过 100MB，最多10个文件 ",-1)])]),default:l(()=>[s(_,{type:"primary"},{default:l(()=>[s(c,null,{default:l(()=>[s(p(F))]),_:1}),e[53]||(e[53]=r(" 上传文件 ",-1))]),_:1})]),_:1},8,["file-list"])]),_:1}),s(O,{label:"问题与风险"},{default:l(()=>[s(Z,{modelValue:f.value.risks,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value.risks=a),type:"textarea",rows:3,placeholder:"如有问题或风险，请在此说明...","show-word-limit":"",maxlength:"500"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):m("",!0)]),_:1},8,["modelValue","title"]),s(ee,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=a=>V.value=a),title:n.value?n.value.title+" - 详情":"里程碑详情",width:"950px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[t("div",ks,[s(_,{onClick:e[8]||(e[8]=a=>V.value=!1)},{default:l(()=>[...e[70]||(e[70]=[r("关闭",-1)])]),_:1}),I.value&&H(n.value)?(i(),y(_,{key:0,type:"primary",onClick:ce},{default:l(()=>[j(n.value)?(i(),y(c,{key:0},{default:l(()=>[s(p(ie))]),_:1})):(i(),y(c,{key:1},{default:l(()=>[s(p(F))]),_:1})),r(" "+u(j(n.value)?"更新进度":"提交"+n.value.title),1)]),_:1})):m("",!0)])]),default:l(()=>[n.value?(i(),d("div",Ut,[t("div",zt,[t("div",Ft,[e[57]||(e[57]=t("h4",null,"基本信息",-1)),s(P,{type:q(n.value.status),size:"small"},{default:l(()=>[r(u(G(n.value.status)),1)]),_:1},8,["type"])]),t("div",Yt,[t("p",qt,u(n.value.description),1),t("div",Gt,[t("div",Ht,[e[58]||(e[58]=t("span",{class:"meta-label"},"阶段编码：",-1)),t("span",null,u(n.value.code),1)]),t("div",Kt,[e[59]||(e[59]=t("span",{class:"meta-label"},"计划日期：",-1)),t("span",null,u(n.value.plannedDate),1)]),n.value.actualDate?(i(),d("div",Wt,[e[60]||(e[60]=t("span",{class:"meta-label"},"实际完成：",-1)),t("span",null,u(n.value.actualDate),1)])):m("",!0),n.value.delayDays?(i(),d("div",Xt,[e[61]||(e[61]=t("span",{class:"meta-label"},"延迟天数：",-1)),t("span",{class:z({"text-danger":n.value.delayDays>0})},u(n.value.delayDays>0?`延迟 ${n.value.delayDays} 天`:`提前 ${Math.abs(n.value.delayDays)} 天`),3)])):m("",!0)])])]),n.value.deliverables&&n.value.deliverables.length>0?(i(),d("div",Jt,[t("div",Qt,[e[62]||(e[62]=t("h4",null,"交付物",-1)),t("span",Zt,u(n.value.deliverables.length)+" 项",1)]),t("div",es,[t("ul",ts,[(i(!0),d(A,null,E(n.value.deliverables,(a,b)=>(i(),d("li",{key:b},[s(c,null,{default:l(()=>[s(p(C))]),_:1}),t("span",null,u(a),1)]))),128))])])])):m("",!0),I.value?(i(),d("div",ss,[s(ke,null,{default:l(()=>[s(c,null,{default:l(()=>[s(p(Te))]),_:1}),e[63]||(e[63]=t("span",null,"项目参与者信息",-1))]),_:1}),n.value.progressDetail?(i(),d("div",ls,[e[64]||(e[64]=t("div",{class:"section-header"},[t("h4",null,"详细进度")],-1)),t("div",as,[s(he,{percentage:n.value.progressDetail.percentage,status:n.value.progressDetail.status,"stroke-width":10},null,8,["percentage","status"]),t("p",ns,u(n.value.progressDetail.note),1)])])):m("",!0),n.value.communications&&n.value.communications.length>0?(i(),d("div",is,[t("div",os,[e[65]||(e[65]=t("h4",null,"沟通记录",-1)),t("span",ds,u(n.value.communications.length)+" 条",1)]),t("div",us,[(i(!0),d(A,null,E(n.value.communications,(a,b)=>(i(),d("div",{key:b,class:"communication-item-full"},[t("div",rs,[t("span",cs,u(a.author),1),t("span",ps,u(a.time),1)]),t("p",vs,u(a.content),1)]))),128))])])):m("",!0),n.value.internalNotes?(i(),d("div",ms,[e[66]||(e[66]=t("div",{class:"section-header"},[t("h4",null,"内部备注")],-1)),t("div",fs,[t("p",null,u(n.value.internalNotes),1)])])):m("",!0),n.value.sensitiveAttachments&&n.value.sensitiveAttachments.length>0?(i(),d("div",_s,[t("div",gs,[e[67]||(e[67]=t("h4",null,"内部附件",-1)),t("span",ys,u(n.value.sensitiveAttachments.length)+" 个",1)]),t("div",bs,[(i(!0),d(A,null,E(n.value.sensitiveAttachments,(a,b)=>(i(),d("div",{key:b,class:"attachment-item-full"},[s(c,null,{default:l(()=>[s(p(C))]),_:1}),t("span",null,u(a.name)+" ("+u(a.size)+")",1),s(T,{type:"primary",underline:!1},{default:l(()=>[...e[68]||(e[68]=[r("[下载]",-1)])]),_:1})]))),128))])])):m("",!0)])):(i(),d("div",Ds,[s(Q,{type:"info",closable:!1,"show-icon":""},{title:l(()=>[...e[69]||(e[69]=[t("span",null,"此里程碑包含项目参与者专属信息，仅项目发布方和承接方可查看",-1)])]),_:1})]))])):m("",!0)]),_:1},8,["modelValue","title"])])}}},Vs=Ie(hs,[["__scopeId","data-v-e2ce10f2"]]);export{Vs as default};
