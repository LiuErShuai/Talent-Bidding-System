import{_ as $,g as I,r as m,a as N,h as t,i as a,T as S,u as T,j as V,k as l,o as C,b as s,l as f,E as _}from"./index-DttCejnL.js";const D="/assets/Login-CH_zDwPo.jpg",E={class:"auth-container"},j={class:"auth-card"},B={class:"auth-left"},z={class:"auth-right"},F={class:"below-link"},L={__name:"index",setup(P){const p=T();V();const h=I(),o=m(!1),g=m(null),r=m({testRole:""}),v={testRole:[{required:!0,message:"请选择角色",trigger:"change"}]},b=()=>{g.value.validate(async n=>{if(n){o.value=!0;try{const e=r.value.testRole;if(!e){_.warning("请选择角色"),o.value=!1;return}const i={username:`测试${{student:"学生",enterprise:"企业",teacher:"教师",admin:"管理员"}[e]}`,role:e,userId:`test_${e}_${Date.now()}`,avatar:`https://picsum.photos/seed/${e}/40/40.jpg`},c=`test_token_${e}_${Date.now()}`;_.success(`登录成功！欢迎，${i.username}`),localStorage.setItem("token",c),localStorage.setItem("userRole",e),localStorage.setItem("userData",JSON.stringify(i)),h.login(i,c);const d="/home";setTimeout(()=>{p.push(d),o.value=!1},300)}catch(e){console.error("登录错误:",e),_.error(e?.response?.data?.message||e?.message||"登录失败"),o.value=!1}}})},k=()=>{o.value=!0,setTimeout(()=>{p.push("/register")},150)},R=n=>{console.error("图片加载失败:",n.target.src),n.target.style.display="none"};return(n,e)=>{const u=l("el-option"),i=l("el-select"),c=l("el-form-item"),d=l("el-button"),y=l("el-link"),w=l("el-form");return C(),N("div",E,[t(S,{name:"slide-fade",appear:""},{default:a(()=>[s("div",j,[s("div",B,[s("img",{class:"auth-illustration",src:D,alt:"登录插画",onError:R},null,32)]),s("div",z,[e[4]||(e[4]=s("div",{class:"auth-header"},[s("h2",{class:"auth-title"},"揭榜挂帅系统"),s("p",{class:"auth-subtitle"},"一款让对接更高效的协同平台")],-1)),t(w,{ref_key:"loginForm",ref:g,model:r.value,rules:v,"label-width":"0","label-position":"top",size:"large",class:"auth-form"},{default:a(()=>[t(c,{label:"选择角色（测试用）",prop:"testRole"},{default:a(()=>[t(i,{modelValue:r.value.testRole,"onUpdate:modelValue":e[0]||(e[0]=x=>r.value.testRole=x),placeholder:"请选择角色",style:{width:"100%"},clearable:""},{default:a(()=>[t(u,{label:"学生",value:"student"}),t(u,{label:"企业",value:"enterprise"}),t(u,{label:"教师",value:"teacher"}),t(u,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),t(d,{type:"primary",loading:o.value,class:"auth-submit",onClick:b,disabled:!r.value.testRole},{default:a(()=>[...e[1]||(e[1]=[f(" 登录 ",-1)])]),_:1},8,["loading","disabled"]),s("div",F,[e[3]||(e[3]=s("span",{class:"muted"},"还没有账号？",-1)),t(y,{type:"primary",onClick:k,title:"去注册","aria-label":"去注册"},{default:a(()=>[...e[2]||(e[2]=[f("去注册",-1)])]),_:1})])]),_:1},8,["model"])])])]),_:1})])}}},q=$(L,[["__scopeId","data-v-9dd79b55"]]);export{q as default};
