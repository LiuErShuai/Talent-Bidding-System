import{_ as x,g as I,r as m,a as D,h as t,i as l,T as S,u as T,j as V,k as r,o as C,b as s,l as f,E as p}from"./index-DnkofVqd.js";const E="/assets/Login-CH_zDwPo.jpg",N={class:"auth-container"},j={class:"auth-card"},B={class:"auth-left"},U={class:"auth-right"},z={class:"below-link"},F={__name:"index",setup(L){const g=T();V();const v=I(),a=m(!1),h=m(null),n=m({testRole:""}),b={testRole:[{required:!0,message:"请选择角色",trigger:"change"}]},k=()=>{h.value.validate(async i=>{if(i){a.value=!0;try{const e=n.value.testRole;if(!e){p.warning("请选择角色"),a.value=!1;return}const o={student:"学生",enterprise:"企业",teacher:"教师",admin:"管理员"},c={student:"test_student_001",enterprise:"enterprise-001",teacher:"test_teacher_001",admin:"test_admin_001"},u={username:`测试${o[e]}`,role:e,id:c[e]||`test_${e}_${Date.now()}`,userId:c[e]||`test_${e}_${Date.now()}`,avatar:`https://picsum.photos/seed/${e}/40/40.jpg`},d=`test_token_${e}_${Date.now()}`;p.success(`登录成功！欢迎，${u.username}`),localStorage.setItem("token",d),localStorage.setItem("userRole",e),localStorage.setItem("userData",JSON.stringify(u)),v.login(u,d);const _="/home";setTimeout(()=>{g.push(_),a.value=!1},300)}catch(e){console.error("登录错误:",e),p.error(e?.response?.data?.message||e?.message||"登录失败"),a.value=!1}}})},R=()=>{a.value=!0,setTimeout(()=>{g.push("/register")},150)},y=i=>{console.error("图片加载失败:",i.target.src),i.target.style.display="none"};return(i,e)=>{const o=r("el-option"),c=r("el-select"),u=r("el-form-item"),d=r("el-button"),_=r("el-link"),w=r("el-form");return C(),D("div",N,[t(S,{name:"slide-fade",appear:""},{default:l(()=>[s("div",j,[s("div",B,[s("img",{class:"auth-illustration",src:E,alt:"登录插画",onError:y},null,32)]),s("div",U,[e[4]||(e[4]=s("div",{class:"auth-header"},[s("h2",{class:"auth-title"},"揭榜挂帅系统"),s("p",{class:"auth-subtitle"},"一款让对接更高效的协同平台")],-1)),t(w,{ref_key:"loginForm",ref:h,model:n.value,rules:b,"label-width":"0","label-position":"top",size:"large",class:"auth-form"},{default:l(()=>[t(u,{label:"选择角色（测试用）",prop:"testRole"},{default:l(()=>[t(c,{modelValue:n.value.testRole,"onUpdate:modelValue":e[0]||(e[0]=$=>n.value.testRole=$),placeholder:"请选择角色",style:{width:"100%"},clearable:""},{default:l(()=>[t(o,{label:"学生",value:"student"}),t(o,{label:"企业",value:"enterprise"}),t(o,{label:"教师",value:"teacher"}),t(o,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),t(d,{type:"primary",loading:a.value,class:"auth-submit",onClick:k,disabled:!n.value.testRole},{default:l(()=>[...e[1]||(e[1]=[f(" 登录 ",-1)])]),_:1},8,["loading","disabled"]),s("div",z,[e[3]||(e[3]=s("span",{class:"muted"},"还没有账号？",-1)),t(_,{type:"primary",onClick:R,title:"去注册","aria-label":"去注册"},{default:l(()=>[...e[2]||(e[2]=[f("去注册",-1)])]),_:1})])]),_:1},8,["model"])])])]),_:1})])}}},q=x(F,[["__scopeId","data-v-ef73a229"]]);export{q as default};
