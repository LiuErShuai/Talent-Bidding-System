import{_ as j,r as f,c as b,a5 as q,m as E,a as d,b as e,h as o,j as r,k as c,f as p,F as I,d as S,t as i,i as k,o as l,q as T,l as M,n as G}from"./index-BxkAOxBQ.js";const H={class:"message-center-page"},J={class:"message-center-card"},K={class:"type-tabs"},O={class:"tabs-row"},P={class:"tab-label"},Q={class:"header-tools"},W={class:"message-center-main"},X={class:"left-panel"},Y={class:"message-list",role:"list"},Z=["onClick"],ee={class:"message-meta"},te={class:"meta-top"},se={class:"from-row"},ae={class:"from-name"},le={key:0,class:"sub-title"},ne={class:"time"},oe={class:"meta-bottom"},ie={class:"summary"},ce={key:0,class:"list-empty"},de={class:"right-panel"},re={key:0,class:"detail"},ue={class:"detail-header"},me={class:"detail-title"},_e={class:"detail-h2"},ve={class:"detail-sub"},pe={class:"detail-from"},ye={class:"detail-time"},he={class:"detail-actions"},fe={class:"detail-body"},be={class:"detail-content"},ke={key:1,class:"detail-empty"},Te={__name:"index",setup(ge){const x=[{key:"my",label:"我的消息",icon:"Bell"},{key:"favorite",label:"收藏关注",icon:"Star"},{key:"comment",label:"评论",icon:"ChatLineRound"},{key:"reply",label:"回复",icon:"ChatDotRound"}],u=f("my"),y=f(""),m=f(""),v=f({my:[{id:"my-1",fromName:"系统通知",subTitle:"官方",avatar:"",title:"欢迎使用人才揭榜系统",summary:"你的账号已完成初始化，快去完善个人资料吧。",content:`欢迎使用人才揭榜系统！

你可以在「个人中心」完善头像、简介、技能标签等信息，以便更快匹配项目与机会。`,timeText:"今天 09:12",unread:1},{id:"my-2",fromName:"项目助手",subTitle:"",avatar:"",title:"项目进度提醒",summary:"你参与的项目「电商平台前端开发」有新的里程碑更新。",content:`项目「电商平台前端开发」里程碑已更新。

建议你及时查看项目进度页，确认自己的任务与截止时间。`,timeText:"昨天 20:41",unread:0}],favorite:[{id:"fav-1",fromName:"你关注的发布方",subTitle:"",avatar:"",title:"发布方更新了项目需求",summary:"你关注的发布方更新了项目「AI智能客服系统开发」需求说明。",content:`你关注的发布方更新了项目「AI智能客服系统开发」的需求说明。

可前往项目详情查看最新版本，评估是否需要调整方案。`,timeText:"12-17 16:08",unread:2}],comment:[{id:"cmt-1",fromName:"张同学",subTitle:"",avatar:"",title:"有人评论了你的动态",summary:"“方案写得很清晰，期待你的最终交付！”",content:`张同学评论了你的动态：

“方案写得很清晰，期待你的最终交付！”

你可以进入相关页面查看上下文并进行互动。`,timeText:"12-16 11:32",unread:1}],reply:[{id:"rpl-1",fromName:"李同学",subTitle:"",avatar:"",title:"有人回复了你的评论",summary:"“我这边也遇到同样的问题，已按你说的解决。”",content:`李同学回复了你的评论：

“我这边也遇到同样的问题，已按你说的解决。”

你可以继续回复，或将该讨论整理到项目说明中。`,timeText:"12-15 18:20",unread:0}]}),g=b(()=>v.value[u.value]||[]),N=b(()=>{const a={};for(const s of x){const _=v.value[s.key]||[];a[s.key]=_.reduce((h,C)=>h+(C.unread||0),0)}return a}),V=b(()=>{const a=y.value.trim().toLowerCase();return a?g.value.filter(s=>`${s.title} ${s.summary} ${s.content}`.toLowerCase().includes(a)):g.value}),n=b(()=>m.value&&g.value.find(a=>a.id===m.value)||null),L=a=>{m.value=a},$=()=>{y.value="",m.value=""},A=()=>{if(!n.value)return;const s=(v.value[u.value]||[]).find(_=>_.id===n.value.id);s&&(s.unread=0)},D=()=>{if(!n.value)return;const a=v.value[u.value]||[];v.value[u.value]=a.filter(s=>s.id!==n.value.id),m.value=""};return q(()=>u.value,()=>{m.value=""}),E(()=>{}),(a,s)=>{const _=c("el-icon"),h=c("el-badge"),C=c("el-tab-pane"),R=c("el-tabs"),U=c("Search"),z=c("el-input"),F=c("el-avatar"),w=c("el-empty"),B=c("el-button");return l(),d("div",H,[e("div",J,[e("div",K,[e("div",O,[o(R,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),onTabChange:$},{default:r(()=>[(l(),d(I,null,S(x,t=>o(C,{key:t.key,name:t.key},{label:r(()=>[e("span",P,[o(_,{class:"tab-icon"},{default:r(()=>[(l(),k(M(t.icon)))]),_:2},1024),T(" "+i(t.label)+" ",1),N.value[t.key]>0?(l(),k(h,{key:0,value:N.value[t.key],class:"tab-badge"},null,8,["value"])):p("",!0)])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"]),e("div",Q,[o(z,{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=t=>y.value=t),placeholder:"搜索消息内容",clearable:"",class:"search-input"},{prefix:r(()=>[o(_,null,{default:r(()=>[o(U)]),_:1})]),_:1},8,["modelValue"])])])]),e("section",W,[e("aside",X,[e("div",Y,[(l(!0),d(I,null,S(V.value,t=>(l(),d("div",{key:t.id,class:G(["message-item",{active:t.id===m.value}]),role:"listitem",onClick:Ce=>L(t.id)},[o(F,{size:44,src:t.avatar,class:"message-avatar"},{default:r(()=>[T(i(t.fromName?.slice(0,1)||"U"),1)]),_:2},1032,["src"]),e("div",ee,[e("div",te,[e("div",se,[e("span",ae,i(t.fromName),1),t.subTitle?(l(),d("span",le,i(t.subTitle),1)):p("",!0)]),e("span",ne,i(t.timeText),1)]),e("div",oe,[e("p",ie,i(t.summary),1),t.unread>0?(l(),k(h,{key:0,value:t.unread,class:"unread-badge"},null,8,["value"])):p("",!0)])])],10,Z))),128)),V.value.length?p("",!0):(l(),d("div",ce,[o(w,{description:"暂无消息"})]))])]),e("main",de,[n.value?(l(),d("div",re,[e("div",ue,[e("div",me,[e("h2",_e,i(n.value.title),1),e("div",ve,[e("span",pe,"来自："+i(n.value.fromName),1),s[2]||(s[2]=e("span",{class:"detail-sep"},"·",-1)),e("span",ye,i(n.value.timeText),1)])]),e("div",he,[n.value.unread>0?(l(),k(B,{key:0,type:"primary",onClick:A},{default:r(()=>[...s[3]||(s[3]=[T(" 标记已读 ",-1)])]),_:1})):p("",!0),o(B,{type:"danger",plain:"",onClick:D},{default:r(()=>[...s[4]||(s[4]=[T(" 删除 ",-1)])]),_:1})])]),e("div",fe,[e("p",be,i(n.value.content),1)])])):(l(),d("div",ke,[o(w,{description:"请选择左侧一条消息查看详情"})]))])])])])}}},Ne=j(Te,[["__scopeId","data-v-b1e1bd96"]]);export{Ne as default};
