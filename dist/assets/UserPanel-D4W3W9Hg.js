import{_ as I,u as S,h as E,r as _,c as D,w as O,a as c,o as u,b as o,t as p,F as h,d as q,x as l,n as k,H as x}from"./index-DwDg3_dR.js";const L={class:"user-panel"},R=["src","alt"],U={class:"user-name"},B=["onClick"],P="https://picsum.photos/seed/user123/40/40.jpg",j={__name:"UserPanel",props:{userInfo:{type:Object,default:()=>({})},userRole:{type:String,default:"student"},quickActions:{type:Array,default:()=>[]}},setup(t){const m=t,a=S(),g=E(),r=_(!1),v=()=>{r.value=!r.value},n=()=>{r.value=!1},f=D(()=>m.userRole==="enterprise"?"/enterprise/profile":"/user"),w=e=>{if(n(),e.type==="danger"&&!e.path){i();return}e.path&&a.push(e.path)},y=()=>{n(),a.push(f.value)},C=()=>{n(),a.push("/user?tab=settings")},i=()=>{n(),g.logout(),localStorage.removeItem("token"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),x.success("已退出登录"),a.push("/home")},b={mounted(e,d){e.clickOutsideEvent=s=>{e===s.target||e.contains(s.target)||d.value()},document.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.removeEventListener("click",e.clickOutsideEvent)}};return(e,d)=>O((u(),c("div",L,[o("img",{src:t.userInfo.avatar||P,alt:t.userInfo.username,class:"user-avatar",onClick:v},null,8,R),o("div",{class:k(["user-dropdown",{active:r.value}])},[o("span",U,p(t.userInfo.username||"用户"),1),t.quickActions&&t.quickActions.length>0?(u(!0),c(h,{key:0},q(t.quickActions,(s,A)=>(u(),c("button",{key:A,class:k(["dropdown-link",{danger:s.type==="danger"}]),onClick:l(F=>w(s),["stop"])},p(s.label),11,B))),128)):(u(),c(h,{key:1},[o("button",{class:"dropdown-link",onClick:l(y,["stop"])},"个人中心"),o("button",{class:"dropdown-link",onClick:l(C,["stop"])},"设置"),o("button",{class:"dropdown-link danger",onClick:l(i,["stop"])},"退出登录")],64))],2)])),[[b,n]])}},z=I(j,[["__scopeId","data-v-c7e06eec"]]);export{z as U};
