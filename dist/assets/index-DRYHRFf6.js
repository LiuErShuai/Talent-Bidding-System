import{_ as Ms,g as Is,r as _,c as P,m as Ss,x as Ns,a as r,b as s,h as t,j as l,k as f,e as Ts,i as g,n as M,t as u,F as T,d as E,u as Vs,o,q as d,y as m,z as Le,A as Be,B as Cs,C as ze,D as He,E as Es,G as ne,f as p,H as be,I as O,J as xs,K as As,L as Fs,M as Ue,N as H,O as $e,P as Ps,Q as we,R as Os,S as je,U as Ls,V as Bs,W as h,X as zs,Y as Hs}from"./index-BxkAOxBQ.js";const Us={class:"project-details-container"},$s={class:"main-content"},js={class:"breadcrumb-section mb20"},Ys={class:"content-row"},Xs={class:"main-info-section"},Gs={class:"project-header"},qs={class:"project-header-left"},Ws={class:"publisher-info"},Js={class:"rating"},Ks={class:"action-section"},Qs={class:"action-buttons"},Zs={class:"progress-section"},et={class:"progress-bar"},st={class:"current-status-text"},tt={class:"stats-section"},lt={class:"stats"},it={class:"stat-item"},at={class:"stat-item"},nt={class:"stat-item"},ot={class:"project-steps-container mt15"},ut={class:"ant-steps ant-steps-horizontal project-steps ant-steps-label-vertical"},rt={class:"ant-steps-item-container"},dt={class:"ant-steps-item-icon"},vt={class:"ant-steps-icon"},mt={key:1,class:"circle-icon"},pt={class:"ant-steps-item-content"},ct={class:"ant-steps-item-title"},ft={key:0,class:"ant-steps-item-description"},yt={class:"color-grey-6 font-12"},_t={class:"stage-highlight detail-highlight"},gt={class:"title-with-status"},bt={class:"stage-title"},wt={class:"stage-desc"},kt={class:"stage-info-row"},Dt={class:"info-items-group"},ht={class:"info-item-compact"},Rt={class:"info-value"},Mt={class:"info-item-compact"},It={class:"info-value"},St={class:"info-item-compact"},Nt={class:"stage-actions-inline"},Tt={class:"tab-section"},Vt={class:"detail-content"},Ct={class:"section"},Et={class:"section"},xt={class:"section"},At={class:"attachments"},Ft={class:"attachment-item"},Pt={class:"attachment-item"},Ot={class:"section"},Lt={class:"milestone-tracking-content"},Bt={key:0,class:"permission-notice"},zt={class:"milestone-timeline"},Ht={key:0,class:"timeline-connector"},Ut={class:"milestone-marker"},$t={key:1,class:"marker-icon in-progress"},jt={key:2,class:"marker-icon pending"},Yt={class:"milestone-card"},Xt={class:"milestone-header"},Gt={class:"milestone-title-row"},qt={class:"milestone-title"},Wt={class:"milestone-header-actions"},Jt={class:"milestone-meta"},Kt={class:"milestone-date"},Qt={key:0,class:"milestone-actual-date"},Zt={key:1,class:"milestone-delay"},el={class:"milestone-description-short"},sl={class:"milestone-summary"},tl={key:0,class:"summary-item"},ll={key:1,class:"summary-item"},il={key:2,class:"summary-item"},al={key:0,class:"review-badge-hint"},nl={key:1,class:"submission-hint completed-hint"},ol={class:"progress-input-group"},ul={class:"progress-text"},rl={class:"dialog-footer"},dl={key:0,class:"milestone-detail-content"},vl={class:"section-header"},ml={class:"section-header-right"},pl={class:"section-content"},cl={key:0,class:"edit-field"},fl={class:"meta-info"},yl={class:"meta-row"},_l={key:0,class:"meta-row edit-field"},gl={key:1,class:"meta-row"},bl={key:2,class:"meta-row"},wl={key:3,class:"meta-row"},kl={key:2,class:"edit-actions"},Dl={class:"section-header"},hl={class:"section-header-right"},Rl={class:"count-badge"},Ml={class:"section-content"},Il={key:0,class:"deliverables-edit"},Sl={key:1,class:"deliverables-list-full"},Nl={key:2,class:"empty-deliverables"},Tl={key:0,class:"detail-section submission-summary-section"},Vl={class:"section-header"},Cl={class:"section-content"},El={key:0,class:"bidding-summary"},xl={key:0},Al={class:"submit-time"},Fl={key:1,class:"proposal-summary"},Pl={class:"submit-time"},Ol={key:2,class:"midterm-summary"},Ll={class:"submit-time"},Bl={key:3,class:"default-summary"},zl={class:"submit-time"},Hl={class:"submission-actions"},Ul={key:1,class:"detail-section publisher-actions-section"},$l={class:"section-header"},jl={class:"actions-buttons"},Yl={key:2,class:"detail-section review-history-section"},Xl={class:"section-header"},Gl={class:"count-badge"},ql={class:"section-content"},Wl={class:"review-history-list"},Jl={class:"review-header"},Kl={class:"reviewer-info"},Ql={class:"reviewer-details"},Zl={class:"reviewer-name"},ei={class:"review-time"},si={class:"review-result"},ti={key:0,class:"version-tag"},li={class:"review-content"},ii={class:"review-comment"},ai={key:0,class:"review-attachments"},ni={key:1,class:"review-extended"},oi={class:"extended-item"},ui={key:2,class:"review-extended"},ri={class:"extended-item"},di={key:3,class:"review-extended"},vi={class:"extended-item"},mi={key:3,class:"detail-section"},pi={class:"section-header"},ci={class:"count-badge"},fi={class:"section-content"},yi={class:"sub-milestones-list"},_i={class:"sub-milestone-header"},gi={class:"sub-milestone-title"},bi={key:0,class:"sub-milestone-meta"},wi={key:4,class:"detail-section sensitive-section"},ki={key:0,class:"section-content"},Di={class:"progress-detail-full"},hi={class:"progress-note"},Ri={key:1,class:"section-content"},Mi={class:"section-header"},Ii={class:"count-badge"},Si={class:"communications-list-full"},Ni={class:"comm-header"},Ti={class:"comm-author"},Vi={class:"comm-time"},Ci={class:"comm-content"},Ei={key:2,class:"section-content"},xi={class:"internal-notes-full"},Ai={key:3,class:"section-content"},Fi={class:"section-header"},Pi={class:"count-badge"},Oi={class:"attachments-list-full"},Li={key:5,class:"detail-section"},Bi={class:"dialog-footer"},zi={class:"review-dialog-content"},Hi={class:"review-left-panel"},Ui={class:"panel-header"},$i={class:"panel-content"},ji={key:0,class:"submission-preview"},Yi={key:0},Xi={class:"preview-item"},Gi={class:"preview-item"},qi={class:"preview-item"},Wi={class:"preview-text"},Ji={class:"preview-item"},Ki={key:1},Qi={class:"preview-item"},Zi={class:"preview-item"},ea={class:"preview-text"},sa={class:"preview-item"},ta={class:"preview-text"},la={class:"preview-item"},ia={class:"preview-text"},aa={class:"preview-item"},na={key:2},oa={class:"preview-item"},ua={class:"preview-item"},ra={class:"preview-text"},da={class:"preview-item"},va={class:"preview-text"},ma={key:0,class:"preview-item"},pa={class:"preview-text"},ca={class:"preview-item"},fa={class:"preview-actions"},ya={class:"review-right-panel"},_a={class:"panel-header"},ga={class:"panel-content"},ba={class:"dialog-footer"},wa={class:"dialog-footer"},ka={__name:"index",setup(Da){const U=Ns(),ee=Vs(),oe=Is(),ke=_("details"),$=_((()=>{const i=U.params.id;return{rating:4.5,publisherId:"enterprise-001",bidderIds:{1:["test_student_001","student-001","student-002"],2:["student-001","student-002"],3:["student-002","student-003"]}[i]||["student-001","student-002"]}})()),I=P(()=>({id:oe.userInfo?.id||"",role:oe.userRole||"visitor",isLoggedIn:oe.isAuthenticated})),A=P(()=>I.value.isLoggedIn?I.value.role==="enterprise"&&I.value.id===$.value.publisherId:!1),De=P(()=>I.value.isLoggedIn?I.value.role==="student"&&$.value.bidderIds?.includes(I.value.id):!1),se=P(()=>I.value.isLoggedIn?!!(A.value||De.value):!1),y=_([{id:"milestone-bidding",code:"BIDDING",title:"揭榜征集",description:"学生查看并提交揭榜申请，企业/学校审核通过后确定承接方",status:"completed",plannedDate:"2025-11-05",actualDate:"2025-11-04",delayDays:-1,deliverables:["揭榜申请表","审核结果通过通知"],progressDetail:{percentage:100,status:"success",note:"所有申请已审核完毕，承接方已确定"},riskLevel:"low",communications:[{author:"陈老师（教务中心）",time:"2025-11-04 16:30",content:"本次揭榜共收到12份申请，质量整体较高"}],internalNotes:"本期导师资源充足，匹配顺利",sensitiveAttachments:[],submissionSummary:{version:1,submitTime:"2025-11-03 14:20",submitterName:"李明 - 计算机科学团队",applicantName:"李明",teamName:"计算机科学团队",reason:"我们团队在AI领域有丰富经验，曾完成多个智能客服项目...",hasHistory:!1},reviewHistory:[{reviewId:"review-bidding-001",reviewerId:"enterprise-001",reviewerName:"XX科技有限公司",reviewTime:"2025-11-04 10:00",reviewResult:"通过",reviewComment:"团队经验丰富，技术栈匹配度高，通过揭榜申请",attachments:[]}]},{id:"milestone-proposal",code:"PROPOSAL",title:"方案提交",description:"提交项目实施方案，包括技术方案、实施计划、团队分工等，经多角色评审后确定最终方案",status:"completed",plannedDate:"2025-11-20",actualDate:"2025-11-19",delayDays:-1,deliverables:["实施方案包","评审意见清单"],progressDetail:{percentage:100,status:"success",note:"方案已通过评审，获得专家组一致认可"},riskLevel:"low",communications:[{author:"王岚（评审专家）",time:"2025-11-19 16:00",content:"方案整体架构合理，技术选型得当，建议在安全性方面加强"}],internalNotes:"评审过程顺利，团队表现优秀",sensitiveAttachments:[{name:"评审专家意见汇总.docx",size:"2.3MB"}],submissionSummary:{version:2,submitTime:"2025-11-19 09:30",submitterName:"李明 - 计算机科学团队",title:"AI智能客服系统实施方案V2.0",techStack:["Vue3","Python","TensorFlow","Redis","MySQL"],planOverview:"采用微服务架构，前后端分离，集成大模型API...",hasHistory:!0},reviewHistory:[{reviewId:"review-proposal-001",reviewerId:"enterprise-001",reviewerName:"XX科技有限公司",reviewTime:"2025-11-18 14:00",reviewResult:"要求修改",reviewComment:"技术方案整体可行，但需要补充数据库设计部分，实施计划时间安排过于紧张",attachments:[{name:"修改建议清单.pdf",url:"...",size:"1.2MB"}],submissionVersion:1},{reviewId:"review-proposal-002",reviewerId:"enterprise-001",reviewerName:"XX科技有限公司",reviewTime:"2025-11-19 15:30",reviewResult:"通过",reviewComment:"修改后的方案完善，技术架构合理，时间安排可行，批准通过",attachments:[],submissionVersion:2}]},{id:"milestone-agreement",code:"AGREEMENT",title:"协议签订",description:"双方签订项目合作协议，明确权利义务、交付标准、费用结算等条款",status:"completed",plannedDate:"2025-11-25",actualDate:"2025-11-22",delayDays:-3,deliverables:["项目合作协议","补充协议（如有）"],progressDetail:{percentage:100,status:"success",note:"协议已签订，双方确认无误"},riskLevel:"low",communications:[{author:"XX科技有限公司",time:"2025-11-22 14:30",content:"协议已审核通过，双方已签字确认"}],internalNotes:"协议签订顺利，条款清晰明确",sensitiveAttachments:[{name:"项目合作协议.pdf",size:"2.1MB"}],submissionSummary:{version:1,submitTime:"2025-11-22 10:00",submitterName:"XX科技有限公司",title:"项目合作协议",hasHistory:!1},reviewHistory:[{reviewId:"review-agreement-001",reviewerId:"enterprise-001",reviewerName:"XX科技有限公司",reviewTime:"2025-11-22 14:00",reviewResult:"通过",reviewComment:"协议条款完善，双方已签字确认",attachments:[]}]},{id:"milestone-midterm",code:"MIDTERM",title:"中期答辩",description:"项目中期检查，展示项目进展和阶段性成果，专家评审并提出优化建议",status:"in-progress",plannedDate:"2025-12-25",actualDate:null,delayDays:0,deliverables:["中期答辩PPT","阶段成果包","评审结论"],progressDetail:{percentage:78,status:"warning",note:"中期答辩已完成，等待评审结论归档"},riskLevel:"medium",communications:[{author:"孙赫（专家委员会）",time:"2025-12-22 15:30",content:"项目进度符合预期，建议加强性能优化"},{author:"林一舟（项目经理）",time:"2025-12-23 09:00",content:"已记录专家建议，将在后续开发中重点关注"}],internalNotes:"中期进展良好，团队执行力强",sensitiveAttachments:[{name:"中期评审打分表.xlsx",size:"1.2MB"}],submissionSummary:{version:1,submitTime:"2025-12-22 10:00",submitterName:"李明 - 计算机科学团队",materialType:"PPT + 演示视频",progressComparison:"已完成核心功能60%，进度符合预期",issueCount:3,hasHistory:!1},reviewHistory:[]},{id:"milestone-delivery",code:"DELIVERY",title:"成果提交",description:"提交最终项目成果，包括代码包、文档、测试报告等，完成学校初审",status:"pending",plannedDate:"2026-01-20",actualDate:null,delayDays:null,deliverables:["成果代码仓","技术文档","运维手册","测试报告"],progressDetail:{percentage:20,status:"exception",note:"成果整理中，注意截止日期临近"},riskLevel:"high",communications:[],internalNotes:"需要加快进度，确保按时提交",sensitiveAttachments:[],submissionSummary:null,reviewHistory:[]},{id:"milestone-review",code:"REVIEW",title:"成果评审",description:"企业+专家联合评审，评分并生成评审结果，确定项目排名",status:"pending",plannedDate:"2026-02-05",actualDate:null,delayDays:null,deliverables:["评审打分表","评审报告"],progressDetail:{percentage:0,status:"info",note:"等待成果提交完成后启动评审"},riskLevel:"high",communications:[],internalNotes:"",sensitiveAttachments:[],submissionSummary:null,reviewHistory:[]},{id:"milestone-project-announcement",code:"PROJECT_ANNOUNCEMENT",title:"项目结算",description:"项目费用结算、发票开具、款项支付等财务相关事宜",status:"pending",plannedDate:"2026-02-15",actualDate:null,delayDays:null,deliverables:["评审结果公示","排名清单","申诉处理记录"],progressDetail:{percentage:0,status:"info",note:"等待成果评审完成后启动公示流程"},riskLevel:"medium",communications:[],internalNotes:"",sensitiveAttachments:[],submissionSummary:null,reviewHistory:[]},{id:"milestone-announcement",code:"ANNOUNCEMENT",title:"结项公示",description:"结果公示、处理申诉、协议签订、费用结算",status:"pending",plannedDate:"2026-02-20",actualDate:null,delayDays:null,deliverables:["公示文件","项目协议","结算单据"],progressDetail:{percentage:0,status:"info",note:"等待评审完成后启动公示流程"},riskLevel:"medium",communications:[],internalNotes:"",sensitiveAttachments:[],submissionSummary:null,reviewHistory:[]},{id:"milestone-completion",code:"COMPLETION",title:"任务完成",description:"完成验收签署、费用结算、经验复盘，标志项目顺利结束",status:"pending",plannedDate:"2026-02-28",actualDate:null,delayDays:null,deliverables:["验收确认单","项目复盘报告"],progressDetail:{percentage:0,status:"info",note:"等待前序阶段完成"},riskLevel:"low",communications:[],internalNotes:"",sensitiveAttachments:[],submissionSummary:null,reviewHistory:[]}]),Ye=P(()=>{const i=B.value.find(R=>R.status==="process");if(i)return i.title;const e=B.value.find(R=>R.status==="wait");return e?e.title:B.value[B.value.length-1]?.title||"项目进行中"}),S=P(()=>y.value.length?y.value.find(i=>i.status==="in-progress")||y.value.find(i=>i.status==="pending")||y.value[y.value.length-1]:null),he=P(()=>{if(!S.value)return{text:"—",overdue:!1};const i=S.value.plannedDate||S.value.actualDate;return i?ms(i):{text:"—",overdue:!1}}),ue=i=>({completed:"success","in-progress":"warning",pending:"info",delayed:"danger",skipped:""})[i]||"info",re=i=>({completed:"已完成","in-progress":"进行中",pending:"待开始",delayed:"已延迟",skipped:"已跳过"})[i]||"未知",Xe=i=>!(!se.value||I.value.role!=="student"||!$.value.bidderIds?.includes(I.value.id)||i.status!=="in-progress"&&i.status!=="pending"),de=i=>!["PROPOSAL","MIDTERM","DELIVERY"].includes(i.code),Re=i=>{h.info("查看提交详情功能开发中...")},Me=i=>{h.info("查看提交历史功能开发中...")},Ge=i=>{const e=U.params.id;ee.push(`/project/${e}/milestone/midterm-review`)},te=i=>i.status==="in-progress"&&["BIDDING","PROPOSAL","AGREEMENT","MIDTERM","DELIVERY","REVIEW","PROJECT_ANNOUNCEMENT","ANNOUNCEMENT"].includes(i.code),qe=i=>({PROPOSAL:"审核方案",AGREEMENT:"审核协议",MIDTERM:"进入中期答辩",DELIVERY:"审核成果",REVIEW:"开始评审",PROJECT_ANNOUNCEMENT:"处理结算",PAYMENT:"确认支付金额",ANNOUNCEMENT:"上传公示内容"})[i.code]||"审核",We=i=>({通过:"success",拒绝:"danger",驳回:"danger",要求修改:"warning",不通过:"danger",需修订:"warning"})[i]||"info",j=_(!1),Y=_(null),ve=_(null),X=_(!1),w=_({progress:0,description:"",deliverables:[],risks:""}),Je={progress:[{required:!0,message:"请设置完成进度",trigger:"change"}],description:[{required:!0,message:"请填写完成说明",trigger:"blur"},{min:10,message:"完成说明至少10个字符",trigger:"blur"}]},Ke=i=>{Y.value=i,w.value={progress:i.progressDetail?.percentage||0,description:i.progressDetail?.note||"",deliverables:[],risks:""},j.value=!0},Qe=async()=>{if(ve.value)try{await ve.value.validate(),X.value=!0,await new Promise(e=>setTimeout(e,1e3));const i=y.value.findIndex(e=>e.id===Y.value.id);i!==-1&&(y.value[i]={...y.value[i],status:w.value.progress===100?"completed":"in-progress",actualDate:w.value.progress===100?new Date().toISOString().split("T")[0]:null,progressDetail:{percentage:w.value.progress,status:w.value.progress===100?"success":null,note:w.value.description}}),h.success("提交成功"),j.value=!1}catch(i){i!==!1&&h.error("提交失败："+(i.message||"未知错误"))}finally{X.value=!1}},Ze=i=>{const e=U.params.id,N=i.code,F={PROPOSAL:`/project/${e}/milestone/proposal`,MIDTERM:`/project/${e}/milestone/midterm`,DELIVERY:`/project/${e}/milestone/delivery`}[N]||`/student/Submit?id=${e}&milestone=${N}`;ee.push(F)},G=_(!1),n=_(null),V=_(!1),b=_({plannedDate:"",description:"",deliverables:[]}),L=i=>A.value&&i.status==="pending",x=i=>i.status==="completed",Ie=i=>{n.value=i,G.value=!0,V.value=!1,b.value={plannedDate:i.plannedDate||"",description:i.description||"",deliverables:i.deliverables&&i.deliverables.length>0?[...i.deliverables]:[""]},A.value&&te(i)&&zs(()=>{setTimeout(()=>{const e=document.querySelector(".publisher-actions-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},300)})},Se=()=>{n.value&&(V.value=!0)},es=()=>{V.value=!1,n.value&&(b.value={plannedDate:n.value.plannedDate||"",description:n.value.description||"",deliverables:n.value.deliverables&&n.value.deliverables.length>0?[...n.value.deliverables]:[""]})},ss=async()=>{if(!n.value)return;if(!b.value.plannedDate){h.warning("请选择计划完成日期");return}if(!b.value.description||b.value.description.trim()===""){h.warning("请输入里程碑描述");return}const i=b.value.deliverables.filter(e=>e&&e.trim()!=="");if(i.length===0){h.warning("请至少添加一个交付物");return}try{await new Promise(N=>setTimeout(N,500));const e=y.value.findIndex(N=>N.id===n.value.id);e!==-1&&(y.value[e]={...y.value[e],plannedDate:b.value.plannedDate,description:b.value.description,deliverables:i},n.value={...n.value,plannedDate:b.value.plannedDate,description:b.value.description,deliverables:i},b.value.deliverables=i),h.success("修改成功"),V.value=!1}catch(e){h.error("修改失败："+(e.message||"未知错误"))}},ts=()=>{b.value.deliverables.push("")},ls=i=>{b.value.deliverables.splice(i,1)},is=()=>{n.value&&(G.value=!1,de(n.value)?Ke(n.value):Ze(n.value))},Ne=(i,e=100)=>i?i.length<=e?i:i.substring(0,e)+"...":"",q=_(!1),Te=_(null),me=_(null),Ve=_(!1),k=_({reviewResult:"",reviewComment:"",attachments:[],notifyBidder:!0}),as={reviewResult:[{required:!0,message:"请选择审核结果",trigger:"change"}],reviewComment:[{required:!0,message:"请填写审核意见",trigger:"blur"},{min:10,message:"审核意见至少10个字符",trigger:"blur"}]},pe=(i,e)=>{Te.value=i,k.value={reviewResult:e==="通过"?"通过":"",reviewComment:"",attachments:[],notifyBidder:!0},q.value=!0},ns=async()=>{if(me.value)try{await me.value.validate(),Ve.value=!0,await new Promise(e=>setTimeout(e,1e3)),h.success("审核提交成功"),q.value=!1;const i=y.value.findIndex(e=>e.id===Te.value.id);if(i!==-1){const e={reviewId:"review-new-"+Date.now(),reviewerId:I.value.id,reviewerName:I.value.name||"发布方",reviewTime:new Date().toLocaleString("zh-CN"),reviewResult:k.value.reviewResult,reviewComment:k.value.reviewComment,attachments:[]};y.value[i].reviewHistory||(y.value[i].reviewHistory=[]),y.value[i].reviewHistory.unshift(e),k.value.reviewResult==="通过"?(y.value[i].status="completed",y.value[i].actualDate=new Date().toISOString().split("T")[0]):(k.value.reviewResult==="驳回"||k.value.reviewResult==="拒绝")&&(y.value[i].status="pending")}}catch(i){i!==!1&&h.error("审核失败："+(i.message||"未知错误"))}finally{Ve.value=!1}},W=_(!1),ce=_(null),fe=_(null),Ce=_(!1),J=_({skipReason:""}),os={skipReason:[{required:!0,message:"请填写跳过原因",trigger:"blur"},{min:10,message:"跳过原因至少10个字符",trigger:"blur"}]},us=i=>{ce.value=i,J.value={skipReason:""},W.value=!0},rs=async()=>{if(fe.value)try{await fe.value.validate(),await Hs.confirm(`确定跳过"${ce.value.title}"里程碑吗？跳过后不可恢复！`,"二次确认",{confirmButtonText:"确定跳过",cancelButtonText:"取消",type:"warning"}),Ce.value=!0,await new Promise(e=>setTimeout(e,1e3)),h.success("里程碑已跳过"),W.value=!1;const i=y.value.findIndex(e=>e.id===ce.value.id);i!==-1&&(y.value[i].status="skipped",y.value[i].actualDate=new Date().toISOString().split("T")[0],y.value[i].reviewHistory||(y.value[i].reviewHistory=[]),y.value[i].reviewHistory.unshift({reviewId:"skip-"+Date.now(),reviewerId:I.value.id,reviewerName:I.value.name||"发布方",reviewTime:new Date().toLocaleString("zh-CN"),reviewResult:"已跳过",reviewComment:J.value.skipReason,attachments:[]}))}catch(i){i!=="cancel"&&i!==!1&&h.error("跳过失败："+(i.message||"未知错误"))}finally{Ce.value=!1}},B=_([{code:"BIDDING",title:"揭榜征集",status:"finish",timeInfo:"2025-11-04",startDate:"2025-11-01",endDate:"2025-11-05",deadline:"2025-11-05"},{code:"PROPOSAL",title:"方案提交",status:"finish",timeInfo:"2025-11-19",startDate:"2025-11-06",endDate:"2025-11-20",deadline:"2025-11-20"},{code:"AGREEMENT",title:"协议签订",status:"finish",timeInfo:"2025-11-22",startDate:"2025-11-21",endDate:"2025-11-25",deadline:"2025-11-25"},{code:"MIDTERM",title:"中期答辩",status:"process",timeInfo:"剩余2天",startDate:"2025-11-26",endDate:"2025-12-25",deadline:"2025-12-25"},{code:"DELIVERY",title:"成果提交",status:"wait",timeInfo:"预计25天",startDate:null,endDate:null,deadline:"2026-01-20"},{code:"REVIEW",title:"成果评审",status:"wait",timeInfo:"预计15天",startDate:null,endDate:null,deadline:"2026-02-05"},{code:"PROJECT_ANNOUNCEMENT",title:"项目结算",status:"wait",timeInfo:"预计10天",startDate:null,endDate:null,deadline:"2026-02-15"},{code:"ANNOUNCEMENT",title:"结项公示",status:"wait",timeInfo:"预计15天",startDate:null,endDate:null,deadline:"2026-02-20"},{code:"COMPLETION",title:"任务完成",status:"wait",timeInfo:"预计8天",startDate:null,endDate:null,deadline:"2026-02-28"}]),ds=()=>{ee.push("/projects")},le=P(()=>{const i=B.value.find(e=>e.code==="BIDDING");return i?i.status==="finish":!1}),K=_(!1),vs=()=>{K.value=!K.value,K.value?h.success("已关注项目"):h.info("已取消关注")},Ee=()=>{if(le.value){h.warning("该项目已揭榜完成，无法继续揭榜");return}const i=U.params.id;i&&ee.push(`/apply/${i}`)};Ss(()=>{U.params.id});const ms=i=>{if(!i)return{text:"—",overdue:!1};const e=new Date(i);if(Number.isNaN(e.getTime()))return{text:"—",overdue:!1};const N=new Date,R=e.getTime()-N.getTime(),F=Math.ceil(R/(1e3*60*60*24));return F>=0?{text:`剩余 ${F} 天`,overdue:!1}:{text:`逾期 ${Math.abs(F)} 天`,overdue:!0}};return(i,e)=>{const N=f("router-link"),R=f("el-tag"),F=f("el-rate"),v=f("el-icon"),c=f("el-button"),ps=f("el-tooltip"),xe=f("el-card"),cs=f("el-col"),fs=f("el-row"),Ae=f("el-collapse-item"),Fe=f("el-collapse"),ie=f("el-link"),Q=f("el-tab-pane"),ye=f("el-alert"),ys=f("el-badge"),Pe=f("el-empty"),_s=f("el-tabs"),gs=f("el-slider"),C=f("el-form-item"),z=f("el-input"),Oe=f("el-upload"),_e=f("el-form"),ae=f("el-dialog"),bs=f("el-date-picker"),ws=f("el-divider"),ks=f("el-progress"),ge=f("el-radio"),Ds=f("el-radio-group"),hs=f("el-switch");return o(),r("div",Us,[s("div",$s,[s("div",js,[t(N,{class:"color-deep-blue",to:"/home"},{default:l(()=>[...e[31]||(e[31]=[d("首页 > ",-1)])]),_:1}),t(N,{class:"color-deep-blue",to:"/projects"},{default:l(()=>[...e[32]||(e[32]=[d("项目大厅 > ",-1)])]),_:1}),e[33]||(e[33]=s("span",null,"项目详情",-1))]),s("div",Ys,[s("div",Xs,[s("div",Gs,[s("div",qs,[t(R,{class:"status-tag",type:"success"},{default:l(()=>[...e[34]||(e[34]=[d("揭榜中",-1)])]),_:1}),e[35]||(e[35]=s("h1",{class:"project-title"},"AI智能客服系统",-1))]),s("button",{class:"back-project-btn",onClick:ds},"返回大厅")]),s("div",Ws,[e[37]||(e[37]=s("span",{class:"publisher"},"发布方：XX科技有限公司",-1)),s("div",Js,[t(F,{modelValue:$.value.rating,"onUpdate:modelValue":e[0]||(e[0]=a=>$.value.rating=a),disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"]),e[36]||(e[36]=s("span",{class:"rating-text"},"4.5分 (28条评价)",-1))])]),e[38]||(e[38]=Ts('<div class="basic-info-card" data-v-39e76207><div class="info-row" data-v-39e76207><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>悬赏金额</span><span class="value price" data-v-39e76207>￥15,000</span></div><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>项目领域</span><span class="value" data-v-39e76207>人工智能</span></div></div><div class="info-row" data-v-39e76207><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>揭榜模式</span><span class="value" data-v-39e76207>团队悬赏</span></div><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>需求人数</span><span class="value" data-v-39e76207>2-4人</span></div></div><div class="info-row" data-v-39e76207><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>项目周期</span><span class="value" data-v-39e76207>60天</span></div><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>发布时间</span><span class="value" data-v-39e76207>2025-11-01</span></div></div><div class="info-row" data-v-39e76207><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>截止时间</span><span class="value" data-v-39e76207>2025-11-15</span></div><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>剩余时间</span><span class="value time-left" data-v-39e76207>7天</span></div></div><div class="info-row" data-v-39e76207><div class="info-item" data-v-39e76207><span class="label" data-v-39e76207>已揭榜数</span><span class="value" data-v-39e76207>12人</span></div></div></div>',1))]),s("div",Ks,[s("div",Qs,[le.value?(o(),g(ps,{key:0,content:"该项目已揭榜完成",placement:"top"},{default:l(()=>[t(c,{disabled:le.value,class:M(["action-btn",le.value?"disabled":"primary"]),onClick:Ee},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Le))]),_:1}),e[39]||(e[39]=d(" 我要揭榜 ",-1))]),_:1},8,["disabled","class"])]),_:1})):(o(),g(c,{key:1,type:"primary",class:"action-btn primary",onClick:Ee},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Le))]),_:1}),e[40]||(e[40]=d(" 我要揭榜 ",-1))]),_:1})),t(c,{class:M(["action-btn","secondary",K.value?"favorited":""]),onClick:vs},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Be))]),_:1}),d(" "+u(K.value?"已关注":"关注项目"),1)]),_:1},8,["class"]),t(c,{class:"action-btn secondary"},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Cs))]),_:1}),e[41]||(e[41]=d(" 咨询企业 ",-1))]),_:1})]),s("div",Zs,[e[42]||(e[42]=s("h4",null,"项目进度",-1)),s("div",et,[s("div",st,[t(v,null,{default:l(()=>[t(m(ze))]),_:1}),s("span",null,u(Ye.value),1)])])]),s("div",tt,[e[46]||(e[46]=s("h4",null,"统计信息",-1)),s("div",lt,[s("div",it,[t(v,null,{default:l(()=>[t(m(He))]),_:1}),e[43]||(e[43]=s("span",null,"浏览量: 1,234",-1))]),s("div",at,[t(v,null,{default:l(()=>[t(m(Be))]),_:1}),e[44]||(e[44]=s("span",null,"关注数: 45",-1))]),s("div",nt,[t(v,null,{default:l(()=>[t(m(Es))]),_:1}),e[45]||(e[45]=s("span",null,"揭榜数: 12",-1))])])])])]),s("div",ot,[s("div",ut,[(o(!0),r(T,null,E(B.value,(a,D)=>(o(),r("div",{key:a.code,class:M(["ant-steps-item","ant-steps-item-custom",{"ant-steps-item-finish":a.status==="finish","ant-steps-item-process":a.status==="process","ant-steps-item-wait":a.status==="wait"}])},[s("div",rt,[e[47]||(e[47]=s("div",{class:"ant-steps-item-tail"},null,-1)),s("div",dt,[s("span",vt,[a.status==="finish"?(o(),g(v,{key:0,class:"icon-check"},{default:l(()=>[t(m(ne))]),_:1})):(o(),r("div",mt))])]),s("div",pt,[s("div",ct,u(a.title),1),a.timeInfo?(o(),r("div",ft,[s("span",yt,u(a.timeInfo),1)])):p("",!0)])])],2))),128))])]),s("section",_t,[t(fs,{gutter:20},{default:l(()=>[t(cs,{xs:24},{default:l(()=>[S.value?(o(),g(xe,{key:0,class:"highlight-card current"},{default:l(()=>[e[52]||(e[52]=s("div",{class:"milestone-tab-label"},"当前里程碑",-1)),s("div",gt,[s("h2",bt,u(S.value.title),1),t(R,{type:ue(S.value.status),class:"status-tag-inline"},{default:l(()=>[d(u(re(S.value.status)),1)]),_:1},8,["type"])]),s("p",wt,u(Ne(S.value.description,110)),1),s("div",kt,[s("div",Dt,[s("div",ht,[e[48]||(e[48]=s("span",{class:"info-label"},"交付物",-1)),s("span",Rt,u(S.value.deliverables?S.value.deliverables.length:0),1)]),s("div",Mt,[e[49]||(e[49]=s("span",{class:"info-label"},"计划完成时间",-1)),s("span",It,u(S.value.plannedDate||"待定"),1)]),s("div",St,[e[50]||(e[50]=s("span",{class:"info-label"},"剩余/逾期天数",-1)),s("span",{class:M(["info-value",{overdue:he.value.overdue}])},u(he.value.text),3)])]),s("div",Nt,[t(c,{type:"primary",size:"small",text:"",onClick:e[1]||(e[1]=a=>Ie(S.value))},{default:l(()=>[e[51]||(e[51]=d(" 查看详情 ",-1)),t(v,null,{default:l(()=>[t(m(be))]),_:1})]),_:1})])])]),_:1})):(o(),g(xe,{key:1,class:"highlight-card empty"},{default:l(()=>[...e[53]||(e[53]=[s("p",{class:"card-empty"},"暂无当前里程碑信息",-1)])]),_:1}))]),_:1})]),_:1})]),s("div",Tt,[t(_s,{modelValue:ke.value,"onUpdate:modelValue":e[2]||(e[2]=a=>ke.value=a),class:"detail-tabs"},{default:l(()=>[t(Q,{label:"项目详情",name:"details"},{default:l(()=>[s("div",Vt,[e[68]||(e[68]=s("div",{class:"section"},[s("h3",null,"■ 项目背景"),s("p",null,"随着人工智能技术的发展，智能客服已成为企业提升服务质量的重要工具。当前市场上大多数智能客服系统存在响应速度慢、理解能力有限等问题，急需开发一款高性能的AI智能客服系统。")],-1)),e[69]||(e[69]=s("div",{class:"section"},[s("h3",null,"■ 项目目标"),s("ul",null,[s("li",null,"实现7×24小时智能在线客服"),s("li",null,"支持多轮对话和上下文理解"),s("li",null,"集成知识库管理系统"),s("li",null,"支持多种渠道接入（网页、微信、APP）"),s("li",null,"提供完善的统计分析功能")])],-1)),e[70]||(e[70]=s("div",{class:"section"},[s("h3",null,"■ 成果形式"),s("ul",null,[s("li",null,"完整的系统源代码"),s("li",null,"系统部署文档"),s("li",null,"用户使用手册"),s("li",null,"项目演示视频")])],-1)),s("div",Ct,[e[55]||(e[55]=s("h3",null,"■ 功能要求",-1)),t(Fe,null,{default:l(()=>[t(Ae,{title:"点击展开查看详细功能要求"},{default:l(()=>[...e[54]||(e[54]=[s("div",null,"详细的功能需求包括：用户管理、对话管理、知识库管理、统计分析、系统设置等模块。",-1)])]),_:1})]),_:1})]),s("div",Et,[e[57]||(e[57]=s("h3",null,"■ 性能指标",-1)),t(Fe,null,{default:l(()=>[t(Ae,{title:"点击展开查看性能指标"},{default:l(()=>[...e[56]||(e[56]=[s("div",null,"响应时间小于200ms，并发用户数支持1000+，系统可用性99.9%。",-1)])]),_:1})]),_:1})]),e[71]||(e[71]=s("div",{class:"section"},[s("h3",null,"■ 评审方式"),s("p",null,"企业+专家联合评审")],-1)),e[72]||(e[72]=s("div",{class:"section"},[s("h3",null,"■ 知识产权"),s("p",null,"所有权归学生团队，企业拥有使用权")],-1)),s("div",xt,[e[62]||(e[62]=s("h3",null,"■ 附件资料",-1)),s("div",At,[s("div",Ft,[t(v,null,{default:l(()=>[t(m(O))]),_:1}),e[59]||(e[59]=s("span",null,"需求规格说明书.pdf (2.3MB)",-1)),t(ie,{type:"primary"},{default:l(()=>[...e[58]||(e[58]=[d("[下载]",-1)])]),_:1})]),s("div",Pt,[t(v,null,{default:l(()=>[t(m(O))]),_:1}),e[61]||(e[61]=s("span",null,"接口文档.docx (856KB)",-1)),t(ie,{type:"primary"},{default:l(()=>[...e[60]||(e[60]=[d("[下载]",-1)])]),_:1})])])]),s("div",Ot,[e[66]||(e[66]=s("h3",null,"■ 联系方式",-1)),e[67]||(e[67]=s("p",null,"联系人：李经理",-1)),s("p",null,[e[64]||(e[64]=d("联系电话：138****1234 ",-1)),t(ie,{type:"primary"},{default:l(()=>[...e[63]||(e[63]=[d("[查看完整]",-1)])]),_:1}),e[65]||(e[65]=d(" (揭榜后可见)",-1))])])])]),_:1}),t(Q,{label:"揭榜名单",name:"bidders"},{default:l(()=>[...e[73]||(e[73]=[s("div",{class:"tab-content"},"揭榜名单内容将在这里显示",-1)])]),_:1}),t(Q,{label:"评论(23)",name:"comments"},{default:l(()=>[...e[74]||(e[74]=[s("div",{class:"tab-content"},"评论内容将在这里显示",-1)])]),_:1}),t(Q,{label:"企业介绍",name:"company"},{default:l(()=>[...e[75]||(e[75]=[s("div",{class:"tab-content"},"企业介绍内容将在这里显示",-1)])]),_:1}),t(Q,{label:"项目里程碑",name:"milestones"},{default:l(()=>[s("div",Lt,[se.value?p("",!0):(o(),r("div",Bt,[t(ye,{type:"info",closable:!1,"show-icon":""},{title:l(()=>[...e[76]||(e[76]=[s("span",null,"您当前以访客身份查看，部分敏感信息仅对项目参与者（发布方和承接方）可见",-1)])]),_:1})])),s("div",zt,[(o(!0),r(T,null,E(y.value,(a,D)=>(o(),r("div",{key:a.id,class:M(["milestone-item",{"milestone-completed":a.status==="completed","milestone-in-progress":a.status==="in-progress","milestone-pending":a.status==="pending","milestone-delayed":a.status==="delayed"}])},[D<y.value.length-1?(o(),r("div",Ht)):p("",!0),s("div",Ut,[a.status==="completed"?(o(),g(v,{key:0,class:"marker-icon completed"},{default:l(()=>[t(m(ne))]),_:1})):a.status==="in-progress"?(o(),r("div",$t,[...e[77]||(e[77]=[s("div",{class:"pulse-dot"},null,-1)])])):(o(),r("div",jt))]),s("div",Yt,[s("div",Xt,[s("div",Gt,[s("h3",qt,u(a.title),1),s("div",Wt,[t(R,{type:ue(a.status),size:"small"},{default:l(()=>[d(u(re(a.status)),1)]),_:2},1032,["type"]),A.value&&te(a)?(o(),g(ys,{key:0,value:1,class:"review-badge"},{default:l(()=>[t(v,null,{default:l(()=>[t(m(xs))]),_:1})]),_:1})):p("",!0),t(c,{type:"primary",size:"small",text:"",onClick:Z=>Ie(a)},{default:l(()=>[e[78]||(e[78]=d(" 查看详情 ",-1)),t(v,null,{default:l(()=>[t(m(be))]),_:1})]),_:1},8,["onClick"])])]),s("div",Jt,[s("span",Kt,[t(v,null,{default:l(()=>[t(m(As))]),_:1}),d(" "+u(a.plannedDate),1)]),a.actualDate?(o(),r("span",Qt," 实际完成："+u(a.actualDate),1)):p("",!0),a.delayDays&&a.delayDays>0?(o(),r("span",Zt," 延迟 "+u(a.delayDays)+" 天 ",1)):p("",!0)])]),s("div",el,[s("p",null,u(Ne(a.description,100)),1)]),s("div",sl,[a.deliverables&&a.deliverables.length>0?(o(),r("div",tl,[t(v,null,{default:l(()=>[t(m(O))]),_:1}),s("span",null,"交付物："+u(a.deliverables.length)+" 项",1)])):p("",!0),a.progressDetail?(o(),r("div",ll,[t(v,null,{default:l(()=>[t(m(ze))]),_:1}),s("span",null,"进度："+u(a.progressDetail.percentage)+"%",1)])):p("",!0),a.processChecklist&&a.processChecklist.length>0?(o(),r("div",il,[t(v,null,{default:l(()=>[t(m(Fs))]),_:1}),s("span",null,u(a.processChecklist.length)+" 个过程任务",1)])):p("",!0)]),A.value&&te(a)?(o(),r("div",al,[...e[79]||(e[79]=[s("span",{class:"hint-text"},"待审核",-1)])])):p("",!0),A.value&&a.submissionSummary&&a.status==="completed"?(o(),r("div",nl,[t(v,null,{default:l(()=>[t(m(ne))]),_:1}),e[80]||(e[80]=s("span",null,"已完成",-1))])):p("",!0)])],2))),128))]),y.value.length===0?(o(),g(Pe,{key:1,description:"暂无里程碑信息"})):p("",!0)])]),_:1})]),_:1},8,["modelValue"])])]),t(ae,{modelValue:j.value,"onUpdate:modelValue":e[8]||(e[8]=a=>j.value=a),title:Y.value?Y.value.title+" - 更新进度":"里程碑操作",width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[s("div",rl,[t(c,{onClick:e[7]||(e[7]=a=>j.value=!1)},{default:l(()=>[...e[83]||(e[83]=[d("取消",-1)])]),_:1}),t(c,{type:"primary",onClick:Qe,loading:X.value},{default:l(()=>[...e[84]||(e[84]=[d(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[Y.value?(o(),g(_e,{key:0,ref_key:"milestoneFormRef",ref:ve,model:w.value,rules:Je,"label-width":"120px"},{default:l(()=>[t(C,{label:"完成进度",prop:"progress"},{default:l(()=>[s("div",ol,[t(gs,{modelValue:w.value.progress,"onUpdate:modelValue":e[3]||(e[3]=a=>w.value.progress=a),min:0,max:100,"show-tooltip":!0},null,8,["modelValue"]),s("span",ul,u(w.value.progress)+"%",1)])]),_:1}),t(C,{label:"完成说明",prop:"description"},{default:l(()=>[t(z,{modelValue:w.value.description,"onUpdate:modelValue":e[4]||(e[4]=a=>w.value.description=a),type:"textarea",rows:4,placeholder:"请描述本里程碑的完成情况、遇到的问题、解决方案等...","show-word-limit":"",maxlength:"1000"},null,8,["modelValue"])]),_:1}),t(C,{label:"交付物",prop:"deliverables"},{default:l(()=>[t(Oe,{"file-list":w.value.deliverables,"onUpdate:fileList":e[5]||(e[5]=a=>w.value.deliverables=a),action:"#",multiple:"","auto-upload":!1,limit:10},{tip:l(()=>[...e[82]||(e[82]=[s("div",{class:"el-upload__tip"}," 支持上传多个文件，单个文件不超过 100MB，最多10个文件 ",-1)])]),default:l(()=>[t(c,{type:"primary"},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Ue))]),_:1}),e[81]||(e[81]=d(" 上传文件 ",-1))]),_:1})]),_:1},8,["file-list"])]),_:1}),t(C,{label:"问题与风险"},{default:l(()=>[t(z,{modelValue:w.value.risks,"onUpdate:modelValue":e[6]||(e[6]=a=>w.value.risks=a),type:"textarea",rows:3,placeholder:"如有问题或风险，请在此说明...","show-word-limit":"",maxlength:"500"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):p("",!0)]),_:1},8,["modelValue","title"]),t(ae,{modelValue:G.value,"onUpdate:modelValue":e[19]||(e[19]=a=>G.value=a),title:n.value?n.value.title+" - 详情":"里程碑详情",width:"950px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[s("div",Bi,[t(c,{onClick:e[18]||(e[18]=a=>G.value=!1)},{default:l(()=>[...e[127]||(e[127]=[d("关闭",-1)])]),_:1}),De.value&&Xe(n.value)?(o(),g(c,{key:0,type:"primary",onClick:is},{default:l(()=>[de(n.value)?(o(),g(v,{key:0},{default:l(()=>[t(m(Bs))]),_:1})):(o(),g(v,{key:1},{default:l(()=>[t(m(Ue))]),_:1})),d(" "+u(de(n.value)?"更新进度":"提交"+n.value.title),1)]),_:1})):p("",!0)])]),default:l(()=>[n.value?(o(),r("div",dl,[s("div",{class:M(["detail-section",{"milestone-completed-section":x(n.value)}])},[s("div",vl,[e[86]||(e[86]=s("h4",null,"基本信息",-1)),s("div",ml,[t(R,{type:ue(n.value.status),size:"small"},{default:l(()=>[d(u(re(n.value.status)),1)]),_:1},8,["type"]),L(n.value)&&!V.value?(o(),g(c,{key:0,type:"primary",size:"small",text:"",onClick:Se},{default:l(()=>[t(v,null,{default:l(()=>[t(m(H))]),_:1}),e[85]||(e[85]=d(" 编辑 ",-1))]),_:1})):p("",!0)])]),s("div",pl,[V.value&&L(n.value)?(o(),r("div",cl,[t(z,{modelValue:b.value.description,"onUpdate:modelValue":e[9]||(e[9]=a=>b.value.description=a),type:"textarea",rows:3,placeholder:"请输入里程碑描述"},null,8,["modelValue"])])):(o(),r("p",{key:1,class:M(["description-full",{"completed-text":x(n.value)}])},u(n.value.description),3)),s("div",fl,[s("div",yl,[e[87]||(e[87]=s("span",{class:"meta-label"},"阶段编码：",-1)),s("span",{class:M({"completed-text":x(n.value)})},u(n.value.code),3)]),V.value&&L(n.value)?(o(),r("div",_l,[e[88]||(e[88]=s("span",{class:"meta-label"},"计划日期：",-1)),t(bs,{modelValue:b.value.plannedDate,"onUpdate:modelValue":e[10]||(e[10]=a=>b.value.plannedDate=a),type:"date",placeholder:"选择计划完成日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"200px"}},null,8,["modelValue"])])):(o(),r("div",gl,[e[89]||(e[89]=s("span",{class:"meta-label"},"计划日期：",-1)),s("span",{class:M({"completed-text":x(n.value)})},u(n.value.plannedDate),3)])),n.value.actualDate?(o(),r("div",bl,[e[90]||(e[90]=s("span",{class:"meta-label"},"实际完成：",-1)),s("span",{class:M({"completed-text":x(n.value)})},u(n.value.actualDate),3)])):p("",!0),n.value.delayDays?(o(),r("div",wl,[e[91]||(e[91]=s("span",{class:"meta-label"},"延迟天数：",-1)),s("span",{class:M({"text-danger":n.value.delayDays>0,"completed-text":x(n.value)})},u(n.value.delayDays>0?`延迟 ${n.value.delayDays} 天`:`提前 ${Math.abs(n.value.delayDays)} 天`),3)])):p("",!0)]),V.value&&L(n.value)?(o(),r("div",kl,[t(c,{size:"small",onClick:es},{default:l(()=>[...e[92]||(e[92]=[d("取消",-1)])]),_:1}),t(c,{type:"primary",size:"small",onClick:ss},{default:l(()=>[...e[93]||(e[93]=[d("保存",-1)])]),_:1})])):p("",!0)])],2),s("div",{class:M(["detail-section",{"milestone-completed-section":x(n.value)}])},[s("div",Dl,[e[95]||(e[95]=s("h4",null,"交付物",-1)),s("div",hl,[s("span",Rl,u(n.value.deliverables.length)+" 项",1),L(n.value)&&!V.value?(o(),g(c,{key:0,type:"primary",size:"small",text:"",onClick:Se},{default:l(()=>[t(v,null,{default:l(()=>[t(m(H))]),_:1}),e[94]||(e[94]=d(" 编辑 ",-1))]),_:1})):p("",!0)])]),s("div",Ml,[V.value&&L(n.value)?(o(),r("div",Il,[(o(!0),r(T,null,E(b.value.deliverables,(a,D)=>(o(),r("div",{key:D,class:"deliverable-edit-item"},[t(z,{modelValue:b.value.deliverables[D],"onUpdate:modelValue":Z=>b.value.deliverables[D]=Z,placeholder:"请输入交付物名称",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),t(c,{type:"danger",size:"small",text:"",onClick:Z=>ls(D)},{default:l(()=>[t(v,null,{default:l(()=>[t(m($e))]),_:1})]),_:1},8,["onClick"])]))),128)),t(c,{type:"primary",size:"small",text:"",onClick:ts,style:{"margin-top":"8px"}},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Ps))]),_:1}),e[96]||(e[96]=d(" 添加交付物 ",-1))]),_:1})])):n.value.deliverables&&n.value.deliverables.length>0?(o(),r("ul",Sl,[(o(!0),r(T,null,E(n.value.deliverables,(a,D)=>(o(),r("li",{key:D,class:M({"completed-text":x(n.value)})},[t(v,null,{default:l(()=>[t(m(O))]),_:1}),s("span",null,u(a),1)],2))),128))])):(o(),r("div",Nl,[s("span",{class:M({"completed-text":x(n.value)})}," 暂无交付物 ",2)]))])],2),A.value&&n.value.submissionSummary?(o(),r("div",Tl,[s("div",Vl,[t(v,null,{default:l(()=>[t(m(O))]),_:1}),e[97]||(e[97]=s("h4",null,"承接方提交摘要",-1)),n.value.submissionSummary.version?(o(),g(R,{key:0,size:"small",type:"info"},{default:l(()=>[d(" v"+u(n.value.submissionSummary.version),1)]),_:1})):p("",!0)]),s("div",Cl,[n.value.code==="BIDDING"?(o(),r("div",El,[s("p",null,[e[98]||(e[98]=s("strong",null,"申请者：",-1)),d(u(n.value.submissionSummary.applicantName),1)]),n.value.submissionSummary.teamName?(o(),r("p",xl,[e[99]||(e[99]=s("strong",null,"团队：",-1)),d(u(n.value.submissionSummary.teamName),1)])):p("",!0),s("p",null,[e[100]||(e[100]=s("strong",null,"申请理由：",-1)),d(u(n.value.submissionSummary.reason),1)]),s("p",Al,"提交时间："+u(n.value.submissionSummary.submitTime),1)])):n.value.code==="PROPOSAL"?(o(),r("div",Fl,[s("p",null,[e[101]||(e[101]=s("strong",null,"方案标题：",-1)),d(u(n.value.submissionSummary.title),1)]),s("p",null,[e[102]||(e[102]=s("strong",null,"技术栈：",-1)),(o(!0),r(T,null,E(n.value.submissionSummary.techStack,a=>(o(),g(R,{key:a,size:"small",style:{"margin-right":"4px","margin-top":"4px"}},{default:l(()=>[d(u(a),1)]),_:2},1024))),128))]),s("p",null,[e[103]||(e[103]=s("strong",null,"方案概述：",-1)),d(u(n.value.submissionSummary.planOverview),1)]),s("p",Pl,"提交时间："+u(n.value.submissionSummary.submitTime),1)])):n.value.code==="MIDTERM"?(o(),r("div",Ol,[s("p",null,[e[104]||(e[104]=s("strong",null,"材料类型：",-1)),d(u(n.value.submissionSummary.materialType),1)]),s("p",null,[e[105]||(e[105]=s("strong",null,"进度对比：",-1)),d(u(n.value.submissionSummary.progressComparison),1)]),s("p",null,[e[106]||(e[106]=s("strong",null,"问题数量：",-1)),d(u(n.value.submissionSummary.issueCount)+"个",1)]),s("p",Ll,"提交时间："+u(n.value.submissionSummary.submitTime),1)])):(o(),r("div",Bl,[s("p",null,[e[107]||(e[107]=s("strong",null,"提交者：",-1)),d(u(n.value.submissionSummary.submitterName),1)]),s("p",zl,"提交时间："+u(n.value.submissionSummary.submitTime),1)]))]),s("div",Hl,[t(c,{type:"text",size:"small",onClick:e[11]||(e[11]=a=>Re(n.value))},{default:l(()=>[e[108]||(e[108]=d(" 查看完整内容 ",-1)),t(v,null,{default:l(()=>[t(m(be))]),_:1})]),_:1}),n.value.submissionSummary.hasHistory?(o(),g(c,{key:0,type:"text",size:"small",onClick:e[12]||(e[12]=a=>Me(n.value))},{default:l(()=>[e[109]||(e[109]=d(" 查看历史版本 ",-1)),t(v,null,{default:l(()=>[t(m(we))]),_:1})]),_:1})):p("",!0)])])):p("",!0),A.value&&te(n.value)?(o(),r("div",Ul,[s("div",$l,[t(v,null,{default:l(()=>[t(m(H))]),_:1}),e[110]||(e[110]=s("h4",null,"发布方操作",-1))]),s("div",jl,[n.value.code==="BIDDING"?(o(),r(T,{key:0},[t(c,{type:"success",onClick:e[13]||(e[13]=a=>pe(n.value,"通过"))},{default:l(()=>[t(v,null,{default:l(()=>[t(m(ne))]),_:1}),e[111]||(e[111]=d(" 通过申请 ",-1))]),_:1}),t(c,{type:"danger",onClick:e[14]||(e[14]=a=>pe(n.value,"拒绝"))},{default:l(()=>[t(v,null,{default:l(()=>[t(m(Os))]),_:1}),e[112]||(e[112]=d(" 拒绝申请 ",-1))]),_:1})],64)):n.value.code==="MIDTERM"?(o(),r(T,{key:1},[t(c,{type:"primary",onClick:e[15]||(e[15]=a=>Ge(n.value))},{default:l(()=>[t(v,null,{default:l(()=>[t(m(H))]),_:1}),e[113]||(e[113]=d(" 进入中期答辩 ",-1))]),_:1}),t(c,{type:"warning",onClick:e[16]||(e[16]=a=>us(n.value))},{default:l(()=>[t(v,null,{default:l(()=>[t(m($e))]),_:1}),e[114]||(e[114]=d(" 跳过此里程碑 ",-1))]),_:1})],64)):(o(),g(c,{key:2,type:"primary",onClick:e[17]||(e[17]=a=>pe(n.value,"审核"))},{default:l(()=>[t(v,null,{default:l(()=>[t(m(H))]),_:1}),d(" "+u(qe(n.value)),1)]),_:1}))])])):p("",!0),se.value&&n.value.reviewHistory&&n.value.reviewHistory.length>0?(o(),r("div",Yl,[s("div",Xl,[t(v,null,{default:l(()=>[t(m(we))]),_:1}),e[115]||(e[115]=s("h4",null,"审核历史",-1)),s("span",Gl,u(n.value.reviewHistory.length)+" 条",1)]),s("div",ql,[s("div",Wl,[(o(!0),r(T,null,E(n.value.reviewHistory,(a,D)=>(o(),r("div",{key:a.reviewId,class:M(["review-history-item",{"latest-review":D===0}])},[s("div",Jl,[s("div",Kl,[s("div",Ql,[s("span",Zl,u(a.reviewerName),1),s("span",ei,u(a.reviewTime),1)])]),s("div",si,[t(R,{type:We(a.reviewResult),size:"small"},{default:l(()=>[d(u(a.reviewResult),1)]),_:2},1032,["type"]),a.submissionVersion?(o(),r("span",ti," v"+u(a.submissionVersion),1)):p("",!0)])]),s("div",li,[s("p",ii,u(a.reviewComment),1),a.attachments&&a.attachments.length>0?(o(),r("div",ai,[t(v,null,{default:l(()=>[t(m(je))]),_:1}),(o(!0),r(T,null,E(a.attachments,(Z,Rs)=>(o(),r("span",{key:Rs,class:"attachment-link"},u(Z.name),1))),128))])):p("",!0),a.highlights?(o(),r("div",ni,[s("div",oi,[e[116]||(e[116]=s("span",{class:"label"},"亮点：",-1)),s("span",null,u(a.highlights),1)])])):p("",!0),a.issues?(o(),r("div",ui,[s("div",ri,[e[117]||(e[117]=s("span",{class:"label"},"问题：",-1)),s("span",null,u(a.issues),1)])])):p("",!0),a.rectificationRequirements?(o(),r("div",di,[s("div",vi,[e[118]||(e[118]=s("span",{class:"label"},"整改要求：",-1)),s("span",null,u(a.rectificationRequirements),1)])])):p("",!0)])],2))),128))])])])):p("",!0),n.value.processChecklist&&n.value.processChecklist.length>0?(o(),r("div",mi,[s("div",pi,[e[119]||(e[119]=s("h4",null,"过程任务",-1)),s("span",ci,u(n.value.processChecklist.length)+" 个",1)]),s("div",fi,[s("div",yi,[(o(!0),r(T,null,E(n.value.processChecklist,(a,D)=>(o(),r("div",{key:a.id,class:"sub-milestone-item"},[s("div",_i,[s("span",gi,u(a.text),1),t(R,{type:a.done?"success":"info",size:"small"},{default:l(()=>[d(u(a.done?"已完成":"待开始"),1)]),_:2},1032,["type"])]),a.time?(o(),r("div",bi,[s("span",null,"时间："+u(a.time),1)])):p("",!0)]))),128))])])])):p("",!0),se.value?(o(),r("div",wi,[t(ws,null,{default:l(()=>[t(v,null,{default:l(()=>[t(m(Ls))]),_:1}),e[120]||(e[120]=s("span",null,"项目参与者信息",-1))]),_:1}),n.value.progressDetail?(o(),r("div",ki,[e[121]||(e[121]=s("div",{class:"section-header"},[s("h4",null,"详细进度")],-1)),s("div",Di,[t(ks,{percentage:n.value.progressDetail.percentage,status:n.value.progressDetail.status,"stroke-width":10},null,8,["percentage","status"]),s("p",hi,u(n.value.progressDetail.note),1)])])):p("",!0),n.value.communications&&n.value.communications.length>0?(o(),r("div",Ri,[s("div",Mi,[e[122]||(e[122]=s("h4",null,"沟通记录",-1)),s("span",Ii,u(n.value.communications.length)+" 条",1)]),s("div",Si,[(o(!0),r(T,null,E(n.value.communications,(a,D)=>(o(),r("div",{key:D,class:"communication-item-full"},[s("div",Ni,[s("span",Ti,u(a.author),1),s("span",Vi,u(a.time),1)]),s("p",Ci,u(a.content),1)]))),128))])])):p("",!0),n.value.internalNotes?(o(),r("div",Ei,[e[123]||(e[123]=s("div",{class:"section-header"},[s("h4",null,"内部备注")],-1)),s("div",xi,[s("p",null,u(n.value.internalNotes),1)])])):p("",!0),n.value.sensitiveAttachments&&n.value.sensitiveAttachments.length>0?(o(),r("div",Ai,[s("div",Fi,[e[124]||(e[124]=s("h4",null,"内部附件",-1)),s("span",Pi,u(n.value.sensitiveAttachments.length)+" 个",1)]),s("div",Oi,[(o(!0),r(T,null,E(n.value.sensitiveAttachments,(a,D)=>(o(),r("div",{key:D,class:"attachment-item-full"},[t(v,null,{default:l(()=>[t(m(O))]),_:1}),s("span",null,u(a.name)+" ("+u(a.size)+")",1),t(ie,{type:"primary",underline:!1},{default:l(()=>[...e[125]||(e[125]=[d("[下载]",-1)])]),_:1})]))),128))])])):p("",!0)])):(o(),r("div",Li,[t(ye,{type:"info",closable:!1,"show-icon":""},{title:l(()=>[...e[126]||(e[126]=[s("span",null,"此里程碑包含项目参与者专属信息，仅项目发布方和承接方可查看",-1)])]),_:1})]))])):p("",!0)]),_:1},8,["modelValue","title"]),t(ae,{modelValue:q.value,"onUpdate:modelValue":e[27]||(e[27]=a=>q.value=a),title:i.currentMilestoneForReview?"审核 - "+i.currentMilestoneForReview.title:"审核",width:"1200px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[s("div",ba,[t(c,{onClick:e[26]||(e[26]=a=>q.value=!1)},{default:l(()=>[...e[153]||(e[153]=[d("取消",-1)])]),_:1}),t(c,{type:"primary",onClick:ns,loading:X.value},{default:l(()=>[...e[154]||(e[154]=[d(" 提交审核 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[s("div",zi,[s("div",Hi,[s("div",Ui,[t(v,null,{default:l(()=>[t(m(O))]),_:1}),e[128]||(e[128]=s("span",null,"提交内容预览",-1))]),s("div",$i,[i.currentMilestoneForReview&&i.currentMilestoneForReview.submissionSummary?(o(),r("div",ji,[i.currentMilestoneForReview.code==="BIDDING"?(o(),r("div",Yi,[s("div",Xi,[e[129]||(e[129]=s("span",{class:"preview-label"},"申请人：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.applicantName),1)]),s("div",Gi,[e[130]||(e[130]=s("span",{class:"preview-label"},"团队名称：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.teamName),1)]),s("div",qi,[e[131]||(e[131]=s("span",{class:"preview-label"},"申请理由：",-1)),s("p",Wi,u(i.currentMilestoneForReview.submissionSummary.reason),1)]),s("div",Ji,[e[132]||(e[132]=s("span",{class:"preview-label"},"提交时间：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.submitTime),1)])])):p("",!0),i.currentMilestoneForReview.code==="PROPOSAL"?(o(),r("div",Ki,[s("div",Qi,[e[133]||(e[133]=s("span",{class:"preview-label"},"方案标题：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.proposalTitle),1)]),s("div",Zi,[e[134]||(e[134]=s("span",{class:"preview-label"},"技术方案摘要：",-1)),s("p",ea,u(i.currentMilestoneForReview.submissionSummary.technicalSummary),1)]),s("div",sa,[e[135]||(e[135]=s("span",{class:"preview-label"},"实施计划：",-1)),s("p",ta,u(i.currentMilestoneForReview.submissionSummary.implementationPlan),1)]),s("div",la,[e[136]||(e[136]=s("span",{class:"preview-label"},"风险评估：",-1)),s("p",ia,u(i.currentMilestoneForReview.submissionSummary.riskAssessment),1)]),s("div",aa,[e[137]||(e[137]=s("span",{class:"preview-label"},"提交时间：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.submitTime),1)])])):p("",!0),["MIDTERM","DELIVERY"].includes(i.currentMilestoneForReview.code)?(o(),r("div",na,[s("div",oa,[e[138]||(e[138]=s("span",{class:"preview-label"},"成果标题：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.resultTitle),1)]),s("div",ua,[e[139]||(e[139]=s("span",{class:"preview-label"},"完成情况：",-1)),s("p",ra,u(i.currentMilestoneForReview.submissionSummary.completionStatus),1)]),s("div",da,[e[140]||(e[140]=s("span",{class:"preview-label"},"核心成果：",-1)),s("p",va,u(i.currentMilestoneForReview.submissionSummary.coreResults),1)]),i.currentMilestoneForReview.submissionSummary.challenges?(o(),r("div",ma,[e[141]||(e[141]=s("span",{class:"preview-label"},"遇到的挑战：",-1)),s("p",pa,u(i.currentMilestoneForReview.submissionSummary.challenges),1)])):p("",!0),s("div",ca,[e[142]||(e[142]=s("span",{class:"preview-label"},"提交时间：",-1)),s("span",null,u(i.currentMilestoneForReview.submissionSummary.submitTime),1)])])):p("",!0),s("div",fa,[t(c,{size:"small",onClick:e[20]||(e[20]=a=>Re(i.currentMilestoneForReview))},{default:l(()=>[t(v,null,{default:l(()=>[t(m(He))]),_:1}),e[143]||(e[143]=d(" 查看完整内容 ",-1))]),_:1}),i.currentMilestoneForReview.submissionSummary.hasHistory?(o(),g(c,{key:0,size:"small",onClick:e[21]||(e[21]=a=>Me(i.currentMilestoneForReview))},{default:l(()=>[t(v,null,{default:l(()=>[t(m(we))]),_:1}),e[144]||(e[144]=d(" 查看历史版本 ",-1))]),_:1})):p("",!0)])])):(o(),g(Pe,{key:1,description:"暂无提交内容","image-size":80}))])]),s("div",ya,[s("div",_a,[t(v,null,{default:l(()=>[t(m(H))]),_:1}),e[145]||(e[145]=s("span",null,"审核意见",-1))]),s("div",ga,[t(_e,{model:k.value,rules:as,ref_key:"reviewFormRef",ref:me,"label-width":"100px"},{default:l(()=>[t(C,{label:"审核结果",prop:"reviewResult"},{default:l(()=>[t(Ds,{modelValue:k.value.reviewResult,"onUpdate:modelValue":e[22]||(e[22]=a=>k.value.reviewResult=a)},{default:l(()=>[t(ge,{label:"通过"},{default:l(()=>[...e[146]||(e[146]=[d("通过",-1)])]),_:1}),t(ge,{label:"拒绝"},{default:l(()=>[...e[147]||(e[147]=[d("拒绝",-1)])]),_:1}),i.currentMilestoneForReview&&!["BIDDING"].includes(i.currentMilestoneForReview.code)?(o(),g(ge,{key:0,label:"要求修改"},{default:l(()=>[...e[148]||(e[148]=[d("要求修改",-1)])]),_:1})):p("",!0)]),_:1},8,["modelValue"])]),_:1}),t(C,{label:"审核意见",prop:"reviewComment"},{default:l(()=>[t(z,{modelValue:k.value.reviewComment,"onUpdate:modelValue":e[23]||(e[23]=a=>k.value.reviewComment=a),type:"textarea",rows:6,placeholder:"请输入审核意见（至少10个字）...","show-word-limit":"",maxlength:"500"},null,8,["modelValue"])]),_:1}),i.currentMilestoneForReview&&i.currentMilestoneForReview.code==="FINAL_REVIEW"?(o(),g(C,{key:0,label:"评分",prop:"score"},{default:l(()=>[t(F,{modelValue:k.value.score,"onUpdate:modelValue":e[24]||(e[24]=a=>k.value.score=a),"show-score":"",max:10},null,8,["modelValue"]),e[149]||(e[149]=s("span",{class:"score-hint"},"（满分10分）",-1))]),_:1})):p("",!0),t(C,{label:"附件"},{default:l(()=>[t(Oe,{class:"review-upload","auto-upload":!1,"file-list":k.value.attachments,multiple:"",limit:5},{tip:l(()=>[...e[151]||(e[151]=[s("div",{class:"upload-tip"},"支持上传最多5个附件，单个文件不超过10MB",-1)])]),default:l(()=>[t(c,{size:"small"},{default:l(()=>[t(v,null,{default:l(()=>[t(m(je))]),_:1}),e[150]||(e[150]=d(" 添加附件 ",-1))]),_:1})]),_:1},8,["file-list"])]),_:1}),t(C,{label:"通知承接方"},{default:l(()=>[t(hs,{modelValue:k.value.notifyBidder,"onUpdate:modelValue":e[25]||(e[25]=a=>k.value.notifyBidder=a)},null,8,["modelValue"]),e[152]||(e[152]=s("span",{class:"switch-hint"},"（通过邮件和站内消息通知）",-1))]),_:1})]),_:1},8,["model"])])])])]),_:1},8,["modelValue","title"]),t(ae,{modelValue:W.value,"onUpdate:modelValue":e[30]||(e[30]=a=>W.value=a),title:"跳过里程碑",width:"600px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[s("div",wa,[t(c,{onClick:e[29]||(e[29]=a=>W.value=!1)},{default:l(()=>[...e[156]||(e[156]=[d("取消",-1)])]),_:1}),t(c,{type:"warning",onClick:rs,loading:X.value},{default:l(()=>[...e[157]||(e[157]=[d(" 确认跳过 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(ye,{title:"重要提示",type:"warning",closable:!1,"show-icon":""},{default:l(()=>[...e[155]||(e[155]=[s("p",null,'跳过里程碑后将无法恢复，该阶段将被标记为"已跳过"状态。',-1),s("p",null,"项目将直接进入下一个里程碑阶段，请谨慎操作！",-1)])]),_:1}),t(_e,{model:J.value,rules:os,ref_key:"skipFormRef",ref:fe,"label-width":"100px",style:{"margin-top":"20px"}},{default:l(()=>[t(C,{label:"跳过原因",prop:"skipReason"},{default:l(()=>[t(z,{modelValue:J.value.skipReason,"onUpdate:modelValue":e[28]||(e[28]=a=>J.value.skipReason=a),type:"textarea",rows:5,placeholder:"请说明跳过该里程碑的原因（至少10个字）...","show-word-limit":"",maxlength:"200"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ma=Ms(ka,[["__scopeId","data-v-39e76207"]]);export{Ma as default};
