import{_ as D}from"./桂电透明背景logo-ClRN5aIs.js";import{_ as I,u as x,g as y,r as S,w as L,a as c,o as r,b as n,t as E,x as h,n as A,s as O,c as b,h as t,i as o,k as m,l as a,p as B,y as N,F as C,f as U,z as V,E as M}from"./index-DttCejnL.js";const z={class:"user-panel"},F=["src","alt"],P={class:"user-name"},q="https://picsum.photos/seed/user123/40/40.jpg",H={__name:"UserPanel",props:{userInfo:{type:Object,default:()=>({})},userRole:{type:String,default:"student"}},setup(v){const p=x(),d=y(),l=S(!1),w=()=>{l.value=!l.value},i=()=>{l.value=!1},_=()=>{i(),p.push("/user")},f=()=>{i(),p.push("/user?tab=settings")},g=()=>{i(),d.logout(),localStorage.removeItem("token"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),p.push("/login")},e={mounted(s,k){s.clickOutsideEvent=u=>{s===u.target||s.contains(u.target)||k.value()},document.addEventListener("click",s.clickOutsideEvent)},unmounted(s){document.removeEventListener("click",s.clickOutsideEvent)}};return(s,k)=>L((r(),c("div",z,[n("img",{src:v.userInfo.avatar||q,alt:v.userInfo.username,class:"user-avatar",onClick:w},null,8,F),n("div",{class:A(["user-dropdown",{active:l.value}])},[n("span",P,E(v.userInfo.username||"用户"),1),n("button",{class:"dropdown-link",onClick:h(_,["stop"])},"个人中心"),n("button",{class:"dropdown-link",onClick:h(f,["stop"])},"设置"),n("button",{class:"dropdown-link danger",onClick:h(g,["stop"])},"退出登录")],2)])),[[e,i]])}},T=I(H,[["__scopeId","data-v-f7ffce1e"]]),G={class:"main-header"},J={class:"header-inner"},K={class:"brand"},Q={class:"main-nav"},W={class:"nav-link dropdown-trigger"},X={key:0,class:"badge"},Y={class:"auth-area"},Z={__name:"index",setup(v){const p=x(),d=y();O(()=>{d.initAuth()});const l=b(()=>d.isLoggedIn),w=b(()=>d.userInfo||{}),i=b(()=>d.userRole||""),_=S(2),f=(g,e)=>{M.warning(`请先登录后再使用${e}功能`),p.push(`/login?redirect=${encodeURIComponent(g)}`)};return(g,e)=>{const s=m("router-link"),k=m("el-icon"),u=m("el-dropdown-item"),$=m("el-dropdown-menu"),j=m("el-dropdown");return r(),c("header",G,[n("div",J,[n("div",K,[t(s,{to:"/home",class:"brand-logo-link"},{default:o(()=>[...e[2]||(e[2]=[n("img",{src:D,alt:"创客平台",style:{height:"45px",width:"auto","max-width":"180px","object-fit":"contain","border-radius":"8px"}},null,-1)])]),_:1}),t(s,{to:"/home",class:"brand-name-link"},{default:o(()=>[...e[3]||(e[3]=[n("span",{class:"brand-name"},"创客平台",-1)])]),_:1})]),n("nav",Q,[t(s,{to:"/home",class:"nav-link","active-class":"active"},{default:o(()=>[...e[4]||(e[4]=[a("首页",-1)])]),_:1}),t(j,{trigger:"hover",class:"nav-dropdown"},{dropdown:o(()=>[t($,null,{default:o(()=>[t(u,null,{default:o(()=>[t(s,{to:"/projects",class:"dropdown-item-link"},{default:o(()=>[...e[6]||(e[6]=[a("项目大厅",-1)])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(s,{to:"/projects?sort=hot",class:"dropdown-item-link"},{default:o(()=>[...e[7]||(e[7]=[a("热门项目",-1)])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(s,{to:"/projects",class:"dropdown-item-link"},{default:o(()=>[...e[8]||(e[8]=[a("项目详情",-1)])]),_:1})]),_:1})]),_:1})]),default:o(()=>[n("span",W,[e[5]||(e[5]=a(" 创客空间 ",-1)),t(k,{class:"dropdown-icon"},{default:o(()=>[t(B(N))]),_:1})])]),_:1}),t(s,{to:"/projects",class:"nav-link","active-class":"active"},{default:o(()=>[...e[9]||(e[9]=[a("项目大厅",-1)])]),_:1}),l.value?(r(),c(C,{key:1},[t(s,{to:"/growth-center",class:"nav-link","active-class":"active"},{default:o(()=>[...e[10]||(e[10]=[a("成长中心",-1)])]),_:1}),t(s,{to:"/messages",class:"nav-link messages","active-class":"active"},{default:o(()=>[e[11]||(e[11]=n("span",null,"消息",-1)),_.value>0?(r(),c("span",X,E(_.value),1)):U("",!0)]),_:1})],64)):(r(),c(C,{key:0},[n("span",{class:"nav-link",onClick:e[0]||(e[0]=R=>f("/growth-center","成长中心"))},"成长中心"),n("span",{class:"nav-link",onClick:e[1]||(e[1]=R=>f("/messages","消息"))},"消息")],64))]),n("div",Y,[l.value?(r(),V(T,{key:1,"user-info":w.value,"user-role":i.value},null,8,["user-info","user-role"])):(r(),c(C,{key:0},[t(s,{to:"/login",class:"auth-btn"},{default:o(()=>[...e[12]||(e[12]=[a("登录",-1)])]),_:1}),t(s,{to:"/register",class:"auth-btn solid"},{default:o(()=>[...e[13]||(e[13]=[a("注册",-1)])]),_:1})],64))])])])}}},te=I(Z,[["__scopeId","data-v-e32bcf0c"]]);export{te as A};
