import{_ as E,r as k,c as g,a5 as M,m as O,a as r,b as e,h as n,j as i,k as c,f as h,F as w,d as I,t as d,i as T,o as l,q as f,l as G,n as H}from"./index-JBLc9mc5.js";const J={class:"message-center-page"},K={class:"message-center-card"},P={class:"page-header"},Q={class:"header-right"},W={class:"type-tabs"},X={class:"tab-label"},Y={class:"message-center-main"},Z={class:"left-panel"},ee={class:"left-toolbar"},te={class:"message-list",role:"list"},se=["onClick"],ae={class:"message-meta"},ne={class:"meta-top"},le={class:"from-row"},oe={class:"from-name"},ie={key:0,class:"sub-title"},ce={class:"time"},de={class:"meta-bottom"},re={class:"summary"},ue={key:0,class:"list-empty"},me={class:"right-panel"},_e={key:0,class:"detail"},ve={class:"detail-header"},pe={class:"detail-title"},ye={class:"detail-h2"},he={class:"detail-sub"},fe={class:"detail-from"},be={class:"detail-time"},ke={class:"detail-actions"},ge={class:"detail-body"},Te={class:"detail-content"},Ce={key:1,class:"detail-empty"},xe={__name:"index",setup(Ne){const x=[{key:"my",label:"我的消息",icon:"Bell"},{key:"favorite",label:"收藏关注",icon:"Star"},{key:"comment",label:"评论",icon:"ChatLineRound"},{key:"reply",label:"回复",icon:"ChatDotRound"}],u=k("my"),b=k(""),m=k(""),v=k({my:[{id:"my-1",fromName:"系统通知",subTitle:"官方",avatar:"",title:"欢迎使用人才揭榜系统",summary:"你的账号已完成初始化，快去完善个人资料吧。",content:`欢迎使用人才揭榜系统！

你可以在「个人中心」完善头像、简介、技能标签等信息，以便更快匹配项目与机会。`,timeText:"今天 09:12",unread:1},{id:"my-2",fromName:"项目助手",subTitle:"",avatar:"",title:"项目进度提醒",summary:"你参与的项目「电商平台前端开发」有新的里程碑更新。",content:`项目「电商平台前端开发」里程碑已更新。

建议你及时查看项目进度页，确认自己的任务与截止时间。`,timeText:"昨天 20:41",unread:0}],favorite:[{id:"fav-1",fromName:"你关注的发布方",subTitle:"",avatar:"",title:"发布方更新了项目需求",summary:"你关注的发布方更新了项目「AI智能客服系统开发」需求说明。",content:`你关注的发布方更新了项目「AI智能客服系统开发」的需求说明。

可前往项目详情查看最新版本，评估是否需要调整方案。`,timeText:"12-17 16:08",unread:2}],comment:[{id:"cmt-1",fromName:"张同学",subTitle:"",avatar:"",title:"有人评论了你的动态",summary:"“方案写得很清晰，期待你的最终交付！”",content:`张同学评论了你的动态：

“方案写得很清晰，期待你的最终交付！”

你可以进入相关页面查看上下文并进行互动。`,timeText:"12-16 11:32",unread:1}],reply:[{id:"rpl-1",fromName:"李同学",subTitle:"",avatar:"",title:"有人回复了你的评论",summary:"“我这边也遇到同样的问题，已按你说的解决。”",content:`李同学回复了你的评论：

“我这边也遇到同样的问题，已按你说的解决。”

你可以继续回复，或将该讨论整理到项目说明中。`,timeText:"12-15 18:20",unread:0}]}),C=g(()=>v.value[u.value]||[]),N=g(()=>{const a={};for(const t of x){const _=v.value[t.key]||[];a[t.key]=_.reduce((p,y)=>p+(y.unread||0),0)}return a}),V=g(()=>{const a=b.value.trim().toLowerCase();return a?C.value.filter(t=>`${t.title} ${t.summary} ${t.content}`.toLowerCase().includes(a)):C.value}),o=g(()=>m.value&&C.value.find(a=>a.id===m.value)||null),L=a=>{m.value=a},$=()=>{b.value="",m.value=""},A=()=>{if(!o.value)return;const t=(v.value[u.value]||[]).find(_=>_.id===o.value.id);t&&(t.unread=0)},D=()=>{if(!o.value)return;const a=v.value[u.value]||[];v.value[u.value]=a.filter(t=>t.id!==o.value.id),m.value=""},R=()=>{};return M(()=>u.value,()=>{m.value=""}),O(()=>{}),(a,t)=>{const _=c("Setting"),p=c("el-icon"),y=c("el-button"),S=c("el-badge"),U=c("el-tab-pane"),z=c("el-tabs"),F=c("Search"),j=c("el-input"),q=c("el-avatar"),B=c("el-empty");return l(),r("div",J,[e("div",K,[e("header",P,[t[3]||(t[3]=e("div",{class:"header-left"},[e("h1",{class:"page-title"},"消息中心")],-1)),e("div",Q,[n(y,{type:"primary",plain:"",class:"settings-btn",onClick:R},{default:i(()=>[n(p,{class:"settings-icon"},{default:i(()=>[n(_)]),_:1}),t[2]||(t[2]=f(" 消息设置 ",-1))]),_:1})])]),e("div",W,[n(z,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onTabChange:$},{default:i(()=>[(l(),r(w,null,I(x,s=>n(U,{key:s.key,name:s.key},{label:i(()=>[e("span",X,[n(p,{class:"tab-icon"},{default:i(()=>[(l(),T(G(s.icon)))]),_:2},1024),f(" "+d(s.label)+" ",1),N.value[s.key]>0?(l(),T(S,{key:0,value:N.value[s.key],class:"tab-badge"},null,8,["value"])):h("",!0)])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),e("section",Y,[e("aside",Z,[e("div",ee,[n(j,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),placeholder:"搜索消息内容",clearable:"",class:"search-input"},{prefix:i(()=>[n(p,null,{default:i(()=>[n(F)]),_:1})]),_:1},8,["modelValue"])]),e("div",te,[(l(!0),r(w,null,I(V.value,s=>(l(),r("div",{key:s.id,class:H(["message-item",{active:s.id===m.value}]),role:"listitem",onClick:Ve=>L(s.id)},[n(q,{size:44,src:s.avatar,class:"message-avatar"},{default:i(()=>[f(d(s.fromName?.slice(0,1)||"U"),1)]),_:2},1032,["src"]),e("div",ae,[e("div",ne,[e("div",le,[e("span",oe,d(s.fromName),1),s.subTitle?(l(),r("span",ie,d(s.subTitle),1)):h("",!0)]),e("span",ce,d(s.timeText),1)]),e("div",de,[e("p",re,d(s.summary),1),s.unread>0?(l(),T(S,{key:0,value:s.unread,class:"unread-badge"},null,8,["value"])):h("",!0)])])],10,se))),128)),V.value.length?h("",!0):(l(),r("div",ue,[n(B,{description:"暂无消息"})]))])]),e("main",me,[o.value?(l(),r("div",_e,[e("div",ve,[e("div",pe,[e("h2",ye,d(o.value.title),1),e("div",he,[e("span",fe,"来自："+d(o.value.fromName),1),t[4]||(t[4]=e("span",{class:"detail-sep"},"·",-1)),e("span",be,d(o.value.timeText),1)])]),e("div",ke,[o.value.unread>0?(l(),T(y,{key:0,type:"primary",onClick:A},{default:i(()=>[...t[5]||(t[5]=[f(" 标记已读 ",-1)])]),_:1})):h("",!0),n(y,{type:"danger",plain:"",onClick:D},{default:i(()=>[...t[6]||(t[6]=[f(" 删除 ",-1)])]),_:1})])]),e("div",ge,[e("p",Te,d(o.value.content),1)])])):(l(),r("div",Ce,[n(B,{description:"请选择左侧一条消息查看详情"})]))])])])])}}},Be=E(xe,[["__scopeId","data-v-14ce1d5e"]]);export{Be as default};
