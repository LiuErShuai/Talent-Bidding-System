import{_ as Y,a as r,j as t,k as s,b as e,l as y,s as p,t as n,F as H,d as R,i as N,o as a,c as U,f as F,z as b,Q as be,A as he,V as $e,L as oe,Z as Ce,B as se,u as ze,r as V,af as fe,C as ae,X as Ve,H as z,a5 as le,I as ve,w as De,a3 as Me,n as Be,D as Fe,E as Ne,N as Pe,ag as _e,a1 as ge,p as ke,J as we,g as Ie}from"./index-Bg6MLb3F.js";import{P as Ue,m as qe}from"./projectManage-D5pePu8w.js";import"./桂电透明背景logo-ClRN5aIs.js";import"./UserPanel-DC8LkTeQ.js";const Ae={class:"project-sidebar"},He={class:"menu-title-with-status"},Re={class:"milestone-menu-item"},Ee={class:"milestone-name"},Le={__name:"ProjectSidebar",props:{project:{type:Object,default:null},milestones:{type:Array,default:()=>[]},activeSection:{type:String,default:"basic"}},emits:["select"],setup(v,{emit:B}){const o=v,u=B;function h(C){return["①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩"][C]||`${C+1}.`}function x(C){u("select",C)}function T(C){return{completed:"已完成","in-progress":"进行中",pending:"待开始",skipped:"已跳过"}[C]||C}function I(C){return{completed:"success","in-progress":"primary",pending:"info",skipped:"warning"}[C]||"info"}function D(){return o.project?.biddingStats?.selectedTeam?"success":o.project?.biddingStats?.totalApplications>0?"primary":"info"}function k(){return o.project?.biddingStats?.selectedTeam?"已完成":o.project?.biddingStats?.totalApplications>0?"进行中":"未开始"}return(C,w)=>{const $=y("el-menu-item"),M=y("el-tag"),A=y("el-sub-menu"),f=y("el-menu");return a(),r("div",Ae,[t(f,{"default-active":v.activeSection,"default-openeds":["milestones"],class:"sidebar-menu",onSelect:x},{default:s(()=>[t($,{index:"basic"},{default:s(()=>[...w[0]||(w[0]=[e("span",null,"基本信息",-1)])]),_:1}),w[4]||(w[4]=e("div",{class:"menu-divider"},null,-1)),t($,{index:"bidding-management"},{default:s(()=>[e("div",He,[w[1]||(w[1]=e("span",null,"揭榜管理",-1)),t(M,{type:D(),size:"small"},{default:s(()=>[p(n(k()),1)]),_:1},8,["type"])])]),_:1}),w[5]||(w[5]=e("div",{class:"menu-divider"},null,-1)),t(A,{index:"milestones"},{title:s(()=>[...w[2]||(w[2]=[e("span",null,"里程碑计划",-1)])]),default:s(()=>[(a(!0),r(H,null,R(v.milestones,(_,j)=>(a(),N($,{key:_.id,index:`milestone-${_.id}`},{default:s(()=>[e("div",Re,[e("span",Ee,n(h(j))+n(_.title),1),t(M,{type:I(_.status),size:"small",class:"milestone-tag"},{default:s(()=>[p(n(T(_.status)),1)]),_:2},1032,["type"])])]),_:2},1032,["index"]))),128))]),_:1}),w[6]||(w[6]=e("div",{class:"menu-divider"},null,-1)),t($,{index:"history"},{default:s(()=>[...w[3]||(w[3]=[e("span",null,"历史记录",-1)])]),_:1})]),_:1},8,["default-active"])])}}},We=Y(Le,[["__scopeId","data-v-e5dbd497"]]),Oe={class:"bidding-basic-info"},Xe={class:"project-info-section"},Ke={class:"project-header"},Ze={class:"project-header-left"},Ge={class:"project-title"},Je={class:"publisher-info"},Qe={class:"basic-info-card"},Ye={class:"info-row"},et={class:"info-item"},tt={class:"value"},st={class:"info-item"},lt={class:"value"},it={class:"info-item"},nt={class:"value"},ot={class:"info-row"},at={class:"info-item full-width"},dt={class:"value"},ut={class:"bidding-status-section"},ct={class:"section-header"},rt={class:"status-card"},mt={class:"status-item"},pt={class:"status-icon"},vt={class:"status-details"},ft={class:"status-value"},_t={class:"status-item"},gt={class:"status-icon"},yt={class:"status-details"},bt={class:"status-value"},ht={class:"status-item"},$t={class:"status-icon"},kt={class:"status-details"},wt={class:"status-value"},xt={class:"status-item"},jt={class:"status-icon"},Tt={class:"status-details"},St={class:"status-value"},Ct={key:0,class:"milestone-status-section"},zt={class:"section-header"},Vt={key:0,class:"milestone-card"},Dt={class:"milestone-header"},Mt={class:"milestone-info"},Bt={class:"milestone-title"},Ft={class:"milestone-description"},Nt={class:"milestone-meta"},Pt={class:"meta-item"},It={class:"meta-item"},Ut={__name:"BiddingBasicInfo",props:{project:{type:Object,required:!0},milestones:{type:Array,default:()=>[]}},emits:["viewMilestone"],setup(v,{emit:B}){const o=ze(),u=v,h=B,x=U(()=>{if(!u.milestones||u.milestones.length===0)return null;const f=u.milestones.find(j=>j.status==="in-progress");return f||u.milestones.find(j=>j.status==="pending")||u.milestones[0]});function T(){if(!u.project.startDate||!u.project.endDate)return 0;const f=new Date(u.project.startDate),j=new Date(u.project.endDate)-f;return Math.ceil(j/(1e3*60*60*24))}function I(f){return{bidding:"warning",ongoing:"primary",completed:"success",pending:"info",cancelled:"danger"}[f]||"info"}function D(){return u.project.biddingStats?.selectedTeam?"success":u.project.biddingStats?.totalApplications>0?"primary":"info"}function k(){return u.project.biddingStats?.selectedTeam?"已完成":u.project.biddingStats?.totalApplications>0?"进行中":"未开始"}function C(){return u.milestones?.some(j=>j.status==="in-progress")?"primary":u.milestones?.every(j=>j.status==="completed")&&u.milestones?.length>0?"success":"info"}function w(){return u.milestones?.some(j=>j.status==="in-progress")?"进行中":u.milestones?.every(j=>j.status==="completed")&&u.milestones?.length>0?"已完成":"未开始"}function $(f){return{completed:"success","in-progress":"primary",pending:"info",skipped:"warning"}[f]||"info"}function M(){const f=u.project.publisherId||"default";o.push(`/enterprise/profile/${f}`)}function A(){x.value&&h("viewMilestone",x.value.id)}return(f,_)=>{const j=y("el-tag"),E=y("el-icon"),ee=y("el-button");return a(),r("div",Oe,[e("div",Xe,[e("div",Ke,[e("div",Ze,[t(j,{class:"status-tag",type:I(v.project.status)},{default:s(()=>[p(n(v.project.statusText),1)]),_:1},8,["type"]),e("h1",Ge,n(v.project.name),1)])]),e("div",Je,[_[0]||(_[0]=e("span",{class:"publisher-label"},"发布方：",-1)),e("span",{class:"publisher-link",onClick:M},n(v.project.publisher),1)]),e("div",Qe,[e("div",Ye,[e("div",et,[_[1]||(_[1]=e("span",{class:"label"},"发布时间",-1)),e("span",tt,n(v.project.startDate),1)]),e("div",st,[_[2]||(_[2]=e("span",{class:"label"},"项目周期",-1)),e("span",lt,n(T())+"天",1)]),e("div",it,[_[3]||(_[3]=e("span",{class:"label"},"揭榜状态",-1)),e("span",nt,n(k()),1)])]),e("div",ot,[e("div",at,[_[4]||(_[4]=e("span",{class:"label"},"项目描述",-1)),e("span",dt,n(v.project.description),1)])])])]),e("div",ut,[e("div",ct,[_[5]||(_[5]=e("h2",{class:"section-title"},"揭榜征集状态",-1)),t(j,{type:D(),size:"small"},{default:s(()=>[p(n(k()),1)]),_:1},8,["type"])]),e("div",rt,[e("div",mt,[e("div",pt,[t(E,null,{default:s(()=>[t(b(be))]),_:1})]),e("div",vt,[_[6]||(_[6]=e("div",{class:"status-label"},"申请团队数",-1)),e("div",ft,n(v.project.biddingStats?.totalApplications||0)+" 个",1)])]),e("div",_t,[e("div",gt,[t(E,null,{default:s(()=>[t(b(he))]),_:1})]),e("div",yt,[_[7]||(_[7]=e("div",{class:"status-label"},"审核通过",-1)),e("div",bt,n(v.project.biddingStats?.approvedApplications||0)+" 个",1)])]),e("div",ht,[e("div",$t,[t(E,null,{default:s(()=>[t(b($e))]),_:1})]),e("div",kt,[_[8]||(_[8]=e("div",{class:"status-label"},"待审核",-1)),e("div",wt,n(v.project.biddingStats?.pendingApplications||0)+" 个",1)])]),e("div",xt,[e("div",jt,[t(E,null,{default:s(()=>[t(b(oe))]),_:1})]),e("div",Tt,[_[9]||(_[9]=e("div",{class:"status-label"},"中标团队",-1)),e("div",St,n(v.project.biddingStats?.selectedTeam||"未选定"),1)])])])]),v.project.biddingStats?.selectedTeam?(a(),r("div",Ct,[e("div",zt,[_[10]||(_[10]=e("h2",{class:"section-title"},"里程碑状态",-1)),t(j,{type:C(),size:"small"},{default:s(()=>[p(n(w()),1)]),_:1},8,["type"])]),x.value?(a(),r("div",Vt,[e("div",Dt,[e("div",Mt,[e("h3",Bt,n(x.value.title),1),t(j,{type:$(x.value.status),size:"small"},{default:s(()=>[p(n(x.value.statusText),1)]),_:1},8,["type"])]),t(ee,{type:"primary",plain:"",onClick:A},{default:s(()=>[..._[11]||(_[11]=[p(" 查看详情 ",-1)])]),_:1})]),e("p",Ft,n(x.value.description),1),e("div",Nt,[e("span",Pt,[t(E,null,{default:s(()=>[t(b(Ce))]),_:1}),p(" 计划完成："+n(x.value.plannedDate),1)]),e("span",It,[t(E,null,{default:s(()=>[t(b(se))]),_:1}),p(" 交付物："+n(x.value.deliverables?.length||0)+" 项 ",1)])])])):F("",!0)])):F("",!0)])}}},qt=Y(Ut,[["__scopeId","data-v-4c0e2050"]]),At={class:"bidding-management"},Ht={class:"stats-section"},Rt={class:"stat-content"},Et={class:"stat-info"},Lt={class:"stat-value"},Wt={class:"stat-content"},Ot={class:"stat-info"},Xt={class:"stat-value"},Kt={class:"stat-content"},Zt={class:"stat-info"},Gt={class:"stat-value"},Jt={class:"stat-content"},Qt={class:"stat-info"},Yt={class:"stat-value"},es={class:"filter-section"},ts={class:"applications-list"},ss={class:"application-summary"},ls={class:"summary-left"},is={class:"team-name"},ns={class:"summary-info"},os={class:"summary-info"},as={class:"summary-info"},ds={class:"summary-right"},us={key:0,class:"team-detail-content"},cs={class:"detail-section"},rs={class:"info-grid"},ms={class:"info-item"},ps={class:"value"},vs={class:"info-item"},fs={class:"value"},_s={class:"info-item"},gs={class:"value"},ys={class:"info-item"},bs={class:"value"},hs={class:"detail-section"},$s={class:"description-text"},ks={key:0,class:"detail-section"},ws={class:"file-list"},xs={class:"file-name"},js={class:"file-size"},Ts={key:1,class:"detail-section"},Ss={class:"review-record"},Cs={class:"review-action"},zs={class:"review-comment"},Vs={class:"detail-actions"},Ds={key:0,class:"action-with-note"},Ms={class:"action-buttons"},Bs={key:1,class:"action-with-note"},Fs={class:"action-buttons"},Ns={__name:"BiddingManagement",props:{projectId:{type:String,required:!0}},setup(v){const B=V(!1),o=V(null),u=V(""),h=V([{id:"app-001",teamName:"创新科技团队",leader:"张三",memberCount:5,contact:"13800138000",applyTime:"2025-11-01 10:30",description:"我们是一支经验丰富的AI开发团队，曾参与多个智能客服项目的开发，对NLP技术有深入研究。团队成员来自计算机科学专业，具备扎实的技术功底。",status:"selected",detailFiles:[{id:"f1",name:"团队介绍.pdf",size:"2.3 MB"},{id:"f2",name:"身份认证.pdf",size:"1.5 MB"},{id:"f3",name:"技术方案.pdf",size:"4.2 MB"}],reviewHistory:[{id:"r1",time:"2025-11-02 14:00",action:"approved",actionText:"审核通过",comment:"团队资质符合要求，技术方案完善"},{id:"r2",time:"2025-11-03 10:00",action:"selected",actionText:"选为中标团队",comment:"技术方案完善，团队经验丰富，综合评分最高"}]},{id:"app-002",teamName:"智能开发小组",leader:"李四",memberCount:4,contact:"13900139000",applyTime:"2025-11-01 11:20",description:"我们团队专注于人工智能领域，有丰富的机器学习和深度学习项目经验。",status:"approved",detailFiles:[{id:"f4",name:"团队介绍.pdf",size:"1.8 MB"},{id:"f5",name:"技术方案.pdf",size:"3.5 MB"}],reviewHistory:[{id:"r3",time:"2025-11-02 15:30",action:"approved",actionText:"审核通过",comment:"团队经验丰富，符合项目要求"}]},{id:"app-003",teamName:"未来科技工作室",leader:"王五",memberCount:3,contact:"13700137000",applyTime:"2025-11-01 14:50",description:"我们是一支年轻但充满活力的团队，虽然经验不多，但学习能力强，愿意接受挑战。",status:"submitted",detailFiles:[{id:"f6",name:"团队介绍.pdf",size:"1.2 MB"},{id:"f7",name:"技术方案.pdf",size:"2.8 MB"}],reviewHistory:[]},{id:"app-004",teamName:"测试团队",leader:"赵六",memberCount:2,contact:"13600136000",applyTime:"2025-11-01 16:00",description:"测试申请",status:"rejected",detailFiles:[{id:"f8",name:"团队介绍.pdf",size:"800 KB"}],reviewHistory:[{id:"r4",time:"2025-11-02 16:30",action:"rejected",actionText:"拒绝申请",comment:"团队人数不足，经验不符合要求"}]}]),x=V("all"),T=U(()=>h.value.filter(m=>m.status==="submitted").length),I=U(()=>T.value),D=U(()=>h.value.filter(m=>m.status==="approved").length),k=U(()=>h.value.filter(m=>m.status==="rejected").length),C=U(()=>h.value.filter(m=>m.status==="selected").length),w=U(()=>h.value.find(m=>m.status==="selected")),$=U(()=>x.value==="all"?h.value:h.value.filter(m=>m.status===x.value)),M=V(!1),A=V(""),f=V({comment:"",action:"",applicationId:""});function _(m){o.value=m,u.value="",B.value=!0}function j(m){const i=u.value.trim()||"审核通过";m.status="approved",m.reviewHistory.push({id:`r${Date.now()}`,time:new Date().toLocaleString("zh-CN"),action:"approved",actionText:"审核通过",comment:i}),z.success("已审核通过"),o.value&&o.value.id===m.id&&(o.value=m),u.value=""}function E(m){const i=u.value.trim();if(!i){z.warning("拒绝申请时必须填写备注信息");return}m.status="rejected",m.reviewHistory.push({id:`r${Date.now()}`,time:new Date().toLocaleString("zh-CN"),action:"rejected",actionText:"拒绝申请",comment:i}),z.success("已拒绝申请"),o.value&&o.value.id===m.id&&(o.value=m),u.value=""}function ee(m){const i=h.value.find(O=>O.status==="selected");if(i){le.alert(`已存在中标团队"${i.teamName}"，中标团队确定后不可更改。如需更换，请先联系管理员处理。`,"无法选择",{confirmButtonText:"知道了",type:"warning"});return}const q=u.value.trim()||"恭喜！您的团队已被选为中标团队";le.confirm(`确定选择"${m.teamName}"作为中标团队吗？选定后将无法更改。`,"确认选择",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.status="selected",m.reviewHistory.push({id:`r${Date.now()}`,time:new Date().toLocaleString("zh-CN"),action:"selected",actionText:"选为中标团队",comment:q}),o.value&&o.value.id===m.id&&(o.value=m),z.success("已选定中标团队"),u.value=""}).catch(()=>{})}function de(m){return{submitted:"warning",approved:"success",rejected:"info",selected:"success"}[m]||"info"}function Z(m){return{submitted:"待审核",approved:"审核通过",rejected:"已拒绝",selected:"已中标"}[m]||"未知"}function L(){}function ue(){if(!f.value.comment.trim()){z.warning("请输入审核意见");return}const m=h.value.find(i=>i.id===f.value.applicationId);m&&(m.status=f.value.action,m.reviewHistory.push({id:`r${Date.now()}`,time:new Date().toLocaleString("zh-CN"),action:f.value.action,actionText:f.value.action==="approved"?"审核通过":"拒绝申请",comment:f.value.comment}),z.success(f.value.action==="approved"?"已审核通过":"已拒绝申请"),o.value&&o.value.id===m.id&&(o.value=m)),M.value=!1}function ce(m){z.success(`正在下载：${m.name}`)}return(m,i)=>{const q=y("el-icon"),O=y("el-card"),G=y("el-radio-button"),J=y("el-radio-group"),W=y("el-tag"),X=y("el-button"),re=y("el-empty"),me=y("el-timeline-item"),pe=y("el-timeline"),d=y("el-input"),l=y("el-dialog"),P=y("el-form-item"),S=y("el-form");return a(),r("div",At,[e("div",Ht,[t(O,{class:"stat-card"},{default:s(()=>[e("div",Rt,[t(q,{class:"stat-icon",color:"#409eff"},{default:s(()=>[t(b(be))]),_:1}),e("div",Et,[i[10]||(i[10]=e("div",{class:"stat-label"},"申请团队",-1)),e("div",Lt,n(h.value.length),1)])])]),_:1}),t(O,{class:"stat-card"},{default:s(()=>[e("div",Wt,[t(q,{class:"stat-icon",color:"#67c23a"},{default:s(()=>[t(b(fe))]),_:1}),e("div",Ot,[i[11]||(i[11]=e("div",{class:"stat-label"},"初审通过",-1)),e("div",Xt,n(D.value),1)])])]),_:1}),t(O,{class:"stat-card"},{default:s(()=>[e("div",Kt,[t(q,{class:"stat-icon",color:"#e6a23c"},{default:s(()=>[t(b($e))]),_:1}),e("div",Zt,[i[12]||(i[12]=e("div",{class:"stat-label"},"待审核",-1)),e("div",Gt,n(I.value),1)])])]),_:1}),t(O,{class:"stat-card"},{default:s(()=>[e("div",Jt,[t(q,{class:"stat-icon",color:"#f56c6c"},{default:s(()=>[t(b(oe))]),_:1}),e("div",Qt,[i[13]||(i[13]=e("div",{class:"stat-label"},"中标团队",-1)),e("div",Yt,n(w.value?"已选定":"未选定"),1)])])]),_:1})]),e("div",es,[t(J,{modelValue:x.value,"onUpdate:modelValue":i[0]||(i[0]=g=>x.value=g),onChange:L},{default:s(()=>[t(G,{value:"all"},{default:s(()=>[p("全部 ("+n(h.value.length)+")",1)]),_:1}),t(G,{value:"submitted"},{default:s(()=>[p("待审核 ("+n(T.value)+")",1)]),_:1}),t(G,{value:"approved"},{default:s(()=>[p("审核通过 ("+n(D.value)+")",1)]),_:1}),t(G,{value:"rejected"},{default:s(()=>[p("已拒绝 ("+n(k.value)+")",1)]),_:1}),t(G,{value:"selected"},{default:s(()=>[p("已中标 ("+n(C.value)+")",1)]),_:1})]),_:1},8,["modelValue"])]),e("div",ts,[(a(!0),r(H,null,R($.value,g=>(a(),N(O,{key:g.id,class:"application-card"},{default:s(()=>[e("div",ss,[e("div",ls,[e("h3",is,n(g.teamName),1),t(W,{type:de(g.status),size:"small"},{default:s(()=>[p(n(Z(g.status)),1)]),_:2},1032,["type"]),e("span",ns,"负责人："+n(g.leader),1),e("span",os,"团队人数："+n(g.memberCount)+"人",1),e("span",as,"申请时间："+n(g.applyTime),1)]),e("div",ds,[t(X,{type:"primary",plain:"",onClick:te=>_(g)},{default:s(()=>[...i[14]||(i[14]=[p(" 查看详情 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128)),$.value.length===0?(a(),N(re,{key:0,description:"暂无申请团队"})):F("",!0)]),t(l,{modelValue:B.value,"onUpdate:modelValue":i[6]||(i[6]=g=>B.value=g),title:o.value?.teamName,width:"800px",class:"team-detail-dialog"},{default:s(()=>[o.value?(a(),r("div",us,[e("div",cs,[i[19]||(i[19]=e("div",{class:"section-title"},"团队基本信息",-1)),e("div",rs,[e("div",ms,[i[15]||(i[15]=e("span",{class:"label"},"团队负责人：",-1)),e("span",ps,n(o.value.leader),1)]),e("div",vs,[i[16]||(i[16]=e("span",{class:"label"},"团队人数：",-1)),e("span",fs,n(o.value.memberCount)+" 人",1)]),e("div",_s,[i[17]||(i[17]=e("span",{class:"label"},"联系方式：",-1)),e("span",gs,n(o.value.contact),1)]),e("div",ys,[i[18]||(i[18]=e("span",{class:"label"},"申请时间：",-1)),e("span",bs,n(o.value.applyTime),1)])])]),e("div",hs,[i[20]||(i[20]=e("div",{class:"section-title"},"申请说明",-1)),e("div",$s,n(o.value.description),1)]),o.value.detailFiles&&o.value.detailFiles.length>0?(a(),r("div",ks,[i[22]||(i[22]=e("div",{class:"section-title"},"详细资料",-1)),e("div",ws,[(a(!0),r(H,null,R(o.value.detailFiles,g=>(a(),r("div",{key:g.id,class:"file-item"},[t(q,null,{default:s(()=>[t(b(se))]),_:1}),e("span",xs,n(g.name),1),e("span",js,n(g.size),1),t(X,{link:"",type:"primary",onClick:te=>ce(g)},{default:s(()=>[t(q,null,{default:s(()=>[t(b(ae))]),_:1}),i[21]||(i[21]=p(" 下载 ",-1))]),_:1},8,["onClick"])]))),128))])])):F("",!0),o.value.reviewHistory&&o.value.reviewHistory.length>0?(a(),r("div",Ts,[i[23]||(i[23]=e("div",{class:"section-title"},"审核记录",-1)),t(pe,null,{default:s(()=>[(a(!0),r(H,null,R(o.value.reviewHistory,g=>(a(),N(me,{key:g.id,timestamp:g.time,type:g.action==="approved"||g.action==="selected"?"success":"danger"},{default:s(()=>[e("div",Ss,[e("div",Cs,n(g.actionText),1),e("div",zs,n(g.comment),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])):F("",!0),e("div",Vs,[o.value.status==="submitted"?(a(),r("div",Ds,[t(d,{modelValue:u.value,"onUpdate:modelValue":i[1]||(i[1]=g=>u.value=g),type:"textarea",rows:2,placeholder:"请输入备注信息（选填）",class:"action-note-input"},null,8,["modelValue"]),e("div",Ms,[t(X,{type:"success",onClick:i[2]||(i[2]=g=>j(o.value))},{default:s(()=>[t(q,null,{default:s(()=>[t(b(fe))]),_:1}),i[24]||(i[24]=p(" 审核通过 ",-1))]),_:1}),t(X,{type:"danger",onClick:i[3]||(i[3]=g=>E(o.value))},{default:s(()=>[t(q,null,{default:s(()=>[t(b(Ve))]),_:1}),i[25]||(i[25]=p(" 拒绝申请 ",-1))]),_:1})])])):F("",!0),o.value.status==="approved"?(a(),r("div",Bs,[t(d,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=g=>u.value=g),type:"textarea",rows:2,placeholder:"请输入备注信息（选填）",class:"action-note-input"},null,8,["modelValue"]),e("div",Fs,[t(X,{type:"success",onClick:i[5]||(i[5]=g=>ee(o.value))},{default:s(()=>[t(q,null,{default:s(()=>[t(b(oe))]),_:1}),i[26]||(i[26]=p(" 选为中标团队 ",-1))]),_:1})])])):F("",!0),o.value.status==="selected"?(a(),N(W,{key:2,type:"success",size:"large"},{default:s(()=>[t(q,null,{default:s(()=>[t(b(oe))]),_:1}),i[27]||(i[27]=p(" 中标团队 ",-1))]),_:1})):F("",!0),o.value.status==="rejected"?(a(),N(W,{key:3,type:"info",size:"large"},{default:s(()=>[...i[28]||(i[28]=[p("已拒绝",-1)])]),_:1})):F("",!0)])])):F("",!0)]),_:1},8,["modelValue","title"]),t(l,{modelValue:M.value,"onUpdate:modelValue":i[9]||(i[9]=g=>M.value=g),title:A.value,width:"600px"},{footer:s(()=>[t(X,{onClick:i[8]||(i[8]=g=>M.value=!1)},{default:s(()=>[...i[29]||(i[29]=[p("取消",-1)])]),_:1}),t(X,{type:"primary",onClick:ue},{default:s(()=>[...i[30]||(i[30]=[p("确定",-1)])]),_:1})]),default:s(()=>[t(S,{model:f.value,"label-width":"100px"},{default:s(()=>[t(P,{label:"审核意见"},{default:s(()=>[t(d,{modelValue:f.value.comment,"onUpdate:modelValue":i[7]||(i[7]=g=>f.value.comment=g),type:"textarea",rows:4,placeholder:"请输入审核意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ps=Y(Ns,[["__scopeId","data-v-2356c473"]]),Is={class:"submission-item"},Us={class:"submission-info"},qs={class:"submission-name"},As={class:"file-size"},Hs={class:"upload-time"},Rs={key:0,class:"submission-description"},Es={__name:"SubmissionItem",props:{submission:{type:Object,required:!0}},emits:["download"],setup(v,{emit:B}){const o=v,u=B;function h(){u("download",o.submission)}return(x,T)=>{const I=y("el-icon");return a(),r("div",Is,[e("div",Us,[t(I,{class:"file-icon"},{default:s(()=>[t(b(se))]),_:1}),e("span",qs,n(v.submission.fileName),1),e("span",As,n(v.submission.fileSize),1),e("span",Hs,n(v.submission.uploadTime),1),t(I,{class:"download-icon",onClick:h},{default:s(()=>[t(b(ae))]),_:1})]),v.submission.versionNote||v.submission.description?(a(),r("div",Rs,n(v.submission.versionNote||v.submission.description),1)):F("",!0)])}}},ye=Y(Es,[["__scopeId","data-v-7b85f440"]]),Ls={class:"milestone-detail"},Ws={class:"section task-description-section"},Os={class:"description-content"},Xs={class:"section-title"},Ks={class:"task-description"},Zs={key:0,class:"deliverables-list"},Gs={class:"deliverables-header"},Js={class:"deliverables-actions"},Qs={class:"toggle-text"},Ys={class:"deliverables-items"},el={class:"deliverable-info"},tl={class:"deliverable-name"},sl={class:"deliverable-requirement"},ll={class:"status-badge"},il={class:"section task-files-section"},nl={class:"section-header"},ol={key:0,class:"task-files-list"},al={class:"file-info"},dl={class:"file-name"},ul={class:"file-size"},cl={class:"section submissions-section"},rl={class:"section-header"},ml={key:0,class:"latest-submission"},pl={class:"section feedback-section"},vl={key:0,class:"feedbacks-list"},fl={key:0,class:"feedback-collapsed"},_l={class:"feedback-text-collapsed"},gl={class:"feedback-time"},yl={key:1,class:"feedback-expanded"},bl={class:"feedback-expanded-header"},hl={class:"feedback-time"},$l={class:"feedback-text-full"},kl={key:0,class:"actions-section"},wl={class:"history-submissions-dialog"},xl={class:"edit-task-files-dialog"},jl={key:0,class:"files-list"},Tl={class:"file-item-content"},Sl={class:"file-info-text"},Cl={class:"file-name"},zl={class:"file-meta"},Vl={class:"file-size"},Dl={class:"file-time"},Ml={class:"file-item-actions"},Bl={class:"upload-tips"},Fl={class:"edit-deliverables-dialog"},Nl={class:"deliverables-edit-list"},Pl={class:"deliverable-edit-header"},Il={class:"deliverable-index"},Ul={class:"deliverable-edit-content"},ql={class:"form-row"},Al={class:"form-row"},Hl={class:"form-row"},Rl={__name:"MilestoneDetail",props:{milestone:{type:Object,required:!0},project:{type:Object,required:!0}},emits:["refresh"],setup(v,{emit:B}){const o=v,u=B,h=V(!1),x=U(()=>o.milestone.status!=="completed"),T=U(()=>!o.milestone.submissions||o.milestone.submissions.length===0?null:o.milestone.submissions[0]),I=U(()=>!o.milestone.submissions||o.milestone.submissions.length<=1?[]:o.milestone.submissions.slice(1)),D=U(()=>o.milestone.feedbacks?[...o.milestone.feedbacks].sort((d,l)=>new Date(l.time)-new Date(d.time)):[]),k=V({});function C(d){k.value[d]=!k.value[d]}const w=V(!1),$=ve({content:""});function M(){$.content="",w.value=!0}function A(){if(!$.content){z.warning("请输入反馈内容");return}z.success("反馈已提交"),w.value=!1,u("refresh")}function f(){le.confirm("确认通过该里程碑节点吗？通过后将自动开启下一个里程碑。","确认通过",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then(()=>{z.success("里程碑已通过"),u("refresh")}).catch(()=>{})}function _(d){return{pending:"info","in-progress":"primary",completed:"success",overdue:"danger"}[d]||"info"}const j=V(!1);function E(){j.value=!0}function ee(d){z.success(`开始下载：${d.fileName}`),console.log("下载文件：",d)}function de(d){z.success(`开始下载：${d.name}`),console.log("下载任务文件：",d)}const Z=V(!1),L=ve({files:[]}),ue=V(null);function ce(){L.files=o.milestone.taskFiles?.map(d=>({id:d.id,name:d.name,size:d.size,type:d.type,uploadTime:d.uploadTime,uploader:d.uploader,url:d.url}))||[],Z.value=!0}function m(d,l){if(d.size>524288e3){z.warning(`文件 ${d.name} 超过 500MB 限制`);return}L.files.push({id:`new-${Date.now()}-${Math.random()}`,name:d.name,size:i(d.size),type:q(d.name),uploadTime:new Date().toISOString().slice(0,16).replace("T"," "),uploader:"XX科技有限公司",rawFile:d.raw}),z.success(`已添加文件：${d.name}`)}function i(d){if(d===0)return"0 B";const l=1024,P=["B","KB","MB","GB"],S=Math.floor(Math.log(d)/Math.log(l));return Math.round(d/Math.pow(l,S)*100)/100+" "+P[S]}function q(d){const l=d.split(".").pop().toLowerCase();return{pdf:"PDF",doc:"Word",docx:"Word",xls:"Excel",xlsx:"Excel",ppt:"PPT",pptx:"PPT",zip:"ZIP",rar:"RAR",jpg:"图片",jpeg:"图片",png:"图片",gif:"图片"}[l]||l.toUpperCase()}function O(d){le.confirm("确认删除该文件吗？","确认删除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{L.files.splice(d,1),z.success("已删除")}).catch(()=>{})}function G(){if(L.files.length===0){z.warning("请至少上传一个任务文件");return}const d=L.files.filter(l=>l.rawFile);d.length>0&&console.log("需要上传的新文件：",d),z.success("任务文件已保存"),Z.value=!1,u("refresh"),console.log("保存任务文件：",L.files)}const J=V(!1),W=ve({deliverables:[]});function X(){W.deliverables=o.milestone.deliverables?.map(d=>({id:d.id,name:d.name,formatStr:d.format.join(" / "),requirement:d.requirement}))||[],J.value=!0}function re(){W.deliverables.push({id:`new-${Date.now()}`,name:"",formatStr:"",requirement:""})}function me(d){le.confirm("确认删除该交付物吗？","确认删除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{W.deliverables.splice(d,1),z.success("已删除")}).catch(()=>{})}function pe(){if(W.deliverables.filter(l=>!l.name.trim()||!l.formatStr.trim()||!l.requirement.trim()).length>0){z.warning("请填写所有交付物的必填信息");return}z.success("交付物要求已保存"),J.value=!1,u("refresh"),console.log("保存交付物要求：",W.deliverables)}return(d,l)=>{const P=y("el-icon"),S=y("el-button"),g=y("el-tag"),te=y("el-empty"),ie=y("el-input"),xe=y("el-form-item"),je=y("el-form"),ne=y("el-dialog"),Te=y("el-upload"),Se=y("el-alert");return a(),r("div",Ls,[e("div",Ws,[e("div",Os,[e("h4",Xs,n(v.milestone.title),1),e("p",Ks,n(v.milestone.description),1),v.milestone.deliverables&&v.milestone.deliverables.length?(a(),r("div",Zs,[e("div",Gs,[l[10]||(l[10]=e("h5",{class:"deliverables-title"},"交付物要求",-1)),e("div",Js,[t(S,{link:"",size:"small",class:"edit-deliverables-btn",onClick:X},{default:s(()=>[t(P,null,{default:s(()=>[t(b(Me))]),_:1}),l[9]||(l[9]=e("span",{class:"edit-text"},"编辑",-1))]),_:1}),t(S,{link:"",size:"small",class:"toggle-btn",onClick:l[0]||(l[0]=c=>h.value=!h.value)},{default:s(()=>[t(P,{class:Be(["arrow-icon",{expanded:h.value}])},{default:s(()=>[t(b(Fe))]),_:1},8,["class"]),e("span",Qs,n(h.value?"收起":"展开"),1)]),_:1})])]),De(e("ul",Ys,[(a(!0),r(H,null,R(v.milestone.deliverables,c=>(a(),r("li",{key:c.id,class:"deliverable-item"},[e("div",el,[e("span",tl,n(c.name),1),t(g,{size:"small",type:"info"},{default:s(()=>[p(n(c.format.join(" / ")),1)]),_:2},1024)]),e("p",sl,n(c.requirement),1)]))),128))],512),[[Ne,h.value]])])):F("",!0)]),e("div",ll,[t(g,{type:_(v.milestone.status),size:"large",effect:"plain"},{default:s(()=>[p(n(v.milestone.statusText),1)]),_:1},8,["type"])])]),e("div",il,[e("div",nl,[l[12]||(l[12]=e("h4",{class:"section-title"}," 任务文件 ",-1)),t(S,{type:"primary",plain:"",size:"small",onClick:ce},{default:s(()=>[...l[11]||(l[11]=[p(" 编辑 ",-1)])]),_:1})]),v.milestone.taskFiles&&v.milestone.taskFiles.length?(a(),r("ul",ol,[(a(!0),r(H,null,R(v.milestone.taskFiles,c=>(a(),r("li",{key:c.id,class:"task-file-item"},[e("div",al,[t(P,{class:"file-icon"},{default:s(()=>[t(b(se))]),_:1}),e("span",dl,n(c.name),1),e("span",ul,n(c.size),1)]),t(S,{link:"",type:"primary",onClick:K=>de(c)},{default:s(()=>[t(P,null,{default:s(()=>[t(b(ae))]),_:1})]),_:1},8,["onClick"])]))),128))])):(a(),N(te,{key:1,description:"暂无任务文件","image-size":40}))]),e("div",cl,[e("div",rl,[l[14]||(l[14]=e("h4",{class:"section-title"}," 承接方提交记录 ",-1)),I.value.length>0?(a(),N(S,{key:0,type:"primary",plain:"",size:"small",onClick:E},{default:s(()=>[...l[13]||(l[13]=[p(" 查看历史提交 ",-1)])]),_:1})):F("",!0)]),T.value?(a(),r("div",ml,[t(ye,{submission:T.value,onDownload:ee},null,8,["submission"])])):F("",!0),T.value?F("",!0):(a(),N(te,{key:1,description:"承接方暂未提交文件","image-size":40}))]),e("div",pl,[l[19]||(l[19]=e("div",{class:"section-header"},[e("h4",{class:"section-title"}," 意见反馈 ")],-1)),v.milestone.feedbacks&&v.milestone.feedbacks.length?(a(),r("div",vl,[(a(!0),r(H,null,R(D.value,c=>(a(),r("div",{key:c.id,class:"feedback-item"},[k.value[c.id]?(a(),r("div",yl,[e("div",bl,[l[18]||(l[18]=e("span",{class:"feedback-label"},"反馈内容：",-1)),e("span",hl,n(c.time),1),t(S,{link:"",type:"primary",size:"small",onClick:K=>C(c.id),class:"collapse-btn"},{default:s(()=>[...l[17]||(l[17]=[p(" 收起 ",-1)])]),_:1},8,["onClick"])]),e("div",$l,n(c.content),1)])):(a(),r("div",fl,[l[16]||(l[16]=e("span",{class:"feedback-label"},"反馈内容：",-1)),e("span",_l,n(c.content),1),e("span",gl,n(c.time),1),t(S,{link:"",type:"primary",size:"small",onClick:K=>C(c.id),class:"expand-btn"},{default:s(()=>[...l[15]||(l[15]=[p(" 展开 ",-1)])]),_:1},8,["onClick"])]))]))),128))])):(a(),N(te,{key:1,description:"暂无反馈意见","image-size":40}))]),x.value?(a(),r("div",kl,[t(S,{type:"success",size:"large",onClick:f},{default:s(()=>[t(P,null,{default:s(()=>[t(b(he))]),_:1}),l[20]||(l[20]=p(" 通过节点 ",-1))]),_:1}),t(S,{type:"warning",size:"large",onClick:M},{default:s(()=>[t(P,null,{default:s(()=>[t(b(Pe))]),_:1}),l[21]||(l[21]=p(" 反馈意见 ",-1))]),_:1})])):F("",!0),t(ne,{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=c=>w.value=c),title:"反馈意见",width:"600px","close-on-click-modal":!1},{footer:s(()=>[t(S,{onClick:l[2]||(l[2]=c=>w.value=!1)},{default:s(()=>[...l[23]||(l[23]=[p("取消",-1)])]),_:1}),t(S,{type:"primary",onClick:A},{default:s(()=>[...l[24]||(l[24]=[p("提交反馈",-1)])]),_:1})]),default:s(()=>[t(je,{model:$},{default:s(()=>[t(xe,{required:""},{label:s(()=>[...l[22]||(l[22]=[e("div",{style:{"margin-bottom":"8px"}},"反馈及修改意见",-1)])]),default:s(()=>[t(ie,{modelValue:$.content,"onUpdate:modelValue":l[1]||(l[1]=c=>$.content=c),type:"textarea",rows:8,placeholder:"请输入反馈及修改意见...",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(ne,{modelValue:j.value,"onUpdate:modelValue":l[4]||(l[4]=c=>j.value=c),title:"历史提交记录",width:"700px"},{default:s(()=>[e("div",wl,[(a(!0),r(H,null,R(I.value,c=>(a(),N(ye,{key:c.id,submission:c,onDownload:ee},null,8,["submission"]))),128))])]),_:1},8,["modelValue"]),t(ne,{modelValue:Z.value,"onUpdate:modelValue":l[6]||(l[6]=c=>Z.value=c),title:"编辑任务文件",width:"800px","close-on-click-modal":!1,top:"5vh"},{footer:s(()=>[t(S,{onClick:l[5]||(l[5]=c=>Z.value=!1)},{default:s(()=>[...l[28]||(l[28]=[p("取消",-1)])]),_:1}),t(S,{type:"primary",onClick:G},{default:s(()=>[...l[29]||(l[29]=[p("保存",-1)])]),_:1})]),default:s(()=>[e("div",xl,[L.files.length>0?(a(),r("div",jl,[(a(!0),r(H,null,R(L.files,(c,K)=>(a(),r("div",{key:K,class:"file-item"},[e("div",Tl,[t(P,{class:"file-icon"},{default:s(()=>[t(b(se))]),_:1}),e("div",Sl,[e("div",Cl,n(c.name),1),e("div",zl,[e("span",Vl,n(c.size),1),e("span",Dl,n(c.uploadTime),1)])])]),e("div",Ml,[t(S,{link:"",type:"danger",onClick:Q=>O(K)},{default:s(()=>[t(P,null,{default:s(()=>[t(b(_e))]),_:1}),l[25]||(l[25]=p(" 删除 ",-1))]),_:1},8,["onClick"])])]))),128))])):(a(),N(te,{key:1,description:"暂无任务文件","image-size":60})),t(Te,{ref_key:"uploadRef",ref:ue,"auto-upload":!1,"on-change":m,"show-file-list":!1,multiple:"",class:"upload-area"},{default:s(()=>[t(S,{type:"primary",plain:"",class:"upload-btn"},{default:s(()=>[t(P,null,{default:s(()=>[t(b(ge))]),_:1}),l[26]||(l[26]=p(" 上传文件 ",-1))]),_:1})]),_:1},512),e("div",Bl,[t(Se,{type:"info",closable:!1,"show-icon":""},{default:s(()=>[...l[27]||(l[27]=[e("div",null,"支持的文件格式：PDF、Word、Excel、PPT、图片、压缩包等",-1),e("div",null,"单个文件大小不超过 500MB",-1)])]),_:1})])])]),_:1},8,["modelValue"]),t(ne,{modelValue:J.value,"onUpdate:modelValue":l[8]||(l[8]=c=>J.value=c),title:"编辑交付物要求",width:"800px","close-on-click-modal":!1,top:"5vh"},{footer:s(()=>[t(S,{onClick:l[7]||(l[7]=c=>J.value=!1)},{default:s(()=>[...l[35]||(l[35]=[p("取消",-1)])]),_:1}),t(S,{type:"primary",onClick:pe},{default:s(()=>[...l[36]||(l[36]=[p("保存",-1)])]),_:1})]),default:s(()=>[e("div",Fl,[e("div",Nl,[(a(!0),r(H,null,R(W.deliverables,(c,K)=>(a(),r("div",{key:K,class:"deliverable-edit-item"},[e("div",Pl,[e("span",Il,"交付物 "+n(K+1),1),t(S,{link:"",type:"danger",size:"small",onClick:Q=>me(K)},{default:s(()=>[t(P,null,{default:s(()=>[t(b(_e))]),_:1}),l[30]||(l[30]=p(" 删除 ",-1))]),_:1},8,["onClick"])]),e("div",Ul,[e("div",ql,[l[31]||(l[31]=e("label",{class:"form-label required"},"交付物名称",-1)),t(ie,{modelValue:c.name,"onUpdate:modelValue":Q=>c.name=Q,placeholder:"请输入交付物名称",class:"form-input"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Al,[l[32]||(l[32]=e("label",{class:"form-label required"},"支持格式",-1)),t(ie,{modelValue:c.formatStr,"onUpdate:modelValue":Q=>c.formatStr=Q,placeholder:"例如：PDF / Word / Excel",class:"form-input"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Hl,[l[33]||(l[33]=e("label",{class:"form-label required"},"具体要求",-1)),t(ie,{modelValue:c.requirement,"onUpdate:modelValue":Q=>c.requirement=Q,type:"textarea",rows:2,placeholder:"请输入具体要求",class:"form-input"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),t(S,{type:"primary",plain:"",onClick:re,class:"add-deliverable-btn"},{default:s(()=>[t(P,null,{default:s(()=>[t(b(ge))]),_:1}),l[34]||(l[34]=p(" 添加交付物 ",-1))]),_:1})])]),_:1},8,["modelValue"])])}}},El=Y(Rl,[["__scopeId","data-v-144d4f3a"]]),Ll={class:"history-records"},Wl={key:0,class:"loading-container"},Ol={key:1,class:"records-container"},Xl={class:"records-list"},Kl={class:"record-header"},Zl={class:"record-info"},Gl={class:"file-info"},Jl={class:"file-name-row"},Ql={class:"file-name"},Yl={class:"file-meta"},ei={class:"record-actions"},ti={class:"pagination-container"},si={__name:"HistoryRecords",props:{projectId:{type:String,required:!0}},setup(v){const B=V(!0),o=V([]),u=V(1),h=V(10),x=U(()=>{const D=(u.value-1)*h.value,k=D+h.value;return o.value.slice(D,k)});async function T(){B.value=!0;try{await new Promise(D=>setTimeout(D,500)),o.value=[{id:1,fileName:"揭榜申请-张三.pdf",fileSize:"1.2 MB",uploadTime:"2025-11-03 14:20",uploader:"张三",milestone:"揭榜征集",versionNote:"初次申请，附带个人简历和项目经验说明"},{id:2,fileName:"技术方案-AI智能客服系统.pdf",fileSize:"2.3 MB",uploadTime:"2025-11-15 10:00",uploader:"张三",milestone:"方案提交",versionNote:"初版技术方案，包含系统架构设计和技术选型"},{id:3,fileName:"技术方案-AI智能客服系统-v2.pdf",fileSize:"3.1 MB",uploadTime:"2025-11-18 14:30",uploader:"张三",milestone:"方案提交",versionNote:"补充了技术选型依据、风险评估章节和数据库ER图"}]}catch(D){z.error("加载历史记录失败"),console.error(D)}finally{B.value=!1}}function I(D){z.success(`开始下载：${D.fileName}`),console.log("下载文件：",D)}return ke(T),(D,k)=>{const C=y("el-icon"),w=y("el-tag"),$=y("el-button"),M=y("el-pagination"),A=y("el-empty");return a(),r("div",Ll,[k[6]||(k[6]=e("h2",{class:"section-title"},"历史记录",-1)),k[7]||(k[7]=e("p",{class:"section-desc"},"查看所有文件上传记录",-1)),B.value?(a(),r("div",Wl,[t(C,{class:"is-loading"},{default:s(()=>[t(b(we))]),_:1}),k[2]||(k[2]=e("span",null,"加载中...",-1))])):o.value&&o.value.length?(a(),r("div",Ol,[e("div",Xl,[(a(!0),r(H,null,R(x.value,f=>(a(),r("div",{key:f.id,class:"record-item"},[e("div",Kl,[e("div",Zl,[t(C,{class:"file-icon"},{default:s(()=>[t(b(se))]),_:1}),e("div",Gl,[e("div",Jl,[e("span",Ql,n(f.fileName),1),f.milestone?(a(),N(w,{key:0,size:"small",type:"info"},{default:s(()=>[p(n(f.milestone),1)]),_:2},1024)):F("",!0)]),e("div",Yl,[e("span",null,n(f.fileSize),1),k[3]||(k[3]=e("span",{class:"separator"},"|",-1)),e("span",null,n(f.uploadTime),1),k[4]||(k[4]=e("span",{class:"separator"},"|",-1)),e("span",null,"上传人："+n(f.uploader),1)])])]),e("div",ei,[t($,{link:"",type:"primary",onClick:_=>I(f)},{default:s(()=>[t(C,null,{default:s(()=>[t(b(ae))]),_:1}),k[5]||(k[5]=p(" 下载 ",-1))]),_:1},8,["onClick"])])])]))),128))]),e("div",ti,[t(M,{"current-page":u.value,"onUpdate:currentPage":k[0]||(k[0]=f=>u.value=f),"page-size":h.value,"onUpdate:pageSize":k[1]||(k[1]=f=>h.value=f),"page-sizes":[5,10,20,50],total:o.value.length,layout:"total, sizes, prev, pager, next, jumper",background:""},null,8,["current-page","page-size","total"])])])):(a(),N(A,{key:2,description:"暂无上传记录"}))])}}},li=Y(si,[["__scopeId","data-v-69c9cb70"]]),ii={class:"enterprise-project-manage"},ni={key:0,class:"loading-container"},oi={key:1,class:"main-container"},ai={class:"content-area"},di={__name:"ProjectManage",setup(v){const B=Ie(),o=B.params.id,u=V(!0),h=V(null),x=V([]),T=V("basic"),I=U(()=>[{title:"首页",path:"/home"},{title:"我的项目",path:"/enterprise/my-projects"},{title:"项目管理",path:null}]),D=U(()=>{if(!T.value.startsWith("milestone-"))return null;const $=T.value.replace("milestone-","");return x.value.find(M=>M.id===$)});async function k(){u.value=!0;try{await new Promise(M=>setTimeout(M,800));const $=qe;h.value=$.project,x.value=$.milestones,console.log("企业方项目数据加载成功：",{项目名称:h.value.name,里程碑数量:x.value.length})}catch($){z.error("加载项目数据失败"),console.error($)}finally{u.value=!1}}function C($){T.value=$,console.log("切换到：",$)}function w($){T.value=`milestone-${$}`,console.log("查看里程碑：",$)}return ke(()=>{k();const $=B.query.milestone;$&&(T.value=`milestone-${$}`)}),($,M)=>{const A=y("el-icon");return a(),r("div",ii,[t(Ue,{"breadcrumb-items":I.value,"unread-count":0},null,8,["breadcrumb-items"]),u.value?(a(),r("div",ni,[t(A,{class:"is-loading"},{default:s(()=>[t(b(we))]),_:1}),M[0]||(M[0]=e("span",null,"加载中...",-1))])):(a(),r("div",oi,[t(We,{project:h.value,milestones:x.value,"active-section":T.value,onSelect:C},null,8,["project","milestones","active-section"]),e("div",ai,[T.value==="basic"?(a(),N(qt,{key:0,project:h.value,milestones:x.value,onViewMilestone:w},null,8,["project","milestones"])):T.value==="bidding-management"?(a(),N(Ps,{key:1,"project-id":b(o),onRefresh:k},null,8,["project-id"])):T.value.startsWith("milestone-")?(a(),N(El,{key:2,milestone:D.value,project:h.value,onRefresh:k},null,8,["milestone","project"])):T.value==="history"?(a(),N(li,{key:3,"project-id":b(o)},null,8,["project-id"])):F("",!0)])]))])}}},pi=Y(di,[["__scopeId","data-v-4e2033d8"]]);export{pi as default};
