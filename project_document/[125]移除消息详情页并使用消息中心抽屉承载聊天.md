# [125]移除消息详情页并使用消息中心抽屉承载聊天

> 背景与目标：项目不再需要独立的“消息详情”页面，仅保留“消息中心”页面；聊天会话在桌面端继续使用“左列表 + 右侧详情”展示，在移动端改为在消息中心内通过抽屉（全屏）展示，从而移除 `messages/:type/:id` 路由与 `MessageDetail` 页面文件。

## 目录
- 1. 需求与验收标准
- 2. 影响范围与风险
- 3. Todolist（详细计划）
- 4. 执行记录（时间戳）
- 5. 审查与结论

## 1. 需求与验收标准
- 系统中不再存在“消息详情”页面文件与路由（`/messages/:type/:id`）。
- 聊天消息：
  - 桌面端：消息中心保持左侧会话列表 + 右侧聊天面板的双栏体验。
  - 移动端：点击会话在消息中心内弹出全屏抽屉展示聊天内容与输入框，不进行路由跳转。
- 评论/@：仍使用消息中心列表 + 弹窗展示详情。
- 不影响消息未读红点清除逻辑（localStorage 已读状态）。

## 2. 影响范围与风险
- 影响范围：
  - 路由配置：移除 `messages/:type/:id`。
  - 消息中心：移除对详情路由的跳转依赖，新增移动端抽屉承载聊天。
  - 文件结构：删除 `src/views/message/MessageDetail/`。
- 风险：
  - 若外部存在历史链接（书签/分享）访问 `/messages/chat/c-xxxx`，将无法命中路由（需后续如有需要可加重定向策略）。

## 3. Todolist（详细计划）
1. [x] 研究：确认当前消息详情页的路由入口与消息中心对其依赖点
2. [x] 调查：评估移除详情页后移动端聊天的替代承载方式（抽屉/弹窗）
3. [x] 计划：确定方案 A（移动端抽屉承载聊天），最小化业务逻辑改动
4. [x] 执行：在 `MessageCenter` 增加移动端聊天抽屉并替换原跳转逻辑
5. [x] 执行：移除 `messages/:type/:id` 路由，并删除 `MessageDetail` 相关页面文件
6. [x] 审查：更新 `[000]功能模块文档.md` 并创建 Git 提交记录

## 4. 执行记录（时间戳）
- 2025-12-18 15:28：确认依赖点：`src/router/modules/common.js` 存在 `messages/:type/:id`；`src/views/message/MessageCenter/index.vue` 在移动端点击聊天会 `router.push` 到该路由。
- 2025-12-18 15:28：已在 `src/views/message/MessageCenter/index.vue` 新增移动端全屏抽屉承载聊天内容与发送输入框，并替换移动端点击聊天的跳转逻辑为打开抽屉。
- 2025-12-18 15:28：已在 `src/router/modules/common.js` 移除 `messages/:type/:id` 路由配置。
- 2025-12-18 15:28：已删除 `src/views/message/MessageDetail/index.vue` 以及空目录 `src/views/message/MessageDetail/`。
- 2025-12-18 15:29：已更新 `project_document/[000]功能模块文档.md` 记录本次“移除消息详情页 + 移动端抽屉承载聊天”的变更说明。

## 5. 审查与结论
- 待完成后补充：变更清单、人工验证要点、潜在重定向需求与后续迭代建议。
