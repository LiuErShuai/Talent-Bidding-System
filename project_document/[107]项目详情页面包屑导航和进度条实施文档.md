# 项目详情页面包屑导航和进度条实施文档

## 📋 文档信息

- **文档编号**: [107]
- **文档名称**: 项目详情页面包屑导航和进度条实施文档
- **创建日期**: 2025-01-XX
- **最后更新**: 2025-01-XX
- **实施状态**: ✅ 已完成

---

## 一、需求概述

### 1.1 实施目标

在项目详情页面（`/views/project/Detail/index.vue`）添加以下功能：

1. **面包屑导航**：在页面顶部添加导航路径，方便用户快速返回上级页面
2. **项目进度条**：展示项目7个阶段的进度状态，包括时间信息

### 1.2 实施范围

- **文件路径**: `Talent-Bidding-System-master/src/views/project/Detail/index.vue`
- **功能模块**: 
  - 面包屑导航组件
  - 项目进度条组件（7个阶段）

---

## 二、功能设计

### 2.1 面包屑导航设计

#### 2.1.1 导航路径

```
首页 > 项目大厅 > 项目详情
```

#### 2.1.2 样式要求

- **位置**: 在 `.main-content` 内部，`.content-row` 之前
- **字体大小**: 14px
- **链接颜色**: `#4a7cdd`（深蓝色）
- **文本颜色**: `#666`（灰色）
- **底部间距**: 20px
- **链接样式**: 鼠标悬停时显示下划线

#### 2.1.3 HTML结构

```vue
<!-- ========== 开始：面包屑导航部分 (BREADCRUMB_NAVIGATION_SECTION) ========== -->
<div class="breadcrumb-section mb20">
  <router-link class="color-deep-blue" to="/home">首页 &gt; </router-link>
  <router-link class="color-deep-blue" to="/projects">项目大厅 &gt; </router-link>
  <span>项目详情</span>
</div>
<!-- ========== 结束：面包屑导航部分 (BREADCRUMB_NAVIGATION_SECTION) ========== -->
```

---

### 2.2 项目进度条设计

#### 2.2.1 项目阶段定义

根据需求文档，项目流程包含 **7个阶段**（不包含"项目发布"阶段，因为不通过审核的项目不会展示）：

| 序号 | 阶段名称 | 阶段代码 | 说明 |
|------|---------|---------|------|
| 1 | 揭榜征集 | `BIDDING` | 学生查看并提交揭榜申请 |
| 2 | 方案提交 | `PROPOSAL` | 揭榜成功后提交实施方案 |
| 3 | 项目执行 | `EXECUTION` | 项目开发执行阶段 |
| 4 | 中期答辩 | `MIDTERM` | 项目周期过半进行中期答辩 |
| 5 | 成果提交 | `DELIVERY` | 提交最终成果 |
| 6 | 成果评审 | `REVIEW` | 企业+专家联合评审 |
| 7 | 结项公示 | `ANNOUNCEMENT` | 结果公示、协议签订、支付 |

#### 2.2.2 阶段状态定义

每个阶段有三种状态：

| 状态 | 类名 | 图标 | 说明 |
|------|------|------|------|
| 已完成 | `ant-steps-item-finish` | ✓ (白色对勾) | 阶段已完成 |
| 进行中 | `ant-steps-item-process` | ● (蓝色圆点) | 当前正在进行的阶段 |
| 等待中 | `ant-steps-item-wait` | ○ (灰色圆点) | 尚未开始的阶段 |

#### 2.2.3 时间信息展示

每个阶段需要展示时间信息，格式如下：

- **已完成阶段**: 显示完成日期，如 `2025-11-03`
- **进行中阶段**: 显示剩余时间，如 `剩余5天`
- **等待中阶段**: 显示预计时间，如 `预计7天`

#### 2.2.4 位置要求

- **位置**: 在 `.content-row` 之后，`.tab-section` 之前
- **样式**: 参考静态页面的 ant-steps 风格
- **布局**: 水平布局，垂直标签

#### 2.2.5 HTML结构

```vue
<!-- ========== 开始：项目进度条部分 (PROJECT_STEPS_PROGRESS_SECTION) ========== -->
<div class="project-steps-container mt15">
  <div class="ant-steps ant-steps-horizontal project-steps ant-steps-label-vertical">
    <!-- 步骤1：揭榜征集 -->
    <div 
      v-for="(step, index) in projectSteps" 
      :key="step.code"
      :class="[
        'ant-steps-item',
        'ant-steps-item-custom',
        {
          'ant-steps-item-finish': step.status === 'finish',
          'ant-steps-item-process': step.status === 'process',
          'ant-steps-item-wait': step.status === 'wait'
        }
      ]"
    >
      <div class="ant-steps-item-container">
        <div class="ant-steps-item-tail"/>
        <div class="ant-steps-item-icon">
          <span class="ant-steps-icon">
            <el-icon v-if="step.status === 'finish'" class="icon-check"><Check /></el-icon>
            <div v-else class="circle-icon"/>
          </span>
        </div>
        <div class="ant-steps-item-content">
          <div class="ant-steps-item-title">{{ step.title }}</div>
          <div v-if="step.timeInfo" class="ant-steps-item-description">
            <span class="color-grey-6 font-12">{{ step.timeInfo }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ========== 结束：项目进度条部分 (PROJECT_STEPS_PROGRESS_SECTION) ========== -->
```

---

## 三、数据结构设计

### 3.1 项目阶段数据模型

```javascript
// 项目阶段数据结构
const projectSteps = [
  {
    code: 'BIDDING',           // 阶段代码
    title: '揭榜征集',          // 阶段名称
    status: 'finish',          // 状态: 'finish' | 'process' | 'wait'
    timeInfo: '2025-11-03',    // 时间信息（已完成显示日期，进行中显示剩余时间，等待中显示预计时间）
    startDate: '2025-11-01',   // 开始日期（预留）
    endDate: '2025-11-15',     // 结束日期（预留）
    deadline: '2025-11-15'     // 截止日期（预留）
  },
  // ... 其他阶段
]
```

### 3.2 模拟数据（当前阶段）

**当前展示阶段**: 选择"方案提交"阶段作为进行中状态，用于静态原型展示

```javascript
// 模拟数据 - 方案提交阶段进行中
const mockProjectSteps = [
  {
    code: 'BIDDING',
    title: '揭榜征集',
    status: 'finish',
    timeInfo: '2025-11-03'
  },
  {
    code: 'PROPOSAL',
    title: '方案提交',
    status: 'process',  // 当前进行中
    timeInfo: '剩余5天'
  },
  {
    code: 'EXECUTION',
    title: '项目执行',
    status: 'wait',
    timeInfo: '预计30天'
  },
  {
    code: 'MIDTERM',
    title: '中期答辩',
    status: 'wait',
    timeInfo: '预计7天'
  },
  {
    code: 'DELIVERY',
    title: '成果提交',
    status: 'wait',
    timeInfo: '预计5天'
  },
  {
    code: 'REVIEW',
    title: '成果评审',
    status: 'wait',
    timeInfo: '预计7天'
  },
  {
    code: 'ANNOUNCEMENT',
    title: '结项公示',
    status: 'wait',
    timeInfo: '预计7天'
  }
]
```

---

## 四、代码实现

### 4.1 模板部分（Template）

#### 4.1.1 面包屑导航

在 `.main-content` 开始后，`.content-row` 之前添加：

```vue
<div class="main-content">
  <!-- ========== 开始：面包屑导航部分 (BREADCRUMB_NAVIGATION_SECTION) ========== -->
  <div class="breadcrumb-section mb20">
    <router-link class="color-deep-blue" to="/home">首页 &gt; </router-link>
    <router-link class="color-deep-blue" to="/projects">项目大厅 &gt; </router-link>
    <span>项目详情</span>
  </div>
  <!-- ========== 结束：面包屑导航部分 (BREADCRUMB_NAVIGATION_SECTION) ========== -->
  
  <!-- 双栏布局 -->
  <div class="content-row">
    <!-- ... 原有内容 ... -->
  </div>
  
  <!-- ========== 开始：项目进度条部分 (PROJECT_STEPS_PROGRESS_SECTION) ========== -->
  <div class="project-steps-container mt15">
    <div class="ant-steps ant-steps-horizontal project-steps ant-steps-label-vertical">
      <div 
        v-for="(step, index) in projectSteps" 
        :key="step.code"
        :class="[
          'ant-steps-item',
          'ant-steps-item-custom',
          {
            'ant-steps-item-finish': step.status === 'finish',
            'ant-steps-item-process': step.status === 'process',
            'ant-steps-item-wait': step.status === 'wait'
          }
        ]"
      >
        <div class="ant-steps-item-container">
          <div class="ant-steps-item-tail"/>
          <div class="ant-steps-item-icon">
            <span class="ant-steps-icon">
              <el-icon v-if="step.status === 'finish'" class="icon-check"><Check /></el-icon>
              <div v-else class="circle-icon"/>
            </span>
          </div>
          <div class="ant-steps-item-content">
            <div class="ant-steps-item-title">{{ step.title }}</div>
            <div v-if="step.timeInfo" class="ant-steps-item-description">
              <span class="color-grey-6 font-12">{{ step.timeInfo }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ========== 结束：项目进度条部分 (PROJECT_STEPS_PROGRESS_SECTION) ========== -->
  
  <!-- 标签页切换 -->
  <div class="tab-section">
    <!-- ... 原有内容 ... -->
  </div>
</div>
```

### 4.2 脚本部分（Script）

#### 4.2.1 导入依赖

```javascript
import { Check } from '@element-plus/icons-vue'
```

#### 4.2.2 数据定义

```javascript
// 项目阶段数据（当前使用模拟数据，后续接入后端）
const projectSteps = ref([
  {
    code: 'BIDDING',
    title: '揭榜征集',
    status: 'finish',
    timeInfo: '2025-11-03',
    startDate: '2025-11-01',
    endDate: '2025-11-15',
    deadline: '2025-11-15'
  },
  {
    code: 'PROPOSAL',
    title: '方案提交',
    status: 'process',  // 当前进行中
    timeInfo: '剩余5天',
    startDate: '2025-11-16',
    endDate: '2025-11-21',
    deadline: '2025-11-21'
  },
  {
    code: 'EXECUTION',
    title: '项目执行',
    status: 'wait',
    timeInfo: '预计30天',
    startDate: null,
    endDate: null,
    deadline: null
  },
  {
    code: 'MIDTERM',
    title: '中期答辩',
    status: 'wait',
    timeInfo: '预计7天',
    startDate: null,
    endDate: null,
    deadline: null
  },
  {
    code: 'DELIVERY',
    title: '成果提交',
    status: 'wait',
    timeInfo: '预计5天',
    startDate: null,
    endDate: null,
    deadline: null
  },
  {
    code: 'REVIEW',
    title: '成果评审',
    status: 'wait',
    timeInfo: '预计7天',
    startDate: null,
    endDate: null,
    deadline: null
  },
  {
    code: 'ANNOUNCEMENT',
    title: '结项公示',
    status: 'wait',
    timeInfo: '预计7天',
    startDate: null,
    endDate: null,
    deadline: null
  }
])

// TODO: 后续接入后端API获取真实数据
// const loadProjectSteps = async () => {
//   try {
//     const response = await getProjectSteps(route.params.id)
//     projectSteps.value = formatProjectSteps(response.data)
//   } catch (error) {
//     console.error('加载项目进度失败:', error)
//   }
// }
```

#### 4.2.3 工具函数（预留）

```javascript
/**
 * 格式化项目阶段数据
 * @param {Object} data - 后端返回的项目数据
 * @returns {Array} 格式化后的阶段数组
 */
const formatProjectSteps = (data) => {
  // TODO: 根据后端数据结构格式化阶段数据
  // 计算每个阶段的状态和时间信息
  return projectSteps.value
}

/**
 * 计算剩余时间
 * @param {String} deadline - 截止日期
 * @returns {String} 剩余时间文本
 */
const calculateRemainingTime = (deadline) => {
  if (!deadline) return ''
  const now = new Date()
  const end = new Date(deadline)
  const diff = Math.ceil((end - now) / (1000 * 60 * 60 * 24))
  if (diff > 0) {
    return `剩余${diff}天`
  } else if (diff === 0) {
    return '今天截止'
  } else {
    return `已逾期${Math.abs(diff)}天`
  }
}
```

### 4.3 样式部分（Style）

#### 4.3.1 面包屑导航样式

```css
/* ========== 开始：面包屑导航样式 (BREADCRUMB_NAVIGATION_STYLES) ========== */
.breadcrumb-section {
  font-size: 14px;
  color: #666;
}

.mb20 {
  margin-bottom: 20px;
}

.color-deep-blue {
  color: #4a7cdd;
  text-decoration: none;
}

.color-deep-blue:hover {
  text-decoration: underline;
}
/* ========== 结束：面包屑导航样式 (BREADCRUMB_NAVIGATION_STYLES) ========== */
```

#### 4.3.2 项目进度条样式

```css
/* ========== 开始：项目进度条样式 (PROJECT_STEPS_PROGRESS_STYLES) ========== */
.project-steps-container {
  margin-top: 15px;
  margin-bottom: 30px;
  background: white;
  border-radius: 8px;
  padding: 24px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
}

.mt15 {
  margin-top: 15px;
}

.ant-steps {
  display: flex;
  gap: 0;
}

.ant-steps-horizontal {
  flex-direction: row;
}

.ant-steps-label-vertical .ant-steps-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.ant-steps-item {
  position: relative;
}

.ant-steps-item-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

.ant-steps-item-tail {
  position: absolute;
  left: 50%;
  top: 16px;
  width: 100%;
  height: 2px;
  background: #e8e8e8;
  z-index: 0;
}

.ant-steps-item:last-child .ant-steps-item-tail {
  display: none;
}

.ant-steps-item-icon {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  z-index: 1;
  position: relative;
}

.ant-steps-item-finish .ant-steps-item-icon {
  background: #4a7cdd;
  color: white;
}

.ant-steps-item-finish .ant-steps-item-tail {
  background: #4a7cdd;
}

.ant-steps-item-process .ant-steps-item-icon {
  background: white;
  border: 2px solid #4a7cdd;
}

.ant-steps-item-wait .ant-steps-item-icon {
  background: white;
  border: 2px solid #e8e8e8;
}

.ant-steps-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-check {
  font-size: 18px;
}

.circle-icon {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #e8e8e8;
}

.ant-steps-item-process .circle-icon {
  background: #4a7cdd;
}

.ant-steps-item-content {
  margin-top: 12px;
  text-align: center;
}

.ant-steps-item-title {
  font-size: 14px;
  color: #333;
  margin-bottom: 4px;
}

.ant-steps-item-description {
  font-size: 12px;
  color: #999;
}

.color-grey-6 {
  color: #999;
}

.font-12 {
  font-size: 12px;
}
/* ========== 结束：项目进度条样式 (PROJECT_STEPS_PROGRESS_STYLES) ========== */
```

---

## 五、后端接口预留

### 5.1 接口设计（待实现）

#### 5.1.1 获取项目进度信息

```javascript
/**
 * 获取项目进度信息
 * @param {String} projectId - 项目ID
 * @returns {Promise} 项目进度数据
 */
export const getProjectSteps = async (projectId) => {
  // TODO: 实现API调用
  // return await request.get(`/api/projects/${projectId}/steps`)
}
```

#### 5.1.2 接口返回数据结构

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "projectId": "202511080001",
    "currentStage": "PROPOSAL",
    "stages": [
      {
        "code": "BIDDING",
        "title": "揭榜征集",
        "status": "finish",
        "startDate": "2025-11-01",
        "endDate": "2025-11-15",
        "deadline": "2025-11-15",
        "completedAt": "2025-11-03"
      },
      {
        "code": "PROPOSAL",
        "title": "方案提交",
        "status": "process",
        "startDate": "2025-11-16",
        "endDate": "2025-11-21",
        "deadline": "2025-11-21",
        "remainingDays": 5
      },
      // ... 其他阶段
    ]
  }
}
```

### 5.2 数据格式化函数（待实现）

```javascript
/**
 * 格式化后端返回的项目阶段数据
 * @param {Object} apiData - 后端返回的数据
 * @returns {Array} 格式化后的阶段数组
 */
const formatProjectSteps = (apiData) => {
  const { stages, currentStage } = apiData
  const now = new Date()
  
  return stages.map(stage => {
    let status = 'wait'
    let timeInfo = ''
    
    // 判断状态
    if (stage.status === 'finish') {
      status = 'finish'
      timeInfo = stage.completedAt || stage.endDate
    } else if (stage.code === currentStage) {
      status = 'process'
      if (stage.remainingDays !== undefined) {
        timeInfo = stage.remainingDays > 0 
          ? `剩余${stage.remainingDays}天` 
          : '今天截止'
      } else if (stage.deadline) {
        const deadline = new Date(stage.deadline)
        const diff = Math.ceil((deadline - now) / (1000 * 60 * 60 * 24))
        timeInfo = diff > 0 ? `剩余${diff}天` : '已逾期'
      }
    } else {
      status = 'wait'
      if (stage.estimatedDays) {
        timeInfo = `预计${stage.estimatedDays}天`
      }
    }
    
    return {
      code: stage.code,
      title: stage.title,
      status,
      timeInfo,
      startDate: stage.startDate,
      endDate: stage.endDate,
      deadline: stage.deadline
    }
  })
}
```

---

## 六、实施步骤

### 6.1 第一步：添加面包屑导航

1. 在模板中添加面包屑导航HTML结构
2. 添加对应的CSS样式
3. 测试导航链接功能

### 6.2 第二步：添加项目进度条

1. 在模板中添加进度条HTML结构
2. 在脚本中定义项目阶段数据（模拟数据）
3. 导入必要的图标组件（Check）
4. 添加对应的CSS样式
5. 测试进度条显示效果

### 6.3 第三步：预留后端接口

1. 添加数据格式化函数（注释形式）
2. 添加API调用函数（注释形式）
3. 在 `onMounted` 中预留数据加载逻辑（注释形式）

### 6.4 第四步：测试验证

1. 测试面包屑导航链接跳转
2. 测试进度条显示效果
3. 测试不同阶段状态的显示
4. 测试时间信息的显示

---

## 七、注意事项

### 7.1 代码标注

- 使用明确的注释标记代码块，方便后续维护
- 面包屑导航：`BREADCRUMB_NAVIGATION_SECTION`
- 项目进度条：`PROJECT_STEPS_PROGRESS_SECTION`

### 7.2 数据预留

- 当前使用模拟数据，但数据结构要与后端接口保持一致
- 预留数据格式化函数，方便后续接入后端

### 7.3 样式一致性

- 参考静态页面的样式设计
- 保持与现有页面风格一致
- 主色调使用 `#4a7cdd`

### 7.4 响应式设计

- 当前不考虑移动端布局
- 后续如需支持移动端，需要调整进度条布局为垂直方向

---

## 八、后续优化建议

### 8.1 功能增强

1. **点击阶段跳转**：点击已完成或进行中的阶段，可跳转到对应的详情页面
2. **阶段详情弹窗**：点击阶段显示该阶段的详细信息
3. **进度动画**：添加进度条动画效果，提升用户体验

### 8.2 性能优化

1. **数据缓存**：项目进度数据可进行缓存，减少API调用
2. **懒加载**：进度条组件可考虑懒加载

### 8.3 用户体验

1. **加载状态**：数据加载时显示加载动画
2. **错误处理**：API调用失败时显示友好的错误提示
3. **空状态**：无进度数据时显示空状态提示

---

## 九、测试清单

### 9.1 功能测试

- [ ] 面包屑导航显示正确
- [ ] 面包屑导航链接跳转正常
- [ ] 项目进度条显示7个阶段
- [ ] 阶段状态显示正确（已完成/进行中/等待中）
- [ ] 时间信息显示正确
- [ ] 进度条样式符合设计

### 9.2 兼容性测试

- [ ] Chrome浏览器正常显示
- [ ] Firefox浏览器正常显示
- [ ] Edge浏览器正常显示

### 9.3 代码质量

- [ ] 代码注释完整
- [ ] 代码结构清晰
- [ ] 无控制台错误
- [ ] 无样式冲突

---

## 十、附录

### 10.1 相关文件

- **实施文件**: `Talent-Bidding-System-master/src/views/project/Detail/index.vue`
- **参考文件**: `testcopy2/osredm-task-detail/src/components/TaskDetail.vue`
- **需求文档**: `Talent-Bidding-System-master/project_document/[000]需求分析文档.md`
- **设计文档**: `Talent-Bidding-System-master/project_document/[001]原型设计文档.md`

### 10.2 参考资料

- Element Plus Steps组件文档
- Ant Design Steps组件设计规范
- 静态页面设计稿

---

## 十一、更新日志

| 日期 | 版本 | 更新内容 | 更新人 |
|------|------|---------|--------|
| 2025-01-XX | v1.0 | 初始版本，完成面包屑导航和进度条实施 | - |

---

**文档结束**

