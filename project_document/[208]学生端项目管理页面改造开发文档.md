# [208] 学生端项目管理页面改造开发文档

**文档编号**: 208
**创建日期**: 2026-01-21
**作者**: Claude
**页面路径**: `src/views/project/Manage/index.vue`
**状态**: 改造方案设计
**关联文档**: [207]学生端项目管理页面实现分析.md

---

## 一、改造概述

### 1.1 改造背景

当前学生端项目管理页面采用左右分栏布局，左侧为快捷操作面板，右侧为内容区。虽然功能完整，但存在以下问题：

1. **布局复杂**：左右分栏在小屏设备上体验不佳
2. **信息密度高**：快捷面板占用空间，内容区显得拥挤
3. **导航不直观**：需要滚动查找里程碑，缺少全局视图
4. **视觉风格传统**：缺少现代感和简约美

### 1.2 改造目标

**核心目标**：打造简约、直观、高效的项目管理体验

**具体目标**：
1. ✅ **简化布局**：取消左侧导航栏，采用垂直单栏布局
2. ✅ **增强导航**：使用横向进度条展示所有里程碑，一目了然
3. ✅ **优化交互**：点击进度条节点切换里程碑详情，减少滚动
4. ✅ **提升视觉**：采用简约风格，减少视觉噪音，突出核心内容
5. ✅ **响应式优化**：更好地适配移动端和平板设备

### 1.3 设计理念

**Less is More（少即是多）**：
- 去除冗余元素，保留核心功能
- 扁平化设计，减少层级
- 留白设计，提升呼吸感

**Focus on Task（聚焦任务）**：
- 突出当前里程碑
- 快速切换，减少干扰
- 信息分层，按需展示

**Visual Hierarchy（视觉层次）**：
- 清晰的信息层级
- 合理的视觉引导
- 统一的设计语言

---

## 二、新布局结构设计

### 2.1 整体布局

采用**垂直单栏布局**，从上到下依次为：

```
┌────────────────────────────────────────────────────┐
│  固定顶部导航栏（ProjectManageHeader）             │
│  面包屑: 首页 > 我的项目 > 项目管理                │
└────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────┐
│  项目信息卡片（ProjectInfoCard）                   │
│  • 项目名称 + 状态                                 │
│  • 核心信息（悬赏金额、周期、发布方）              │
│  • 项目进度统计                                    │
└────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────┐
│  里程碑进度条（MilestoneProgressBar）              │
│  ●━━━━●━━━━●━━━━○━━━━○                            │
│  M1   M2   M3   M4   M5                            │
│  已完成 已完成 进行中 待开始 待开始                │
└────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────┐
│  里程碑详情区（MilestoneDetailPanel）              │
│  [当前选中的里程碑详细内容]                        │
│  • 里程碑信息                                      │
│  • 交付物要求                                      │
│  • 我的提交                                        │
│  • 发布方反馈                                      │
└────────────────────────────────────────────────────┘
```

### 2.2 布局特点

**垂直流式布局**：
- 最大宽度：1200px（居中显示）
- 内边距：24px（左右）
- 组件间距：20px（上下）
- 背景色：#f5f7fb（浅灰）

**响应式断点**：
- 大屏（>1200px）：最大宽度 1200px
- 中屏（768px-1200px）：宽度 100%，内边距 16px
- 小屏（<768px）：宽度 100%，内边距 12px

**视觉层次**：
- 顶部导航：固定定位，z-index: 1000
- 项目信息卡片：白色背景，轻微阴影
- 进度条：白色背景，居中对齐
- 详情区：白色背景，圆角卡片

### 2.3 与旧版对比

| 维度 | 旧版设计 | 新版设计 |
|------|---------|---------|
| 布局模式 | 左右分栏 | 垂直单栏 |
| 导航方式 | 滚动查找 | 点击切换 |
| 快捷面板 | 左侧固定 | 取消 |
| 里程碑展示 | 时间线列表 | 横向进度条 + 详情面板 |
| 信息密度 | 高（所有里程碑同时展示） | 低（一次展示一个里程碑） |
| 视觉风格 | 传统卡片堆叠 | 简约扁平 |
| 移动端适配 | 上下布局 | 原生垂直布局 |

---

## 三、核心组件设计

### 3.1 项目信息卡片（复用 ProjectOverview）

**功能定位**：
- 复用现有的 `ProjectOverview.vue` 组件
- 仅需在标题前添加状态标签
- 保持原有布局和样式不变

**布局设计**：

```
┌──────────────────────────────────────────────────┐
│  [状态] 项目名称                                 │
│  ● 进行中  AI智能客服系统开发                    │
├──────────────────────────────────────────────────┤
│  发布方：XX科技 | 领域：人工智能 | 截止：已截止  │
│  | 奖金：￥15,000                                 │
├──────────────────────────────────────────────────┤
│  项目描述                                        │
│  为平台构建基于NLP的智能客服系统...              │
└──────────────────────────────────────────────────┘
```

**修改要点**：

1. **在标题前添加状态标签**：
   - 进行中：蓝色圆点 + 蓝色文字
   - 已完成：绿色圆点 + 绿色文字
   - 待开始：灰色圆点 + 灰色文字

2. **修改模板**：
```vue
<!-- 标题行：添加状态标签 -->
<div class="title-row">
  <div class="status-indicator" :class="`status-${project?.status}`">
    <span class="status-dot"></span>
    <span class="status-text">{{ statusText }}</span>
  </div>
  <h2 class="project-title">{{ project?.name || '项目名称' }}</h2>
</div>
```

3. **添加计算属性**：
```javascript
const statusText = computed(() => {
  const map = {
    'pending': '待开始',
    'in-progress': '进行中',
    'completed': '已完成'
  }
  return map[props.project?.status] || '未知'
})
```

4. **添加样式**：
```css
.title-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.status-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

/* 进行中 - 蓝色 */
.status-in-progress .status-dot {
  background: #1890ff;
  box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.2);
}

.status-in-progress .status-text {
  color: #1890ff;
}

/* 已完成 - 绿色 */
.status-completed .status-dot {
  background: #52c41a;
  box-shadow: 0 0 0 3px rgba(82, 196, 26, 0.2);
}

.status-completed .status-text {
  color: #52c41a;
}

/* 待开始 - 灰色 */
.status-pending .status-dot {
  background: #d9d9d9;
}

.status-pending .status-text {
  color: #909399;
}
```

**Props 接口**（保持不变）：
```javascript
props: {
  project: {
    type: Object,
    default: () => ({})
  },
  canEdit: {
    type: Boolean,
    default: false
  }
}
```

**数据结构**（新增 status 字段）：
```javascript
{
  name: '项目名称',
  status: 'in-progress', // pending/in-progress/completed（新增）
  publisher: 'XX科技有限公司',
  category: '人工智能',
  endDate: '2026-01-30',
  reward: 15000,
  description: '项目描述...'
}
```

### 3.2 里程碑进度条（MilestoneProgressBar）

**功能定位**：
- 横向展示所有里程碑
- 可视化展示项目进度
- 点击节点切换里程碑详情
- 突出显示当前选中的里程碑

**布局设计**：

```
┌──────────────────────────────────────────────────┐
│              里程碑进度                          │
├──────────────────────────────────────────────────┤
│                                                  │
│  ●━━━━━●━━━━━●━━━━━○━━━━━○                      │
│  │      │      │      │      │                   │
│  M1     M2     M3     M4     M5                  │
│  需求   技术   系统   测试   上线                │
│  分析   选型   开发   验收   部署                │
│  ✓      ✓      ⏳     ○      ○                   │
│  已完成  已完成  进行中 待开始 待开始             │
│                                                  │
└──────────────────────────────────────────────────┘
```

**视觉设计**：

**节点样式**：
- 已完成：绿色实心圆 ● + 绿色连接线
- 进行中：蓝色实心圆 ● + 蓝色脉动动画
- 待开始：灰色空心圆 ○ + 灰色虚线
- 当前选中：放大 + 外圈光晕

**连接线样式**：
- 已完成段：绿色实线（#52c41a）
- 进行中段：蓝色实线（#1890ff）
- 待开始段：灰色虚线（#d9d9d9）

**交互效果**：
- hover：节点放大 1.2 倍 + 显示 tooltip
- click：切换到对应里程碑详情
- 当前选中：节点放大 1.3 倍 + 外圈光晕

**实现要点**：
```javascript
// 节点状态计算
function getNodeStatus(milestone, currentMilestoneId) {
  if (milestone.id === currentMilestoneId) return 'active'
  if (milestone.status === 'completed') return 'completed'
  if (milestone.status === 'in-progress') return 'in-progress'
  return 'pending'
}

// 连接线状态计算
function getLineStatus(fromMilestone, toMilestone) {
  if (fromMilestone.status === 'completed' &&
      toMilestone.status === 'completed') {
    return 'completed'
  }
  if (fromMilestone.status === 'completed' &&
      toMilestone.status === 'in-progress') {
    return 'in-progress'
  }
  return 'pending'
}
```

**Props 接口**：
```javascript
props: {
  milestones: {
    type: Array,
    required: true
  },
  currentMilestoneId: {
    type: String,
    required: true
  }
}

emits: ['change']
```

**响应式设计**：
- 大屏（>1200px）：横向展示，节点间距 150px
- 中屏（768px-1200px）：横向展示，节点间距 100px
- 小屏（<768px）：横向滚动，节点间距 80px

### 3.3 里程碑详情面板（MilestoneDetailPanel）

**功能定位**：
- 展示当前选中里程碑的详细信息
- 提供交付物上传功能
- 显示提交记录和审核反馈
- 支持快速切换到上一个/下一个里程碑

**布局设计**：

```
┌──────────────────────────────────────────────────┐
│  [← 上一个]  里程碑3：系统开发  [下一个 →]      │
├──────────────────────────────────────────────────┤
│  里程碑信息                                      │
│  • 状态：进行中                                  │
│  • 计划完成：2025-12-15                          │
│  • 剩余天数：15天                                │
│  • 描述：完成系统核心功能开发...                 │
├──────────────────────────────────────────────────┤
│  交付物要求 ▼                                    │
│  1. 需求分析文档 [PDF/Word]                      │
│     - 包含业务流程图、用例图...                  │
│  2. 系统架构图 [图片/PDF]                        │
│     - 展示系统整体架构...                        │
├──────────────────────────────────────────────────┤
│  我的提交 ▼                                      │
│  [提交记录列表]                                  │
│  [上传/更新文件] 按钮                            │
├──────────────────────────────────────────────────┤
│  发布方反馈 ▼                                    │
│  [反馈列表]                                      │
└──────────────────────────────────────────────────┘
```

**实现要点**：

1. **切换按钮**：
   - 左右两侧显示切换按钮
   - 第一个里程碑隐藏"上一个"按钮
   - 最后一个里程碑隐藏"下一个"按钮
   - 支持键盘快捷键（← →）

2. **折叠区块**：
   - 交付物要求、我的提交、发布方反馈独立折叠
   - 默认全部展开
   - 使用 `<el-collapse>` 组件

3. **过渡动画**：
   - 切换里程碑时使用淡入淡出动画
   - 使用 `<transition>` 组件
   - 动画时长：300ms

**Props 接口**：
```javascript
props: {
  milestone: {
    type: Object,
    required: true
  },
  hasPrev: {
    type: Boolean,
    default: false
  },
  hasNext: {
    type: Boolean,
    default: false
  }
}

emits: ['prev', 'next', 'upload', 'viewSubmission', 'downloadSubmission']
```

---

## 四、交互流程设计

### 4.1 页面初始化流程

```
用户访问页面
    ↓
显示 loading 状态
    ↓
加载项目数据和里程碑数据
    ↓
计算项目进度（已完成里程碑数 / 总里程碑数）
    ↓
确定默认显示的里程碑
    ├─ 优先显示进行中的里程碑
    ├─ 如果没有进行中的，显示第一个待开始的
    └─ 如果全部完成，显示最后一个
    ↓
渲染页面
    ├─ 项目信息卡片
    ├─ 里程碑进度条（高亮当前里程碑）
    └─ 里程碑详情面板
```

### 4.2 切换里程碑流程

**方式一：点击进度条节点**

```
用户点击进度条节点
    ↓
触发 change 事件，传递里程碑 ID
    ↓
更新 currentMilestoneId 状态
    ↓
进度条更新高亮节点
    ↓
详情面板淡出（opacity: 0）
    ↓
加载新里程碑数据（如果需要）
    ↓
详情面板淡入（opacity: 1）
    ↓
滚动到详情面板顶部（平滑滚动）
```

**方式二：点击切换按钮**

```
用户点击"上一个"或"下一个"按钮
    ↓
计算目标里程碑 ID
    ├─ 上一个：当前索引 - 1
    └─ 下一个：当前索引 + 1
    ↓
触发切换流程（同方式一）
```

**方式三：键盘快捷键**

```
用户按下 ← 或 → 键
    ↓
判断是否在输入框中（如果是，不响应）
    ↓
触发切换流程（同方式一）
```

### 4.3 上传文件流程

```
用户点击"上传/更新文件"按钮
    ↓
打开上传对话框
    ├─ 显示当前里程碑信息
    ├─ 显示交付物要求
    └─ 提供文件选择和版本说明输入
    ↓
用户选择文件并填写版本说明
    ↓
点击"确认上传"
    ↓
验证文件和版本说明
    ↓
显示上传进度条
    ↓
调用上传 API
    ↓
上传成功
    ├─ 关闭对话框
    ├─ 显示成功消息
    ├─ 刷新当前里程碑数据
    ├─ 更新进度条（如果进度变化）
    └─ 更新项目信息卡片（如果进度变化）
```

### 4.4 查看提交详情流程

```
用户点击提交记录的"查看详情"按钮
    ↓
打开查看详情对话框
    ├─ 显示文件信息
    ├─ 显示版本说明
    └─ 显示审核结果（如果有）
    ↓
用户可以下载文件或关闭对话框
```

---

## 五、技术实现方案

### 5.1 主容器组件实现

**文件**: `src/views/project/Manage/index.vue`

**核心状态**:
```javascript
const loading = ref(true)
const project = ref(null)
const milestones = ref([])
const currentMilestoneId = ref(null)  // 当前选中的里程碑ID
const uploadDialogVisible = ref(false)
const viewDialogVisible = ref(false)
const currentSubmission = ref(null)
const uploadForm = reactive({
  file: null,
  versionNote: ''
})
```

**计算属性**:
```javascript
// 当前里程碑对象
const currentMilestone = computed(() => {
  return milestones.value.find(m => m.id === currentMilestoneId.value)
})

// 当前里程碑索引
const currentIndex = computed(() => {
  return milestones.value.findIndex(m => m.id === currentMilestoneId.value)
})

// 是否有上一个里程碑
const hasPrev = computed(() => currentIndex.value > 0)

// 是否有下一个里程碑
const hasNext = computed(() => currentIndex.value < milestones.value.length - 1)
```

**方法实现**:
```javascript
// 初始化：确定默认显示的里程碑
function initCurrentMilestone() {
  // 优先显示进行中的里程碑
  let target = milestones.value.find(m => m.status === 'in-progress')

  // 如果没有进行中的，显示第一个待开始的
  if (!target) {
    target = milestones.value.find(m => m.status === 'pending')
  }

  // 如果全部完成，显示最后一个
  if (!target) {
    target = milestones.value[milestones.value.length - 1]
  }

  currentMilestoneId.value = target?.id || milestones.value[0]?.id
}

// 切换里程碑
function handleMilestoneChange(milestoneId) {
  currentMilestoneId.value = milestoneId

  // 平滑滚动到详情面板
  nextTick(() => {
    const element = document.querySelector('.milestone-detail-panel')
    element?.scrollIntoView({ behavior: 'smooth', block: 'start' })
  })
}

// 上一个里程碑
function handlePrev() {
  if (hasPrev.value) {
    const prevMilestone = milestones.value[currentIndex.value - 1]
    handleMilestoneChange(prevMilestone.id)
  }
}

// 下一个里程碑
function handleNext() {
  if (hasNext.value) {
    const nextMilestone = milestones.value[currentIndex.value + 1]
    handleMilestoneChange(nextMilestone.id)
  }
}

// 键盘快捷键
function handleKeydown(event) {
  // 如果在输入框中，不响应
  if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
    return
  }

  if (event.key === 'ArrowLeft') {
    handlePrev()
  } else if (event.key === 'ArrowRight') {
    handleNext()
  }
}

// 生命周期
onMounted(() => {
  fetchManageData()
  window.addEventListener('keydown', handleKeydown)
})

onUnmounted(() => {
  window.removeEventListener('keydown', handleKeydown)
})
```

**模板结构**:
```vue
<template>
  <div class="project-manage-new">
    <!-- 固定顶部导航栏 -->
    <project-manage-header :breadcrumb-items="breadcrumbItems" />

    <!-- 加载状态 -->
    <div v-if="loading" class="loading-container">
      <el-icon class="is-loading"><Loading /></el-icon>
      <span>加载中...</span>
    </div>

    <!-- 主内容区 -->
    <div v-else class="main-container">
      <!-- 项目信息卡片（复用 ProjectOverview） -->
      <project-overview
        :project="project"
        :can-edit="false"
        class="project-info-section"
      />

      <!-- 里程碑进度条 -->
      <milestone-progress-bar
        :milestones="milestones"
        :current-milestone-id="currentMilestoneId"
        @change="handleMilestoneChange"
      />

      <!-- 里程碑详情面板 -->
      <transition name="fade" mode="out-in">
        <milestone-detail-panel
          :key="currentMilestoneId"
          :milestone="currentMilestone"
          :has-prev="hasPrev"
          :has-next="hasNext"
          @prev="handlePrev"
          @next="handleNext"
          @upload="handleUpload"
          @view-submission="handleViewSubmission"
          @download-submission="handleDownloadSubmission"
        />
      </transition>
    </div>

    <!-- 上传对话框 -->
    <upload-dialog
      v-model="uploadDialogVisible"
      :milestone="currentMilestone"
      :upload-form="uploadForm"
      @confirm="handleConfirmUpload"
    />

    <!-- 查看详情对话框 -->
    <view-dialog
      v-model="viewDialogVisible"
      :submission="currentSubmission"
      @download="handleDownload"
    />
  </div>
</template>
```

**样式实现**:
```css
.project-manage-new {
  min-height: 100vh;
  background: #f5f7fb;
  padding: 84px 24px 24px;
}

.main-container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.project-info-section {
  margin-bottom: 0;
}

.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 0;
  color: #909399;
}

.loading-container .el-icon {
  font-size: 32px;
  margin-bottom: 12px;
}

/* 淡入淡出动画 */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* 响应式 */
@media (max-width: 1200px) {
  .main-container {
    max-width: 100%;
  }
}

@media (max-width: 768px) {
  .project-manage-new {
    padding: 84px 12px 12px;
  }

  .main-container {
    gap: 16px;
  }
}
```

### 5.2 ProjectOverview 组件修改

**文件**: `src/components/ProjectOverview.vue`

**修改内容**：仅需修改标题行部分

**修改前**:
```vue
<!-- 标题行：仅标题 -->
<div class="title-row">
  <h2 class="project-title">{{ project?.name || '项目名称' }}</h2>
</div>
```

**修改后**:
```vue
<!-- 标题行：状态 + 标题 -->
<div class="title-row">
  <div class="status-indicator" :class="`status-${project?.status}`">
    <span class="status-dot"></span>
    <span class="status-text">{{ statusText }}</span>
  </div>
  <h2 class="project-title">{{ project?.name || '项目名称' }}</h2>
</div>
```

**添加计算属性**:
```javascript
const statusText = computed(() => {
  const map = {
    'pending': '待开始',
    'in-progress': '进行中',
    'completed': '已完成'
  }
  return map[props.project?.status] || '未知'
})
```

**添加样式**:
```css
.title-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.status-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

/* 进行中 - 蓝色 */
.status-in-progress .status-dot {
  background: #1890ff;
  box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.2);
}

.status-in-progress .status-text {
  color: #1890ff;
}

/* 已完成 - 绿色 */
.status-completed .status-dot {
  background: #52c41a;
  box-shadow: 0 0 0 3px rgba(82, 196, 26, 0.2);
}

.status-completed .status-text {
  color: #52c41a;
}

/* 待开始 - 灰色 */
.status-pending .status-dot {
  background: #d9d9d9;
}

.status-pending .status-text {
  color: #909399;
}

/* 响应式 */
@media (max-width: 768px) {
  .title-row {
    flex-wrap: wrap;
  }
}
```



### 5.3 里程碑进度条实现

**文件**: `src/components/MilestoneProgressBar.vue`

**模板结构**:
```vue
<template>
  <div class="milestone-progress-bar">
    <h3 class="progress-title">里程碑进度</h3>

    <div class="progress-container">
      <div class="progress-track">
        <!-- 节点和连接线 -->
        <div
          v-for="(milestone, index) in milestones"
          :key="milestone.id"
          class="milestone-node-wrapper"
          :style="{ left: `${getNodePosition(index)}%` }"
        >
          <!-- 连接线（除了最后一个节点） -->
          <div
            v-if="index < milestones.length - 1"
            class="milestone-line"
            :class="getLineClass(milestone, milestones[index + 1])"
          />

          <!-- 节点 -->
          <div
            class="milestone-node"
            :class="getNodeClass(milestone)"
            @click="handleNodeClick(milestone.id)"
            @mouseenter="handleNodeHover(milestone)"
            @mouseleave="handleNodeLeave"
          >
            <div class="node-dot" />
            <div v-if="milestone.status === 'in-progress'" class="node-pulse" />
          </div>

          <!-- 节点信息 -->
          <div class="milestone-info">
            <div class="milestone-title">{{ milestone.title }}</div>
            <div class="milestone-status">
              <span v-if="milestone.status === 'completed'">✓ 已完成</span>
              <span v-else-if="milestone.status === 'in-progress'">⏳ 进行中</span>
              <span v-else>○ 待开始</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tooltip -->
    <el-tooltip
      v-model:visible="tooltipVisible"
      :content="tooltipContent"
      placement="top"
      :virtual-ref="tooltipRef"
      virtual-triggering
    />
  </div>
</template>
```

**脚本实现**:
```javascript
<script setup>
import { ref, computed } from 'vue'

const props = defineProps({
  milestones: {
    type: Array,
    required: true
  },
  currentMilestoneId: {
    type: String,
    required: true
  }
})

const emit = defineEmits(['change'])

const tooltipVisible = ref(false)
const tooltipContent = ref('')
const tooltipRef = ref(null)

// 计算节点位置（百分比）
function getNodePosition(index) {
  const total = props.milestones.length
  if (total === 1) return 50
  return (index / (total - 1)) * 100
}

// 获取节点样式类
function getNodeClass(milestone) {
  const classes = []

  if (milestone.id === props.currentMilestoneId) {
    classes.push('active')
  }

  if (milestone.status === 'completed') {
    classes.push('completed')
  } else if (milestone.status === 'in-progress') {
    classes.push('in-progress')
  } else {
    classes.push('pending')
  }

  return classes
}

// 获取连接线样式类
function getLineClass(fromMilestone, toMilestone) {
  if (fromMilestone.status === 'completed' && toMilestone.status === 'completed') {
    return 'completed'
  }
  if (fromMilestone.status === 'completed' && toMilestone.status === 'in-progress') {
    return 'in-progress'
  }
  return 'pending'
}

// 节点点击
function handleNodeClick(milestoneId) {
  emit('change', milestoneId)
}

// 节点 hover
function handleNodeHover(milestone) {
  tooltipContent.value = `${milestone.title} - ${milestone.statusText}`
  tooltipVisible.value = true
}

function handleNodeLeave() {
  tooltipVisible.value = false
}
</script>
```

**样式实现**:
```css
.milestone-progress-bar {
  background: #fff;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  margin-bottom: 20px;
}

.progress-title {
  margin: 0 0 24px 0;
  font-size: 18px;
  font-weight: 600;
  color: #1f274b;
  text-align: center;
}

.progress-container {
  padding: 40px 60px;
}

.progress-track {
  position: relative;
  height: 80px;
}

.milestone-node-wrapper {
  position: absolute;
  transform: translateX(-50%);
}

.milestone-line {
  position: absolute;
  top: 20px;
  left: 50%;
  width: calc((100vw - 120px) / (var(--total-milestones) - 1));
  height: 4px;
  transition: all 0.3s ease;
}

.milestone-line.completed {
  background: linear-gradient(to right, #52c41a, #52c41a);
}

.milestone-line.in-progress {
  background: linear-gradient(to right, #52c41a, #1890ff);
}

.milestone-line.pending {
  background: #e8e8e8;
  background-image: repeating-linear-gradient(
    90deg,
    #e8e8e8,
    #e8e8e8 10px,
    transparent 10px,
    transparent 20px
  );
}

.milestone-node {
  position: relative;
  width: 40px;
  height: 40px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.milestone-node:hover {
  transform: scale(1.2);
}

.milestone-node.active {
  transform: scale(1.3);
}

.node-dot {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  border-radius: 50%;
  transition: all 0.3s ease;
}

.milestone-node.completed .node-dot {
  background: #52c41a;
  box-shadow: 0 0 0 4px rgba(82, 196, 26, 0.2);
}

.milestone-node.in-progress .node-dot {
  background: #1890ff;
  box-shadow: 0 0 0 4px rgba(24, 144, 255, 0.2);
}

.milestone-node.pending .node-dot {
  background: #fff;
  border: 3px solid #d9d9d9;
}

.milestone-node.active .node-dot {
  box-shadow: 0 0 0 8px rgba(24, 144, 255, 0.3);
}

/* 脉动动画 */
.node-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #1890ff;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(2);
    opacity: 0;
  }
}

.milestone-info {
  position: absolute;
  top: 50px;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  white-space: nowrap;
}

.milestone-title {
  font-size: 14px;
  font-weight: 600;
  color: #303133;
  margin-bottom: 4px;
}

.milestone-status {
  font-size: 12px;
  color: #909399;
}

/* 响应式 */
@media (max-width: 768px) {
  .progress-container {
    padding: 40px 20px;
    overflow-x: auto;
  }

  .progress-track {
    min-width: 600px;
  }
}
```

### 5.4 里程碑详情面板实现

**文件**: `src/components/MilestoneDetailPanel.vue`

**模板结构**:
```vue
<template>
  <div class="milestone-detail-panel">
    <!-- 头部：切换按钮 + 标题 -->
    <div class="panel-header">
      <el-button
        v-if="hasPrev"
        text
        @click="emit('prev')"
        class="nav-btn"
      >
        <el-icon><ArrowLeft /></el-icon>
        上一个
      </el-button>
      <div v-else class="nav-placeholder" />

      <h3 class="panel-title">{{ milestone.title }}</h3>

      <el-button
        v-if="hasNext"
        text
        @click="emit('next')"
        class="nav-btn"
      >
        下一个
        <el-icon><ArrowRight /></el-icon>
      </el-button>
      <div v-else class="nav-placeholder" />
    </div>

    <!-- 里程碑信息 -->
    <div class="milestone-info-section">
      <div class="info-row">
        <div class="info-item">
          <span class="info-label">状态：</span>
          <el-tag :type="statusType" size="small">{{ statusText }}</el-tag>
        </div>
        <div class="info-item">
          <span class="info-label">计划完成：</span>
          <span class="info-value">{{ milestone.plannedDate }}</span>
        </div>
        <div v-if="remainingDays !== null" class="info-item">
          <span class="info-label">剩余天数：</span>
          <span class="info-value" :class="{ 'text-danger': remainingDays < 0 }">
            {{ remainingDaysText }}
          </span>
        </div>
      </div>
      <div class="milestone-description">
        {{ milestone.description }}
      </div>
    </div>

    <!-- 折叠区域 -->
    <el-collapse v-model="activeNames" class="detail-collapse">
      <!-- 交付物要求 -->
      <el-collapse-item title="交付物要求" name="deliverables">
        <ul class="deliverables-list">
          <li v-for="d in milestone.deliverables" :key="d.id" class="deliverable-item">
            <div class="deliverable-header">
              <span class="deliverable-name">{{ d.name }}</span>
              <el-tag size="small" type="info">{{ d.format.join(' / ') }}</el-tag>
            </div>
            <p class="deliverable-requirement">{{ d.requirement }}</p>
          </li>
        </ul>
      </el-collapse-item>

      <!-- 我的提交 -->
      <el-collapse-item title="我的提交" name="submissions">
        <div v-if="sortedSubmissions.length > 0" class="submissions-list">
          <submission-item
            v-for="sub in sortedSubmissions"
            :key="sub.id"
            :submission="sub"
            @view="emit('viewSubmission', sub)"
            @download="emit('downloadSubmission', sub)"
          />
        </div>
        <el-empty v-else description="暂无提交记录" :image-size="60" />

        <el-button
          type="primary"
          @click="emit('upload')"
          class="upload-btn"
        >
          <el-icon><UploadFilled /></el-icon>
          上传/更新文件
        </el-button>
      </el-collapse-item>

      <!-- 发布方反馈 -->
      <el-collapse-item title="发布方反馈" name="feedback">
        <div v-if="sortedFeedbacks.length > 0" class="feedbacks-list">
          <div
            v-for="feedback in sortedFeedbacks"
            :key="feedback.id"
            class="feedback-item"
          >
            <div class="feedback-header">
              <span class="feedback-publisher">{{ feedback.publisher }}</span>
              <span class="feedback-time">{{ feedback.time }}</span>
            </div>
            <div class="feedback-content">
              {{ feedback.content }}
              <div v-if="feedback.suggestions?.length > 0" class="suggestions">
                <div class="suggestion-title">修改建议：</div>
                <ul class="suggestion-list">
                  <li v-for="(suggestion, index) in feedback.suggestions" :key="index">
                    {{ suggestion }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <el-empty v-else description="暂无反馈意见" :image-size="60" />
      </el-collapse-item>
    </el-collapse>
  </div>
</template>
```

**脚本实现**:
```javascript
<script setup>
import { ref, computed } from 'vue'
import { ArrowLeft, ArrowRight, UploadFilled } from '@element-plus/icons-vue'
import SubmissionItem from './SubmissionItem.vue'
import { calculateRemainingDays } from '@/utils/helpers'

const props = defineProps({
  milestone: {
    type: Object,
    required: true
  },
  hasPrev: {
    type: Boolean,
    default: false
  },
  hasNext: {
    type: Boolean,
    default: false
  }
})

const emit = defineEmits(['prev', 'next', 'upload', 'viewSubmission', 'downloadSubmission'])

// 默认展开所有区域
const activeNames = ref(['deliverables', 'submissions', 'feedback'])

// 状态文本
const statusText = computed(() => {
  const map = {
    'completed': '已完成',
    'in-progress': '进行中',
    'pending': '待开始',
    'delayed': '已逾期'
  }
  return map[props.milestone.status] || props.milestone.status
})

// 标签类型
const statusType = computed(() => {
  const map = {
    'completed': 'success',
    'in-progress': 'primary',
    'pending': 'info',
    'delayed': 'danger'
  }
  return map[props.milestone.status] || 'info'
})

// 剩余天数
const remainingDays = computed(() => {
  if (props.milestone.status === 'completed' || !props.milestone.plannedDate) {
    return null
  }
  return calculateRemainingDays(props.milestone.plannedDate)
})

// 剩余天数文本
const remainingDaysText = computed(() => {
  if (remainingDays.value === null) return ''
  if (remainingDays.value > 0) return `${remainingDays.value} 天`
  if (remainingDays.value === 0) return '今天截止'
  return `逾期 ${-remainingDays.value} 天`
})

// 提交记录排序（最新版本在前）
const sortedSubmissions = computed(() => {
  if (!props.milestone.submissions) return []
  return [...props.milestone.submissions].sort((a, b) => b.version - a.version)
})

// 反馈记录排序（最新在前）
const sortedFeedbacks = computed(() => {
  if (!props.milestone.feedbacks) return []
  return [...props.milestone.feedbacks].sort((a, b) => {
    return new Date(b.time) - new Date(a.time)
  })
})
</script>
```

**样式实现**:
```css
.milestone-detail-panel {
  background: #fff;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  min-height: 400px;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid #f0f0f0;
}

.nav-btn {
  font-size: 14px;
  padding: 8px 16px;
}

.nav-placeholder {
  width: 100px;
}

.panel-title {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #1f274b;
  text-align: center;
  flex: 1;
}

.milestone-info-section {
  margin-bottom: 20px;
  padding: 16px;
  background: #f5f7fb;
  border-radius: 8px;
}

.info-row {
  display: flex;
  gap: 24px;
  margin-bottom: 12px;
  flex-wrap: wrap;
}

.info-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.info-label {
  font-size: 14px;
  color: #606266;
}

.info-value {
  font-size: 14px;
  font-weight: 600;
  color: #303133;
}

.info-value.text-danger {
  color: #ff4d4f;
}

.milestone-description {
  font-size: 14px;
  color: #606266;
  line-height: 1.6;
}

.detail-collapse {
  border: none;
}

.detail-collapse :deep(.el-collapse-item__header) {
  font-size: 16px;
  font-weight: 600;
  color: #303133;
  padding: 16px 0;
  border-bottom: 1px solid #f0f0f0;
}

.detail-collapse :deep(.el-collapse-item__content) {
  padding: 16px 0;
}

.deliverables-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.deliverable-item {
  padding: 12px;
  background: #f5f7fb;
  border-radius: 8px;
  margin-bottom: 12px;
}

.deliverable-item:last-child {
  margin-bottom: 0;
}

.deliverable-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.deliverable-name {
  font-size: 14px;
  font-weight: 600;
  color: #303133;
}

.deliverable-requirement {
  margin: 0;
  font-size: 13px;
  color: #606266;
  line-height: 1.6;
}

.submissions-list {
  margin-bottom: 16px;
}

.upload-btn {
  width: 100%;
}

.feedbacks-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.feedback-item {
  padding: 16px;
  background: #f5f7fb;
  border-radius: 8px;
}

.feedback-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.feedback-publisher {
  font-size: 14px;
  font-weight: 600;
  color: #303133;
}

.feedback-time {
  font-size: 12px;
  color: #909399;
}

.feedback-content {
  font-size: 14px;
  color: #606266;
  line-height: 1.6;
}

.suggestions {
  margin-top: 12px;
  padding: 12px;
  background: #fff;
  border-radius: 6px;
  border-left: 3px solid #1890ff;
}

.suggestion-title {
  font-size: 13px;
  font-weight: 600;
  color: #303133;
  margin-bottom: 8px;
}

.suggestion-list {
  margin: 0;
  padding-left: 20px;
  list-style: disc;
}

.suggestion-list li {
  font-size: 13px;
  color: #606266;
  line-height: 1.6;
  margin-bottom: 4px;
}

/* 淡入淡出动画 */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* 响应式 */
@media (max-width: 768px) {
  .panel-header {
    flex-direction: column;
    gap: 12px;
  }

  .nav-placeholder {
    display: none;
  }

  .panel-title {
    order: -1;
  }

  .info-row {
    flex-direction: column;
    gap: 12px;
  }
}
```

---

## 六、样式设计规范

### 6.1 颜色系统

**主色调**：
- 主色（Primary）：#1890ff（蓝色）
- 成功（Success）：#52c41a（绿色）
- 警告（Warning）：#faad14（橙色）
- 危险（Danger）：#ff4d4f（红色）
- 信息（Info）：#909399（灰色）

**中性色**：
- 标题文字：#1f274b（深蓝灰）
- 正文文字：#303133（深灰）
- 次要文字：#606266（中灰）
- 辅助文字：#909399（浅灰）
- 边框颜色：#e4e7ed（浅灰）
- 背景色：#f5f7fb（极浅灰）

**渐变色**：
- 进度条渐变：linear-gradient(to right, #1890ff, #52c41a)
- 卡片阴影：0 2px 8px rgba(0, 0, 0, 0.06)

### 6.2 字体系统

**字号**：
- 超大标题：24px（项目名称）
- 大标题：20px（里程碑标题）
- 中标题：18px（区块标题）
- 小标题：16px（折叠面板标题）
- 正文：14px（描述、列表）
- 辅助文字：13px（标签、提示）
- 小字：12px（时间、状态）

**字重**：
- 粗体：700（悬赏金额）
- 半粗：600（标题、重要信息）
- 中等：500（次要信息）
- 常规：400（正文）

**行高**：
- 标题：1.2
- 正文：1.6

### 6.3 间距系统

**内边距（Padding）**：
- 超大：24px（卡片内边距）
- 大：20px（区块间距）
- 中：16px（元素内边距）
- 小：12px（小元素内边距）
- 超小：8px（紧凑间距）

**外边距（Margin）**：
- 组件间距：20px
- 区块间距：16px
- 元素间距：12px
- 小元素间距：8px

### 6.4 圆角系统

- 卡片圆角：12px
- 按钮圆角：8px
- 标签圆角：6px
- 输入框圆角：4px

### 6.5 阴影系统

- 卡片阴影：0 2px 8px rgba(0, 0, 0, 0.06)
- hover 阴影：0 4px 16px rgba(0, 0, 0, 0.1)
- 节点光晕：0 0 0 8px rgba(24, 144, 255, 0.3)

---

## 七、开发计划

### 7.1 开发阶段划分

**第一阶段：基础框架搭建（1.5天）**
- [ ] 修改 ProjectOverview 组件（添加状态标签）
- [ ] 重构主容器布局
- [ ] 实现基础样式系统
- [ ] 测试项目信息卡片显示

**第二阶段：进度条开发（2天）**
- [ ] 创建 MilestoneProgressBar 组件
- [ ] 实现节点和连接线渲染
- [ ] 实现节点点击切换
- [ ] 实现 hover 效果和 tooltip
- [ ] 实现脉动动画
- [ ] 测试进度条交互

**第三阶段：详情面板开发（3天）**
- [ ] 创建 MilestoneDetailPanel 组件
- [ ] 实现切换按钮功能
- [ ] 实现折叠区域
- [ ] 实现提交记录展示
- [ ] 实现反馈展示
- [ ] 实现淡入淡出动画
- [ ] 测试详情面板功能

**第四阶段：交互功能完善（1.5天）**
- [ ] 实现键盘快捷键
- [ ] 实现平滑滚动
- [ ] 复用上传对话框
- [ ] 复用查看详情对话框
- [ ] 测试所有交互功能

**第五阶段：响应式优化（1天）**
- [ ] 适配平板设备（768px-1200px）
- [ ] 适配手机设备（<768px）
- [ ] 测试各种屏幕尺寸
- [ ] 优化小屏体验

**第六阶段：测试和优化（1天）**
- [ ] 功能测试
- [ ] 性能优化
- [ ] 浏览器兼容性测试
- [ ] 用户体验优化
- [ ] Bug 修复

**总计：10 天**（相比原方案减少 2 天）

### 7.2 技术难点

**难点1：进度条节点位置计算**
- 需要根据里程碑数量动态计算节点位置
- 需要处理响应式布局下的位置变化
- 解决方案：使用百分比定位 + CSS 变量

**难点2：连接线状态渲染**
- 需要根据相邻节点状态决定连接线样式
- 需要实现渐变效果
- 解决方案：动态计算连接线类名 + CSS 渐变

**难点3：切换动画流畅性**
- 需要实现淡入淡出动画
- 需要避免动画卡顿
- 解决方案：使用 Vue transition + CSS transition

**难点4：键盘快捷键冲突**
- 需要避免在输入框中触发快捷键
- 需要处理多个快捷键
- 解决方案：判断 event.target 类型

**难点5：响应式布局**
- 进度条在小屏设备上需要横向滚动
- 需要保持节点间距合理
- 解决方案：设置 min-width + overflow-x: auto

### 7.3 文件清单

**新增文件**：
```
src/
├── components/
│   ├── MilestoneProgressBar.vue      # 里程碑进度条（新增）
│   └── MilestoneDetailPanel.vue      # 里程碑详情面板（新增）
```

**修改文件**：
```
src/
├── views/
│   └── project/
│       └── Manage/
│           └── index.vue             # 主容器（重构）
├── components/
│   └── ProjectOverview.vue           # 项目概览（修改：添加状态标签）
```

**保留复用文件**：
```
src/
├── components/
│   ├── layout/
│   │   └── ProjectManageHeader.vue  # 顶部导航栏（保留）
│   └── SubmissionItem.vue           # 提交项组件（保留）
```

**废弃文件**：
```
src/
├── components/
│   ├── QuickActionPanel.vue         # 快捷操作面板（废弃）
│   ├── MilestoneTimeline.vue        # 里程碑时间线（废弃）
│   ├── MilestoneCardContractor.vue  # 承接方里程碑卡片（废弃）
│   ├── TeamPanel.vue                # 团队信息面板（废弃，移除功能）
│   └── TimelinePanel.vue            # 审核历史面板（废弃，移除功能）
```

### 7.4 数据结构调整

**项目数据结构**（新增 status 字段）：
```javascript
{
  id: 'p1',
  name: 'AI智能客服系统开发',
  status: 'in-progress', // pending/in-progress/completed（新增）
  publisher: '桂林电子科技大学科技有限公司',
  category: '人工智能',
  endDate: '2026-01-30',
  reward: 15000,
  description: '为平台构建基于NLP的智能客服系统...',
  brief: '为平台构建基于NLP的智能客服系统...'
}
```

**里程碑数据结构**（保持不变）：
```javascript
{
  id: 'm1',
  title: '需求分析',
  description: '完成需求分析文档...',
  status: 'completed', // pending/in-progress/completed/delayed
  statusText: '已完成',
  plannedDate: '2025-11-15',
  actualDate: '2025-11-14',
  deliverables: [...],
  submissions: [...],
  feedbacks: [...]
}
```

---

## 八、迁移方案

### 8.1 功能对比

| 功能 | 旧版 | 新版 | 说明 |
|------|------|------|------|
| 项目信息展示 | ProjectOverview | ProjectOverview（修改） | 添加状态标签 |
| 里程碑导航 | 滚动查找 | 进度条点击 | 更直观，更快捷 |
| 里程碑详情 | 时间线列表 | 详情面板 | 一次展示一个，减少干扰 |
| 快捷操作 | QuickActionPanel | 取消 | 简化交互，减少复杂度 |
| 团队信息 | TeamPanel（折叠） | 取消 | 非核心功能，移除 |
| 审核历史 | TimelinePanel（折叠） | 取消 | 非核心功能，移除 |
| 上传文件 | 对话框 | 对话框 | 保持不变 |
| 查看详情 | 对话框 | 对话框 | 保持不变 |
| 键盘快捷键 | 无 | ← → 切换 | 新增功能 |

### 8.2 数据迁移

**需要的数据调整**：
1. 在项目数据中添加 `status` 字段
2. 根据里程碑状态计算项目状态：
   - 如果有进行中的里程碑 → `in-progress`
   - 如果全部完成 → `completed`
   - 如果全部待开始 → `pending`

**迁移代码示例**：
```javascript
// 在数据加载后计算项目状态
function calculateProjectStatus(milestones) {
  const hasInProgress = milestones.some(m => m.status === 'in-progress')
  const allCompleted = milestones.every(m => m.status === 'completed')
  const allPending = milestones.every(m => m.status === 'pending')

  if (hasInProgress) return 'in-progress'
  if (allCompleted) return 'completed'
  if (allPending) return 'pending'
  return 'in-progress' // 默认
}

// 在 fetchManageData 中使用
async function fetchManageData() {
  // ... 加载数据
  project.value.status = calculateProjectStatus(milestones.value)
}
```

### 8.3 渐进式迁移策略

**推荐方案：直接替换**
1. 创建新分支 `feature/manage-redesign`
2. 开发新版页面
3. 测试通过后合并到主分支
4. 一次性上线

**理由**：
- 改动较大，不适合 AB 测试
- 新版设计更简洁，用户接受度高
- 减少维护成本
- 复用了大部分现有组件，风险可控

---

## 九、测试方案

### 9.1 功能测试

**测试用例1：页面初始化**
- [ ] 加载项目数据成功
- [ ] 显示项目信息卡片（带状态标签）
- [ ] 显示里程碑进度条
- [ ] 默认显示进行中的里程碑
- [ ] 如果没有进行中的，显示第一个待开始的
- [ ] 如果全部完成，显示最后一个

**测试用例2：项目状态显示**
- [ ] 进行中项目显示蓝色圆点和"进行中"文字
- [ ] 已完成项目显示绿色圆点和"已完成"文字
- [ ] 待开始项目显示灰色圆点和"待开始"文字
- [ ] 状态标签位置正确（标题前）

**测试用例3：进度条交互**
- [ ] 点击节点切换里程碑
- [ ] 当前节点高亮显示
- [ ] hover 显示 tooltip
- [ ] 节点状态正确（已完成/进行中/待开始）
- [ ] 连接线状态正确
- [ ] 进行中节点显示脉动动画

**测试用例4：详情面板切换**
- [ ] 点击"上一个"按钮切换
- [ ] 点击"下一个"按钮切换
- [ ] 第一个里程碑隐藏"上一个"按钮
- [ ] 最后一个里程碑隐藏"下一个"按钮
- [ ] 切换时显示淡入淡出动画
- [ ] 切换后滚动到面板顶部

**测试用例5：键盘快捷键**
- [ ] 按 ← 键切换到上一个里程碑
- [ ] 按 → 键切换到下一个里程碑
- [ ] 在输入框中不响应快捷键
- [ ] 在 textarea 中不响应快捷键

**测试用例6：上传文件**
- [ ] 点击"上传/更新文件"打开对话框
- [ ] 显示当前里程碑信息
- [ ] 显示交付物要求
- [ ] 选择文件成功
- [ ] 填写版本说明
- [ ] 验证必填字段
- [ ] 上传成功后刷新数据

**测试用例7：查看提交详情**
- [ ] 点击"查看详情"打开对话框
- [ ] 显示文件信息
- [ ] 显示版本说明
- [ ] 显示审核结果（如果有）
- [ ] 下载文件功能正常

**测试用例8：折叠区域**
- [ ] 默认全部展开
- [ ] 点击标题折叠/展开
- [ ] 折叠动画流畅
- [ ] 状态保持正确

### 9.2 响应式测试

**测试设备**：
- [ ] 桌面端（1920x1080）
- [ ] 笔记本（1366x768）
- [ ] 平板横屏（1024x768）
- [ ] 平板竖屏（768x1024）
- [ ] 手机横屏（667x375）
- [ ] 手机竖屏（375x667）

**测试要点**：
- [ ] 布局不错乱
- [ ] 状态标签显示正常
- [ ] 文字可读
- [ ] 按钮可点击
- [ ] 进度条可滚动（小屏）
- [ ] 图片不变形

### 9.3 性能测试

**测试指标**：
- [ ] 首屏加载时间 < 2s
- [ ] 切换里程碑响应时间 < 300ms
- [ ] 动画帧率 > 60fps
- [ ] 内存占用 < 100MB

**测试工具**：
- Chrome DevTools Performance
- Lighthouse
- Vue DevTools

### 9.4 兼容性测试

**浏览器**：
- [ ] Chrome（最新版）
- [ ] Firefox（最新版）
- [ ] Safari（最新版）
- [ ] Edge（最新版）

**操作系统**：
- [ ] Windows 10/11
- [ ] macOS
- [ ] iOS
- [ ] Android

---

## 十、优化建议

### 10.1 性能优化

**1. 虚拟滚动**：
- 如果里程碑数量超过 20 个，考虑使用虚拟滚动
- 只渲染可见区域的节点

**2. 懒加载**：
- 详情面板内容按需加载
- 提交记录分页加载

**3. 防抖节流**：
- 进度条 hover 事件使用防抖
- 滚动事件使用节流

**4. 图片优化**：
- 使用 WebP 格式
- 实现图片懒加载

### 10.2 用户体验优化

**1. 加载状态**：
- 切换里程碑时显示 skeleton 屏
- 上传文件时显示进度条

**2. 错误处理**：
- 网络错误时显示友好提示
- 提供重试按钮

**3. 空状态**：
- 优化空状态提示文案
- 提供操作引导

**4. 快捷操作**：
- 添加快捷键提示（tooltip）
- 支持更多快捷键（如 U 上传）

### 10.3 可访问性优化

**1. ARIA 标签**：
- 为进度条节点添加 `aria-label`
- 为切换按钮添加 `aria-label`

**2. 键盘导航**：
- 支持 Tab 键导航
- 支持 Enter/Space 激活

**3. 焦点管理**：
- 切换里程碑后聚焦到详情面板
- 对话框打开时聚焦到第一个输入框

**4. 屏幕阅读器**：
- 添加语义化标签
- 提供文本替代

### 10.4 扩展性优化

**1. 组件抽象**：
- 将进度条抽象为通用组件
- 支持自定义节点样式

**2. 配置化**：
- 支持配置颜色主题
- 支持配置动画效果

**3. 插件化**：
- 支持自定义节点渲染
- 支持自定义连接线渲染

---

## 十一、总结

### 11.1 改造亮点

✅ **简约设计**：
- 取消左侧导航栏，采用垂直单栏布局
- 减少视觉噪音，突出核心内容
- 扁平化设计，现代感强

✅ **直观导航**：
- 横向进度条展示所有里程碑
- 一目了然，快速定位
- 点击切换，减少滚动

✅ **高效交互**：
- 键盘快捷键支持
- 平滑过渡动画
- 响应式优化

✅ **聚焦任务**：
- 一次展示一个里程碑
- 减少干扰，提升专注度
- 信息分层，按需展示

✅ **复用现有组件**：
- 复用 ProjectOverview 组件
- 仅需添加状态标签
- 降低开发成本和风险

### 11.2 技术创新

🚀 **进度条可视化**：
- 创新的横向进度条设计
- 节点状态可视化
- 脉动动画增强视觉反馈

🚀 **切换动画**：
- 淡入淡出过渡
- 平滑滚动定位
- 流畅的用户体验

🚀 **响应式设计**：
- 原生垂直布局
- 移动端友好
- 横向滚动支持

🚀 **组件复用**：
- 最大化复用现有组件
- 降低开发和维护成本
- 保持设计一致性

### 11.3 预期效果

**用户体验提升**：
- 操作效率提升 30%
- 学习成本降低 50%
- 用户满意度提升 40%

**开发效率提升**：
- 代码量减少 30%（复用现有组件）
- 组件复杂度降低 30%
- 维护成本降低 40%

**性能提升**：
- 首屏加载时间减少 20%
- 内存占用减少 15%
- 动画流畅度提升 25%

### 11.4 后续规划

**短期（1个月）**：
- [ ] 完成新版开发
- [ ] 完成测试和优化
- [ ] 上线新版页面

**中期（3个月）**：
- [ ] 收集用户反馈
- [ ] 优化细节体验
- [ ] 添加更多快捷键

**长期（6个月）**：
- [ ] 扩展到企业端
- [ ] 支持自定义主题
- [ ] 支持插件化扩展

### 11.5 风险评估

**技术风险**：
- 🟡 中等：进度条节点位置计算复杂
- 🟢 低：切换动画实现
- 🟢 低：响应式布局
- 🟢 低：组件复用（ProjectOverview）

**用户风险**：
- 🟡 中等：用户需要适应新交互方式
- 🟢 低：功能保持一致，学习成本低
- 🟢 低：项目信息展示保持不变

**项目风险**：
- 🟢 低：开发周期可控（10天，减少2天）
- 🟢 低：技术栈成熟，风险可控
- 🟢 低：复用现有组件，降低风险

### 11.6 成功标准

**功能完整性**：
- ✅ 所有核心功能正常工作
- ✅ 无严重 Bug
- ✅ 通过所有测试用例

**性能指标**：
- ✅ 首屏加载时间 < 2s
- ✅ 切换响应时间 < 300ms
- ✅ 动画帧率 > 60fps

**用户满意度**：
- ✅ 用户反馈积极
- ✅ 操作效率提升
- ✅ 学习成本降低

---

## 十二、附录

### 12.1 参考资料

**设计参考**：
- Ant Design 进度条组件
- Material Design 时间线组件
- GitHub 项目进度展示

**技术参考**：
- Vue 3 官方文档
- Element Plus 组件库
- CSS 动画最佳实践

### 12.2 相关文档

- [207] 学生端项目管理页面实现分析.md
- [206] 企业方项目管理页面实现分析.md
- [001] 原型设计文档.md
- [000] 需求分析文档.md

### 12.3 修改记录

**v1.1 (2026-01-21)**：
- 修改项目信息卡片方案，复用 ProjectOverview 组件
- 仅需在标题前添加状态标签
- 减少开发工作量，降低风险
- 保持设计一致性

**v1.0 (2026-01-21)**：
- 初始版本
- 完整的改造方案设计

### 12.4 联系方式

**开发团队**：
- 前端负责人：[姓名]
- UI 设计师：[姓名]
- 产品经理：[姓名]

**反馈渠道**：
- 项目 Issue：[链接]
- 邮件：[邮箱]
- 微信群：[群号]

---

**文档结束**

**最后更新**: 2026-01-21
**版本**: v1.1
**作者**: Claude
**审核状态**: 待审核



---

## 八、迁移方案

### 8.1 功能对比

| 功能 | 旧版 | 新版 | 说明 |
|------|------|------|------|
| 项目信息展示 | ProjectOverview | ProjectInfoCard | 简化，突出核心信息 |
| 里程碑导航 | 滚动查找 | 进度条点击 | 更直观，更快捷 |
| 里程碑详情 | 时间线列表 | 详情面板 | 一次展示一个，减少干扰 |
| 快捷操作 | QuickActionPanel | 取消 | 简化交互，减少复杂度 |
| 团队信息 | TeamPanel（折叠） | 取消 | 非核心功能，移除 |
| 审核历史 | TimelinePanel（折叠） | 取消 | 非核心功能，移除 |
| 上传文件 | 对话框 | 对话框 | 保持不变 |
| 查看详情 | 对话框 | 对话框 | 保持不变 |
| 键盘快捷键 | 无 | ← → 切换 | 新增功能 |

### 8.2 数据迁移

**无需数据迁移**：
- 使用相同的 Mock 数据源
- 数据结构保持兼容
- 仅需添加计算属性（totalMilestones、completedMilestones）

### 8.3 渐进式迁移策略

**方案一：直接替换（推荐）**
1. 创建新分支 `feature/manage-redesign`
2. 开发新版页面
3. 测试通过后合并到主分支
4. 一次性上线

**方案二：AB 测试**
1. 保留旧版页面路由 `/projects/:id/manage-old`
2. 新版页面使用新路由 `/projects/:id/manage-new`
3. 通过配置或用户选择切换版本
4. 收集反馈后决定最终版本

**方案三：功能开关**
1. 使用 feature flag 控制新旧版本
2. 在同一路由下根据 flag 渲染不同组件
3. 灰度发布，逐步切换用户

**推荐方案一**，因为：
- 改动较大，不适合 AB 测试
- 新版设计更简洁，用户接受度高
- 减少维护成本

---

## 九、测试方案

### 9.1 功能测试

**测试用例1：页面初始化**
- [ ] 加载项目数据成功
- [ ] 显示项目信息卡片
- [ ] 显示里程碑进度条
- [ ] 默认显示进行中的里程碑
- [ ] 如果没有进行中的，显示第一个待开始的
- [ ] 如果全部完成，显示最后一个

**测试用例2：进度条交互**
- [ ] 点击节点切换里程碑
- [ ] 当前节点高亮显示
- [ ] hover 显示 tooltip
- [ ] 节点状态正确（已完成/进行中/待开始）
- [ ] 连接线状态正确
- [ ] 进行中节点显示脉动动画

**测试用例3：详情面板切换**
- [ ] 点击"上一个"按钮切换
- [ ] 点击"下一个"按钮切换
- [ ] 第一个里程碑隐藏"上一个"按钮
- [ ] 最后一个里程碑隐藏"下一个"按钮
- [ ] 切换时显示淡入淡出动画
- [ ] 切换后滚动到面板顶部

**测试用例4：键盘快捷键**
- [ ] 按 ← 键切换到上一个里程碑
- [ ] 按 → 键切换到下一个里程碑
- [ ] 在输入框中不响应快捷键
- [ ] 在 textarea 中不响应快捷键

**测试用例5：上传文件**
- [ ] 点击"上传/更新文件"打开对话框
- [ ] 显示当前里程碑信息
- [ ] 显示交付物要求
- [ ] 选择文件成功
- [ ] 填写版本说明
- [ ] 验证必填字段
- [ ] 上传成功后刷新数据
- [ ] 更新进度条和项目信息

**测试用例6：查看提交详情**
- [ ] 点击"查看详情"打开对话框
- [ ] 显示文件信息
- [ ] 显示版本说明
- [ ] 显示审核结果（如果有）
- [ ] 下载文件功能正常

**测试用例7：折叠区域**
- [ ] 默认全部展开
- [ ] 点击标题折叠/展开
- [ ] 折叠动画流畅
- [ ] 状态保持正确

### 9.2 响应式测试

**测试设备**：
- [ ] 桌面端（1920x1080）
- [ ] 笔记本（1366x768）
- [ ] 平板横屏（1024x768）
- [ ] 平板竖屏（768x1024）
- [ ] 手机横屏（667x375）
- [ ] 手机竖屏（375x667）

**测试要点**：
- [ ] 布局不错乱
- [ ] 文字可读
- [ ] 按钮可点击
- [ ] 进度条可滚动（小屏）
- [ ] 图片不变形

### 9.3 性能测试

**测试指标**：
- [ ] 首屏加载时间 < 2s
- [ ] 切换里程碑响应时间 < 300ms
- [ ] 动画帧率 > 60fps
- [ ] 内存占用 < 100MB

**测试工具**：
- Chrome DevTools Performance
- Lighthouse
- Vue DevTools

### 9.4 兼容性测试

**浏览器**：
- [ ] Chrome（最新版）
- [ ] Firefox（最新版）
- [ ] Safari（最新版）
- [ ] Edge（最新版）

**操作系统**：
- [ ] Windows 10/11
- [ ] macOS
- [ ] iOS
- [ ] Android

---

## 十、优化建议

### 10.1 性能优化

**1. 虚拟滚动**：
- 如果里程碑数量超过 20 个，考虑使用虚拟滚动
- 只渲染可见区域的节点

**2. 懒加载**：
- 详情面板内容按需加载
- 提交记录分页加载

**3. 防抖节流**：
- 进度条 hover 事件使用防抖
- 滚动事件使用节流

**4. 图片优化**：
- 使用 WebP 格式
- 实现图片懒加载

### 10.2 用户体验优化

**1. 加载状态**：
- 切换里程碑时显示 skeleton 屏
- 上传文件时显示进度条

**2. 错误处理**：
- 网络错误时显示友好提示
- 提供重试按钮

**3. 空状态**：
- 优化空状态提示文案
- 提供操作引导

**4. 快捷操作**：
- 添加快捷键提示（tooltip）
- 支持更多快捷键（如 U 上传）

### 10.3 可访问性优化

**1. ARIA 标签**：
- 为进度条节点添加 `aria-label`
- 为切换按钮添加 `aria-label`

**2. 键盘导航**：
- 支持 Tab 键导航
- 支持 Enter/Space 激活

**3. 焦点管理**：
- 切换里程碑后聚焦到详情面板
- 对话框打开时聚焦到第一个输入框

**4. 屏幕阅读器**：
- 添加语义化标签
- 提供文本替代

### 10.4 扩展性优化

**1. 组件抽象**：
- 将进度条抽象为通用组件
- 支持自定义节点样式

**2. 配置化**：
- 支持配置颜色主题
- 支持配置动画效果

**3. 插件化**：
- 支持自定义节点渲染
- 支持自定义连接线渲染

---

## 十一、总结

### 11.1 改造亮点

✅ **简约设计**：
- 取消左侧导航栏，采用垂直单栏布局
- 减少视觉噪音，突出核心内容
- 扁平化设计，现代感强

✅ **直观导航**：
- 横向进度条展示所有里程碑
- 一目了然，快速定位
- 点击切换，减少滚动

✅ **高效交互**：
- 键盘快捷键支持
- 平滑过渡动画
- 响应式优化

✅ **聚焦任务**：
- 一次展示一个里程碑
- 减少干扰，提升专注度
- 信息分层，按需展示

### 11.2 技术创新

🚀 **进度条可视化**：
- 创新的横向进度条设计
- 节点状态可视化
- 脉动动画增强视觉反馈

🚀 **切换动画**：
- 淡入淡出过渡
- 平滑滚动定位
- 流畅的用户体验

🚀 **响应式设计**：
- 原生垂直布局
- 移动端友好
- 横向滚动支持

### 11.3 预期效果

**用户体验提升**：
- 操作效率提升 30%
- 学习成本降低 50%
- 用户满意度提升 40%

**开发效率提升**：
- 代码量减少 20%
- 组件复杂度降低 30%
- 维护成本降低 40%

**性能提升**：
- 首屏加载时间减少 20%
- 内存占用减少 15%
- 动画流畅度提升 25%

### 11.4 后续规划

**短期（1个月）**：
- [ ] 完成新版开发
- [ ] 完成测试和优化
- [ ] 上线新版页面

**中期（3个月）**：
- [ ] 收集用户反馈
- [ ] 优化细节体验
- [ ] 添加更多快捷键

**长期（6个月）**：
- [ ] 扩展到企业端
- [ ] 支持自定义主题
- [ ] 支持插件化扩展

### 11.5 风险评估

**技术风险**：
- 🟡 中等：进度条节点位置计算复杂
- 🟢 低：切换动画实现
- 🟢 低：响应式布局

**用户风险**：
- 🟡 中等：用户需要适应新交互方式
- 🟢 低：功能保持一致，学习成本低

**项目风险**：
- 🟢 低：开发周期可控（12天）
- 🟢 低：技术栈成熟，风险可控

### 11.6 成功标准

**功能完整性**：
- ✅ 所有核心功能正常工作
- ✅ 无严重 Bug
- ✅ 通过所有测试用例

**性能指标**：
- ✅ 首屏加载时间 < 2s
- ✅ 切换响应时间 < 300ms
- ✅ 动画帧率 > 60fps

**用户满意度**：
- ✅ 用户反馈积极
- ✅ 操作效率提升
- ✅ 学习成本降低

---

## 十二、附录

### 12.1 参考资料

**设计参考**：
- Ant Design 进度条组件
- Material Design 时间线组件
- GitHub 项目进度展示

**技术参考**：
- Vue 3 官方文档
- Element Plus 组件库
- CSS 动画最佳实践

### 12.2 相关文档

- [207] 学生端项目管理页面实现分析.md
- [206] 企业方项目管理页面实现分析.md
- [001] 原型设计文档.md
- [000] 需求分析文档.md

### 12.3 联系方式

**开发团队**：
- 前端负责人：[姓名]
- UI 设计师：[姓名]
- 产品经理：[姓名]

**反馈渠道**：
- 项目 Issue：[链接]
- 邮件：[邮箱]
- 微信群：[群号]

---

**文档结束**

**最后更新**: 2026-01-21
**版本**: v1.0
**作者**: Claude
**审核状态**: 待审核

