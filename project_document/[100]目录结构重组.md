[TOC]

# 揭榜挂帅系统 - 前端目录结构重组方案

## 文档说明

**文档编号**: 100
**文档类型**: 技术方案文档
**创建日期**: 2025-11-22
**文档状态**: 已确认

### 文档概述

本文档旨在解决揭榜挂帅系统前端项目当前存在的目录结构混乱、组件组织不合理、代码复用率低等问题。通过系统性地重组目录结构，建立清晰的代码组织规范，提升项目的可维护性和可扩展性。

### 适用范围

- 前端开发团队
- 项目架构设计
- 代码重构实施

### 核心目标

1. **按业务域分组**: 根据4种用户角色（企业/学校/教师/学生）和功能模块组织代码
2. **提升复用性**: 提取公共组件、逻辑钩子、工具函数
3. **清晰的层次结构**: 建立Layout-Page-Component三层架构
4. **便于维护**: 模块边界清晰，单一职责原则
5. **易于扩展**: 新增功能可快速定位存放位置

---

## 目录

- [一、现状问题分析](#一现状问题分析)
- [二、优化目标](#二优化目标)
- [三、推荐的目录结构方案](#三推荐的目录结构方案)
- [四、views目录组织策略详解](#四views目录组织策略详解)
  - [4.1 按角色+功能双维度分组](#41-按角色功能双维度分组)
  - [4.2 页面内部组织规范](#42-页面内部组织规范)
- [五、路由配置优化方案](#五路由配置优化方案)
  - [5.1 按模块拆分路由](#51-按模块拆分路由)
  - [5.2 路由主文件整合](#52-路由主文件整合)
- [六、组件复用策略](#六组件复用策略)
  - [6.1 公共组件提取原则](#61-公共组件提取原则)
  - [6.2 必须提取的公共组件](#62-必须提取的公共组件)
- [七、实施步骤建议](#七实施步骤建议)
- [八、关键技术点](#八关键技术点)
  - [8.1 路径别名配置](#81-路径别名配置)
  - [8.2 自动导入配置](#82-自动导入配置)
- [九、命名规范建议](#九命名规范建议)
- [十、迁移风险与注意事项](#十迁移风险与注意事项)

---

## 一、现状问题分析

根据对现有代码的深入分析，当前项目存在以下问题：

### 1.1 组件组织混乱
- 22个视图组件全部平铺在views目录下，缺乏业务分组
- 无法快速定位特定功能模块的代码位置
- 项目规模扩大后难以维护

### 1.2 公共组件缺失
- components目录只有HelloWorld示例组件
- 导航栏、页脚等布局组件在多个页面重复实现
- 项目卡片、文件上传等业务组件缺乏统一封装

### 1.3 逻辑复用不足
- 缺少composables目录，无法复用组合式函数
- 认证逻辑、表单验证、分页等通用逻辑分散在各个页面
- 代码重复率高，维护成本大

### 1.4 缺少工具层
- 没有utils目录统一管理工具函数和常量
- 日期格式化、权限判断等工具函数重复实现
- 枚举值、常量定义散落在各处

### 1.5 布局管理缺失
- 没有Layout层，页面结构在每个视图中重复
- 导航栏、页脚等布局组件代码冗余
- 无法统一管理不同角色的页面布局差异

---

## 二、优化目标

### 2.1 建立清晰的代码组织架构
- 按业务域和用户角色对代码进行分组
- 建立统一的目录命名规范
- 实现代码的高内聚、低耦合

### 2.2 提升代码复用率
- 提取公共组件库（布局、业务、基础组件）
- 封装可复用的组合式函数（composables）
- 建立统一的工具函数库

### 2.3 优化开发体验
- 清晰的目录结构便于快速定位代码
- 模块化的路由配置便于权限控制
- 规范的命名约定降低沟通成本

### 2.4 提高项目可维护性
- 单一职责原则，每个模块职责明确
- 依赖关系清晰，便于测试和调试
- 便于新成员快速了解项目结构

### 2.5 支持项目可扩展性
- 新增功能模块时有明确的存放位置
- 支持按需加载和代码分割
- 为未来的微前端改造预留空间

---

## 三、推荐的目录结构方案

```
src/
├── api/                          # API接口层(保持现有)
│   ├── modules/                  # 【新增】按模块拆分API
│   │   ├── auth.js              # 认证相关
│   │   ├── user.js              # 用户管理
│   │   ├── project.js           # 项目管理
│   │   ├── team.js              # 团队管理
│   │   ├── review.js            # 评审管理
│   │   ├── message.js           # 消息通知
│   │   └── statistics.js        # 数据统计
│   ├── request.js               # 请求拦截器(保持)
│   └── index.js                 # 【新增】统一导出
│
├── assets/                       # 静态资源
│   ├── images/                  # 图片资源
│   │   ├── logo/                # Logo相关
│   │   ├── backgrounds/         # 背景图
│   │   └── icons/               # 图标
│   ├── styles/                  # 【新增】样式文件
│   │   ├── variables.css        # CSS变量
│   │   ├── mixins.css          # 样式混入
│   │   ├── reset.css           # 样式重置
│   │   └── common.css          # 公共样式
│   └── fonts/                   # 字体文件(如需要)
│
├── components/                   # 公共组件库
│   ├── layout/                  # 【新增】布局组件
│   │   ├── AppHeader/           # 顶部导航栏
│   │   │   ├── index.vue
│   │   │   └── UserPanel.vue   # 用户面板子组件
│   │   ├── AppFooter/           # 底部栏
│   │   │   └── index.vue
│   │   ├── AppSidebar/          # 侧边栏(如需要)
│   │   │   └── index.vue
│   │   └── Breadcrumb/          # 面包屑导航
│   │       └── index.vue
│   │
│   ├── common/                  # 【新增】通用业务组件
│   │   ├── ProjectCard/         # 项目卡片
│   │   ├── UserAvatar/          # 用户头像
│   │   ├── StatusTag/           # 状态标签
│   │   ├── Timeline/            # 时间轴
│   │   ├── FileUploader/        # 文件上传
│   │   ├── RichEditor/          # 富文本编辑器
│   │   ├── SearchBar/           # 搜索栏
│   │   ├── FilterPanel/         # 筛选面板
│   │   └── Pagination/          # 分页组件
│   │
│   └── base/                    # 【新增】基础UI组件(可选)
│       ├── Button/              # 自定义按钮
│       ├── Dialog/              # 对话框
│       ├── Form/                # 表单包装
│       └── Table/               # 表格包装
│
├── composables/                  # 【新增】组合式函数(逻辑复用)
│   ├── useAuth.js               # 认证逻辑(登录状态、权限判断)
│   ├── useUser.js               # 用户信息管理
│   ├── useProject.js            # 项目操作逻辑
│   ├── useTeam.js               # 团队管理逻辑
│   ├── useForm.js               # 表单通用逻辑(验证、提交)
│   ├── useUpload.js             # 文件上传逻辑
│   ├── usePagination.js         # 分页逻辑
│   ├── useTable.js              # 表格逻辑
│   └── useWebSocket.js          # WebSocket连接(消息推送)
│
├── directives/                   # 【新增】自定义指令(可选)
│   ├── permission.js            # 权限指令 v-permission
│   └── loading.js               # 加载指令 v-loading
│
├── layouts/                      # 【新增】页面布局模板
│   ├── DefaultLayout.vue        # 默认布局(Header+Content+Footer)
│   ├── AuthLayout.vue           # 认证页布局(登录/注册,无Header)
│   ├── AdminLayout.vue          # 管理后台布局(带侧边栏)
│   └── EmptyLayout.vue          # 空布局(仅Content)
│
├── router/                       # 路由配置
│   ├── modules/                 # 【新增】按模块拆分路由
│   │   ├── auth.js              # 认证路由
│   │   ├── student.js           # 学生功能路由
│   │   ├── enterprise.js        # 企业功能路由
│   │   ├── teacher.js           # 教师功能路由
│   │   ├── admin.js             # 管理员路由
│   │   └── common.js            # 公共页面路由
│   ├── guards.js                # 【新增】路由守卫
│   └── index.js                 # 路由主文件
│
├── store/                        # Pinia状态管理
│   ├── modules/                 # 【新增】按模块拆分store
│   │   ├── auth.js              # 认证状态(原user.js重命名)
│   │   ├── user.js              # 用户信息
│   │   ├── project.js           # 项目状态(保持)
│   │   ├── team.js              # 团队状态
│   │   ├── message.js           # 消息状态
│   │   └── app.js               # 应用全局状态(主题、语言等)
│   └── index.js                 # 【新增】统一导出
│
├── utils/                        # 【新增】工具函数库
│   ├── request.js               # 请求工具(可能与api/request.js合并)
│   ├── storage.js               # localStorage/sessionStorage封装
│   ├── validator.js             # 表单验证规则
│   ├── formatter.js             # 格式化函数(日期、金额等)
│   ├── permission.js            # 权限判断工具
│   ├── constants.js             # 常量定义
│   ├── enums.js                 # 枚举值(项目状态、用户角色等)
│   └── helpers.js               # 通用辅助函数
│
├── views/                        # 页面视图(按功能模块重新组织)
│   │
│   ├── auth/                    # 【重组】认证模块
│   │   ├── Login/               # 登录页
│   │   │   └── index.vue
│   │   └── Register/            # 注册页
│   │       └── index.vue
│   │
│   ├── home/                    # 【重组】首页
│   │   └── index.vue            # 首页(合并Home目录)
│   │
│   ├── project/                 # 【重组】项目管理(公共)
│   │   ├── Hall/                # 项目大厅
│   │   │   ├── index.vue
│   │   │   ├── components/     # 页面私有组件
│   │   │   │   ├── ProjectList.vue
│   │   │   │   └── FilterBar.vue
│   │   │   └── hooks/          # 页面私有hooks(可选)
│   │   │       └── useProjectList.js
│   │   ├── Detail/              # 项目详情
│   │   │   ├── index.vue
│   │   │   └── components/
│   │   │       ├── BasicInfo.vue
│   │   │       ├── ProgressTimeline.vue
│   │   │       └── ApplicantList.vue
│   │   └── Tracker/             # 项目进度追踪
│   │       └── index.vue
│   │
│   ├── student/                 # 【新增】学生功能模块
│   │   ├── Apply/               # 揭榜申请
│   │   │   ├── index.vue
│   │   │   └── components/
│   │   │       ├── PersonalApply.vue
│   │   │       └── TeamApply.vue
│   │   ├── MyProject/           # 我的项目
│   │   │   └── index.vue
│   │   ├── Submit/              # 成果提交
│   │   │   └── index.vue
│   │   ├── GrowthCenter/        # 成长中心
│   │   │   ├── index.vue
│   │   │   └── components/
│   │   │       ├── SkillRadar.vue
│   │   │       ├── LevelBadge.vue
│   │   │       └── ProjectHistory.vue
│   │   └── SmartMatch/          # 智能匹配
│   │       └── index.vue
│   │
│   ├── enterprise/              # 【新增】企业功能模块
│   │   ├── MyProject/           # 企业项目管理
│   │   │   ├── index.vue
│   │   │   └── components/
│   │   │       ├── ProjectForm.vue
│   │   │       ├── DraftList.vue
│   │   │       └── PublishedList.vue
│   │   ├── Evaluation/          # 成果评审
│   │   │   └── index.vue
│   │   └── ResultsCenter/       # 成果中心
│   │       └── index.vue
│   │
│   ├── teacher/                 # 【新增】教师功能模块
│   │   ├── Evaluation/          # 成果评审(教师视角)
│   │   │   └── index.vue
│   │   └── StudentManage/       # 学生管理(如需要)
│   │       └── index.vue
│   │
│   ├── admin/                   # 【新增】管理员功能模块
│   │   ├── PreReview/           # 项目初审
│   │   │   └── index.vue
│   │   ├── FinalReview/         # 项目终审
│   │   │   └── index.vue
│   │   ├── MidtermDefense/      # 中期答辩管理
│   │   │   └── index.vue
│   │   ├── DataCenter/          # 数据中心
│   │   │   ├── index.vue
│   │   │   └── components/
│   │   │       ├── ProjectStatistics.vue
│   │   │       ├── UserStatistics.vue
│   │   │       └── ChartPanel.vue
│   │   └── AgreementProcessing/ # 协议处理
│   │       └── index.vue
│   │
│   ├── user/                    # 【重组】用户中心(所有角色通用)
│   │   ├── Profile/             # 个人信息
│   │   │   └── index.vue
│   │   └── Settings/            # 账号设置
│   │       └── index.vue
│   │
│   ├── message/                 # 【重组】消息中心
│   │   └── index.vue
│   │
│   └── info/                    # 【新增】信息页面
│       ├── About/               # 关于我们
│       │   └── index.vue
│       ├── Contact/             # 联系我们
│       │   └── index.vue
│       ├── Help/                # 帮助中心
│       │   └── index.vue
│       └── Privacy/             # 隐私政策
│           └── index.vue
│
├── App.vue                       # 根组件
├── main.js                       # 应用入口
└── style.css                     # 全局样式(可迁移到assets/styles/)
```

---

## 四、views目录组织策略详解

### 4.1 按角色+功能双维度分组

| 目录 | 说明 | 包含页面 |
|------|------|---------|
| `auth/` | 认证模块(无角色区分) | Login, Register |
| `home/` | 首页(无角色区分) | Home |
| `project/` | 项目公共模块(所有角色可访问) | Hall, Detail, Tracker |
| `student/` | 学生专属功能 | Apply, MyProject, Submit, GrowthCenter, SmartMatch |
| `enterprise/` | 企业专属功能 | MyProject, Evaluation, ResultsCenter |
| `teacher/` | 教师专属功能 | Evaluation |
| `admin/` | 管理员专属功能 | PreReview, FinalReview, MidtermDefense, DataCenter, AgreementProcessing |
| `user/` | 用户中心(通用) | Profile, Settings |
| `message/` | 消息中心(通用) | Message |
| `info/` | 信息页面(通用) | About, Contact, Help, Privacy |

#### 分组原则

1. **按访问权限分组**: 不同角色的专属功能放在对应目录
2. **公共功能独立**: 所有角色都能访问的功能放在顶层或project目录
3. **业务内聚性**: 相关功能聚合在同一模块内
4. **扩展性**: 新增角色或功能模块时有明确的存放位置

### 4.2 页面内部组织规范

对于复杂页面，建议采用以下结构：

```
views/student/GrowthCenter/
├── index.vue                    # 页面主文件
├── components/                  # 页面私有组件(不复用)
│   ├── SkillRadar.vue
│   ├── LevelBadge.vue
│   └── ProjectHistory.vue
├── hooks/                       # 页面私有逻辑(可选)
│   └── useGrowthData.js
└── constants.js                 # 页面私有常量(可选)
```

#### 组织原则

- **简单页面**: 直接使用`index.vue`，所有逻辑写在单文件内
- **中等复杂页面**: 拆分`components/`存放页面私有组件（不会被其他页面复用）
- **高度复杂页面**: 可选添加`hooks/`目录存放页面专属的组合式函数，`constants.js`存放页面常量

#### 私有 vs 公共判断标准

| 类型 | 存放位置 | 判断标准 |
|------|---------|---------|
| **页面私有组件** | `views/[module]/[page]/components/` | 仅在当前页面使用，与页面业务强耦合 |
| **模块公共组件** | `views/[module]/components/` (可选) | 在当前模块的多个页面使用 |
| **全局公共组件** | `components/common/` | 跨模块使用，业务通用性强 |

---

## 五、路由配置优化方案

### 5.1 按模块拆分路由

**router/modules/student.js 示例**:

```javascript
import DefaultLayout from '@/layouts/DefaultLayout.vue'

export default [
  {
    path: '/student',
    component: DefaultLayout,
    meta: { requiresAuth: true, role: 'student' },
    children: [
      {
        path: 'apply/:projectId',
        name: 'StudentApply',
        component: () => import('@/views/student/Apply/index.vue'),
        meta: {
          title: '揭榜申请',
          transition: 'slide-fade'
        }
      },
      {
        path: 'my-projects',
        name: 'StudentMyProjects',
        component: () => import('@/views/student/MyProject/index.vue'),
        meta: {
          title: '我的项目',
          transition: 'slide-fade'
        }
      },
      {
        path: 'submit/:projectId',
        name: 'StudentSubmit',
        component: () => import('@/views/student/Submit/index.vue'),
        meta: {
          title: '成果提交',
          transition: 'slide-fade'
        }
      },
      {
        path: 'growth-center',
        name: 'StudentGrowthCenter',
        component: () => import('@/views/student/GrowthCenter/index.vue'),
        meta: {
          title: '成长中心',
          transition: 'slide-fade'
        }
      },
      {
        path: 'smart-match',
        name: 'StudentSmartMatch',
        component: () => import('@/views/student/SmartMatch/index.vue'),
        meta: {
          title: '智能匹配',
          transition: 'slide-fade'
        }
      }
    ]
  }
]
```

**router/modules/auth.js 示例**:

```javascript
import AuthLayout from '@/layouts/AuthLayout.vue'

export default [
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/auth/Login/index.vue'),
    meta: {
      layout: AuthLayout,
      title: '登录',
      transition: 'fade'
    }
  },
  {
    path: '/register',
    name: 'Register',
    component: () => import('@/views/auth/Register/index.vue'),
    meta: {
      layout: AuthLayout,
      title: '注册',
      transition: 'fade'
    }
  }
]
```

**router/modules/common.js 示例**:

```javascript
import DefaultLayout from '@/layouts/DefaultLayout.vue'

export default [
  {
    path: '/',
    redirect: '/home'
  },
  {
    path: '/home',
    name: 'Home',
    component: () => import('@/views/home/index.vue'),
    meta: {
      title: '首页',
      transition: 'slide-fade'
    }
  },
  {
    path: '/projects',
    name: 'ProjectHall',
    component: () => import('@/views/project/Hall/index.vue'),
    meta: {
      title: '项目大厅',
      transition: 'slide-fade'
    }
  },
  {
    path: '/projects/:id',
    name: 'ProjectDetail',
    component: () => import('@/views/project/Detail/index.vue'),
    meta: {
      title: '项目详情',
      transition: 'slide-fade'
    }
  }
]
```

### 5.2 路由主文件整合

**router/index.js**:

```javascript
import { createRouter, createWebHistory } from 'vue-router'
import authRoutes from './modules/auth'
import studentRoutes from './modules/student'
import enterpriseRoutes from './modules/enterprise'
import teacherRoutes from './modules/teacher'
import adminRoutes from './modules/admin'
import commonRoutes from './modules/common'
import { setupGuards } from './guards'

const routes = [
  ...authRoutes,
  ...commonRoutes,
  ...studentRoutes,
  ...enterpriseRoutes,
  ...teacherRoutes,
  ...adminRoutes
]

const router = createRouter({
  history: createWebHistory(),
  routes,
  scrollBehavior(to, from, savedPosition) {
    if (savedPosition) {
      return savedPosition
    } else {
      return { top: 0 }
    }
  }
})

// 配置路由守卫
setupGuards(router)

export default router
```

**router/guards.js 示例**:

```javascript
import { useAuthStore } from '@/store/modules/auth'

export function setupGuards(router) {
  // 全局前置守卫
  router.beforeEach((to, from, next) => {
    const authStore = useAuthStore()

    // 设置页面标题
    if (to.meta.title) {
      document.title = `${to.meta.title} - 揭榜挂帅平台`
    }

    // 权限验证
    if (to.meta.requiresAuth && !authStore.isLoggedIn) {
      next({ name: 'Login', query: { redirect: to.fullPath } })
      return
    }

    // 角色验证
    if (to.meta.role && authStore.userRole !== to.meta.role) {
      next({ name: 'Home' })
      return
    }

    next()
  })

  // 全局后置守卫
  router.afterEach((to, from) => {
    // 页面访问统计等
  })
}
```

---

## 六、组件复用策略

### 6.1 公共组件提取原则

| 组件类型 | 存放位置 | 示例 | 复用场景 |
|---------|---------|------|---------|
| **布局组件** | `components/layout/` | AppHeader, AppFooter, Breadcrumb | 页面框架级别，所有页面共用 |
| **业务组件**(跨页面复用) | `components/common/` | ProjectCard, UserAvatar, Timeline | 多个模块使用的业务组件 |
| **基础组件**(对Element Plus二次封装) | `components/base/` | CustomButton, CustomDialog | 统一UI规范的基础组件 |
| **页面私有组件**(不复用) | `views/[module]/[page]/components/` | 某个页面特有的子组件 | 仅在单个页面内使用 |

### 6.2 必须提取的公共组件

根据现有代码分析，以下组件在多个页面重复出现，必须提取为公共组件：

#### 1. AppHeader (导航栏组件)

**复用场景**: Home、ProjectHall、MyProject等大部分页面

**功能需求**:
- 品牌Logo和名称
- 主导航菜单（首页、项目大厅、我的项目、数据中心、消息）
- 用户面板（登录/未登录状态切换）
- 用户头像、角色徽章
- 下拉菜单（个人中心、退出登录）
- 响应式设计

**组件结构**:
```
components/layout/AppHeader/
├── index.vue           # 主组件
├── UserPanel.vue       # 用户面板
└── NavMenu.vue         # 导航菜单
```

#### 2. ProjectCard (项目卡片组件)

**复用场景**: 项目大厅、我的项目、智能匹配、搜索结果

**功能需求**:
- 项目基本信息展示（名称、企业、领域）
- 项目状态标签
- 奖金/实习机会展示
- 项目统计（浏览量、申请人数）
- 操作按钮（查看详情、申请、收藏）
- 支持不同尺寸（卡片/列表模式）

#### 3. FileUploader (文件上传组件)

**复用场景**: 成果提交、项目发布、揭榜申请、用户注册

**功能需求**:
- 支持拖拽上传
- 文件类型限制
- 文件大小限制
- 上传进度显示
- 文件列表管理（预览、删除）
- 多文件上传支持

#### 4. StatusTag (状态标签组件)

**复用场景**: 项目状态、审核状态、支付状态

**功能需求**:
- 不同状态对应不同颜色
- 支持图标显示
- 支持自定义样式
- 枚举值统一管理

**状态枚举**:
- 项目状态：草稿、待审核、揭榜中、评审中、已完成等
- 审核状态：待审核、已通过、已驳回
- 支付状态：待支付、已支付、支付失败

#### 5. Timeline (时间轴组件)

**复用场景**: 项目详情页的进度展示、成长中心的项目历程

**功能需求**:
- 垂直/水平布局切换
- 节点状态（已完成、进行中、未开始）
- 节点内容自定义
- 时间显示

#### 6. SearchBar (搜索栏组件)

**复用场景**: 项目大厅、我的项目、消息中心

**功能需求**:
- 关键词搜索
- 搜索建议/自动完成
- 搜索历史
- 高级筛选入口

#### 7. FilterPanel (筛选面板组件)

**复用场景**: 项目大厅、数据中心

**功能需求**:
- 多条件筛选（下拉、单选、多选、范围）
- 筛选结果统计
- 重置筛选
- 收起/展开

---

## 七、实施步骤建议

### 阶段1: 基础架构搭建 (1-2天)

#### 任务清单

1. **创建新目录结构**
   ```bash
   mkdir -p src/layouts
   mkdir -p src/composables
   mkdir -p src/utils
   mkdir -p src/directives
   mkdir -p src/components/layout
   mkdir -p src/components/common
   mkdir -p src/components/base
   mkdir -p src/router/modules
   mkdir -p src/store/modules
   mkdir -p src/api/modules
   mkdir -p src/assets/styles
   ```

2. **创建基础工具文件**
   - `utils/constants.js` - 系统常量
   - `utils/enums.js` - 枚举值定义
   - `utils/helpers.js` - 通用辅助函数
   - `utils/validator.js` - 表单验证规则
   - `utils/formatter.js` - 格式化函数

3. **重构store**
   - 创建 `store/modules/auth.js`（原user.js重命名）
   - 创建 `store/modules/app.js`（全局应用状态）
   - 创建 `store/index.js`统一导出

4. **创建Layout组件**
   - `layouts/DefaultLayout.vue` - 默认布局
   - `layouts/AuthLayout.vue` - 认证页布局
   - `layouts/AdminLayout.vue` - 管理后台布局

#### 验收标准

- [ ] 所有目录创建完成
- [ ] 基础工具文件可正常导入使用
- [ ] Layout组件渲染正常
- [ ] Store模块化配置生效

---

### 阶段2: 公共组件提取 (2-3天)

#### 任务清单

1. **提取布局组件**
   - `components/layout/AppHeader/` - 导航栏
     - 从Home.vue中提取导航栏代码
     - 抽离UserPanel为子组件
     - 支持不同角色的菜单配置
   - `components/layout/AppFooter/` - 页脚
   - `components/layout/Breadcrumb/` - 面包屑

2. **提取业务组件**
   - `components/common/ProjectCard/` - 项目卡片
     - 支持卡片/列表两种展示模式
     - 统一项目信息展示逻辑
   - `components/common/FileUploader/` - 文件上传
     - 封装上传逻辑
     - 统一文件类型和大小限制
   - `components/common/StatusTag/` - 状态标签
   - `components/common/Timeline/` - 时间轴

3. **编写Composables**
   - `composables/useAuth.js` - 认证逻辑
     ```javascript
     // 示例代码
     export function useAuth() {
       const authStore = useAuthStore()
       const router = useRouter()

       const isLoggedIn = computed(() => authStore.isLoggedIn)
       const userRole = computed(() => authStore.userRole)

       const login = async (credentials) => {
         // 登录逻辑
       }

       const logout = () => {
         authStore.logout()
         router.push('/login')
       }

       return { isLoggedIn, userRole, login, logout }
     }
     ```
   - `composables/useForm.js` - 表单逻辑
   - `composables/usePagination.js` - 分页逻辑

#### 验收标准

- [ ] 导航栏在所有页面显示一致
- [ ] 项目卡片样式统一
- [ ] 文件上传组件功能正常
- [ ] Composables可在多个页面复用

---

### 阶段3: views目录重组 (3-5天)

#### 任务清单

1. **创建新views目录结构**
   ```bash
   # 认证模块
   mkdir -p src/views/auth/Login
   mkdir -p src/views/auth/Register

   # 首页
   mkdir -p src/views/home

   # 项目公共模块
   mkdir -p src/views/project/Hall
   mkdir -p src/views/project/Detail
   mkdir -p src/views/project/Tracker

   # 学生模块
   mkdir -p src/views/student/Apply
   mkdir -p src/views/student/MyProject
   mkdir -p src/views/student/Submit
   mkdir -p src/views/student/GrowthCenter
   mkdir -p src/views/student/SmartMatch

   # 企业模块
   mkdir -p src/views/enterprise/MyProject
   mkdir -p src/views/enterprise/Evaluation
   mkdir -p src/views/enterprise/ResultsCenter

   # 教师模块
   mkdir -p src/views/teacher/Evaluation

   # 管理员模块
   mkdir -p src/views/admin/PreReview
   mkdir -p src/views/admin/FinalReview
   mkdir -p src/views/admin/MidtermDefense
   mkdir -p src/views/admin/DataCenter
   mkdir -p src/views/admin/AgreementProcessing

   # 用户中心
   mkdir -p src/views/user/Profile

   # 消息中心
   mkdir -p src/views/message

   # 信息页面
   mkdir -p src/views/info/About
   mkdir -p src/views/info/Contact
   mkdir -p src/views/info/Help
   mkdir -p src/views/info/Privacy
   ```

2. **迁移现有组件**
   ```bash
   # 使用git mv保留历史记录
   git mv src/views/Login src/views/auth/Login
   git mv src/views/Register src/views/auth/Register
   git mv src/views/Home/Home.vue src/views/home/index.vue
   # ... 依次迁移所有组件
   ```

3. **更新组件内的import路径**
   - 将AppHeader等公共组件的引用改为从`@/components/layout/`导入
   - 更新API调用路径
   - 更新路由跳转路径

4. **拆分复杂页面**
   - ProjectHall: 拆分FilterBar、ProjectList子组件
   - ProjectDetail: 拆分BasicInfo、ProgressTimeline子组件
   - GrowthCenter: 拆分SkillRadar、LevelBadge子组件

#### 验收标准

- [ ] 所有页面迁移到新目录
- [ ] 页面功能正常，无引用错误
- [ ] 复杂页面已拆分子组件
- [ ] Git历史记录保留完整

---

### 阶段4: 路由重构 (1-2天)

#### 任务清单

1. **创建路由模块文件**
   - `router/modules/auth.js` - 认证路由
   - `router/modules/student.js` - 学生路由
   - `router/modules/enterprise.js` - 企业路由
   - `router/modules/teacher.js` - 教师路由
   - `router/modules/admin.js` - 管理员路由
   - `router/modules/common.js` - 公共路由

2. **更新路由路径**（可选，根据需求决定是否修改URL）
   - `/apply/:projectId` → `/student/apply/:projectId`
   - `/evaluation/:projectId` → `/enterprise/evaluation/:projectId`
   - 更新所有router-link和$router.push引用

3. **配置嵌套路由**
   - 学生模块使用DefaultLayout
   - 认证模块使用AuthLayout
   - 管理员模块使用AdminLayout

4. **编写路由守卫**
   - 认证守卫：未登录跳转到登录页
   - 权限守卫：角色权限验证
   - 页面标题设置

#### 验收标准

- [ ] 所有路由模块化配置完成
- [ ] 路由跳转功能正常
- [ ] 权限控制生效
- [ ] 页面标题正确显示

---

### 阶段5: 测试与优化 (2-3天)

#### 任务清单

1. **功能测试**
   - [ ] 登录/注册流程
   - [ ] 项目浏览和搜索
   - [ ] 项目申请和提交
   - [ ] 审核流程
   - [ ] 消息通知
   - [ ] 数据统计

2. **兼容性测试**
   - [ ] Chrome浏览器
   - [ ] Firefox浏览器
   - [ ] Edge浏览器
   - [ ] 移动端响应式

3. **性能优化**
   - [ ] 路由懒加载配置
   - [ ] 图片资源压缩
   - [ ] 代码分割优化
   - [ ] 打包体积分析

4. **代码审查**
   - [ ] 命名规范检查
   - [ ] 代码风格统一
   - [ ] 注释完善
   - [ ] 移除无用代码

#### 验收标准

- [ ] 所有功能测试通过
- [ ] 浏览器兼容性良好
- [ ] 打包体积合理
- [ ] 代码质量达标

---

## 八、关键技术点

### 8.1 路径别名配置

**vite.config.js**:

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src'),
      '@components': path.resolve(__dirname, 'src/components'),
      '@views': path.resolve(__dirname, 'src/views'),
      '@layouts': path.resolve(__dirname, 'src/layouts'),
      '@api': path.resolve(__dirname, 'src/api'),
      '@utils': path.resolve(__dirname, 'src/utils'),
      '@assets': path.resolve(__dirname, 'src/assets'),
      '@store': path.resolve(__dirname, 'src/store'),
      '@composables': path.resolve(__dirname, 'src/composables')
    }
  }
})
```

**使用示例**:

```javascript
// 之前
import AppHeader from '../../../components/layout/AppHeader/index.vue'

// 之后
import AppHeader from '@/components/layout/AppHeader/index.vue'
// 或
import AppHeader from '@components/layout/AppHeader/index.vue'
```

---

### 8.2 自动导入配置

使用`unplugin-auto-import`和`unplugin-vue-components`实现自动导入，减少样板代码。

**安装依赖**:

```bash
npm install -D unplugin-auto-import unplugin-vue-components
```

**vite.config.js**:

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

export default defineConfig({
  plugins: [
    vue(),
    // 自动导入Vue、Vue Router、Pinia等API
    AutoImport({
      resolvers: [ElementPlusResolver()],
      imports: [
        'vue',
        'vue-router',
        'pinia'
      ],
      dts: 'src/auto-imports.d.ts', // 生成类型声明文件
      eslintrc: {
        enabled: true // 生成ESLint配置
      }
    }),
    // 自动导入组件
    Components({
      resolvers: [ElementPlusResolver()],
      dirs: [
        'src/components/common',
        'src/components/layout',
        'src/components/base'
      ],
      dts: 'src/components.d.ts', // 生成类型声明文件
      extensions: ['vue']
    })
  ]
})
```

**使用效果**:

```vue
<script setup>
// 之前需要手动导入
// import { ref, computed, onMounted } from 'vue'
// import { useRouter, useRoute } from 'vue-router'
// import { useAuthStore } from '@/store/modules/auth'
// import ProjectCard from '@/components/common/ProjectCard/index.vue'

// 之后自动导入，直接使用
const router = useRouter()
const route = useRoute()
const authStore = useAuthStore()
const count = ref(0)

onMounted(() => {
  console.log('组件已挂载')
})
</script>

<template>
  <!-- ProjectCard自动导入，无需注册 -->
  <ProjectCard :data="projectData" />
</template>
```

---

### 8.3 环境变量配置

**创建环境文件**:

```
.env                 # 所有环境通用的配置
.env.development     # 开发环境配置
.env.production      # 生产环境配置
.env.staging         # 预发布环境配置(可选)
```

**.env.development**:

```env
# 开发环境配置
VITE_APP_TITLE=揭榜挂帅平台（开发环境）
VITE_API_BASE_URL=http://localhost:8091/api/v1
VITE_UPLOAD_URL=http://localhost:8091/upload
```

**.env.production**:

```env
# 生产环境配置
VITE_APP_TITLE=揭榜挂帅平台
VITE_API_BASE_URL=https://api.example.com/api/v1
VITE_UPLOAD_URL=https://api.example.com/upload
```

**使用环境变量**:

```javascript
// api/request.js
const baseURL = import.meta.env.VITE_API_BASE_URL

const instance = axios.create({
  baseURL,
  timeout: 5000
})
```

---

### 8.4 组件自动注册

**components/index.js**:

```javascript
// 全局自动注册components/common下的所有组件
import { defineAsyncComponent } from 'vue'

const components = import.meta.glob('./common/**/index.vue')

export default {
  install(app) {
    for (const [path, component] of Object.entries(components)) {
      const componentName = path
        .split('/')
        .slice(-2, -1)[0]

      app.component(
        componentName,
        defineAsyncComponent(component)
      )
    }
  }
}
```

**main.js**:

```javascript
import components from './components'

app.use(components)
```

---

## 九、命名规范建议

### 9.1 目录命名规范

| 类型 | 规范 | 示例 | 说明 |
|------|------|------|------|
| **功能模块目录** | 小写+中划线(kebab-case) | `my-project`, `growth-center`, `smart-match` | views下的页面目录 |
| **组件目录** | 大驼峰(PascalCase) | `ProjectCard`, `AppHeader`, `FileUploader` | components下的组件目录 |
| **工具目录** | 小写单词 | `utils`, `api`, `store` | 技术性目录 |

### 9.2 文件命名规范

| 文件类型 | 规范 | 示例 | 说明 |
|---------|------|------|------|
| **Vue组件文件** | 大驼峰(PascalCase) | `ProjectCard.vue`, `UserPanel.vue` | 所有.vue文件 |
| **页面入口文件** | index.vue | `index.vue` | 页面主文件统一使用index.vue |
| **JS/TS文件** | 小写+中划线 | `use-auth.js`, `constants.js`, `api-config.js` | 脚本文件 |
| **样式文件** | 小写+中划线 | `common.css`, `variables.css` | CSS文件 |

### 9.3 组件命名规范

| 组件类型 | 命名规范 | 示例 | 说明 |
|---------|---------|------|------|
| **页面组件** | 模块+功能 | `StudentApply`, `EnterpriseMyProjects` | name属性 |
| **布局组件** | App前缀 | `AppHeader`, `AppFooter`, `AppSidebar` | 布局级组件 |
| **业务组件** | 业务名称 | `ProjectCard`, `UserAvatar`, `StatusTag` | 可复用业务组件 |
| **基础组件** | Base前缀(可选) | `BaseButton`, `BaseDialog` | 对UI库的封装 |

### 9.4 路由命名规范

| 路由类型 | 命名规范 | 示例 | 说明 |
|---------|---------|------|------|
| **路由name** | 大驼峰+模块前缀 | `StudentApply`, `EnterpriseMyProjects`, `AdminPreReview` | 便于识别所属模块 |
| **路由path** | 小写+中划线 | `/student/my-projects`, `/admin/pre-review` | URL友好 |

### 9.5 变量命名规范

| 变量类型 | 规范 | 示例 | 说明 |
|---------|------|------|------|
| **普通变量** | 小驼峰 | `projectList`, `userName`, `isLoggedIn` | 一般变量 |
| **常量** | 全大写+下划线 | `API_BASE_URL`, `MAX_FILE_SIZE`, `USER_ROLES` | 常量值 |
| **私有变量** | 下划线前缀 | `_internalState`, `_handleClick` | 内部使用变量 |
| **组合式函数** | use前缀 | `useAuth`, `useForm`, `usePagination` | composables |

### 9.6 CSS类命名规范（BEM）

```css
/* Block - 块 */
.project-card { }

/* Element - 元素 */
.project-card__title { }
.project-card__content { }
.project-card__footer { }

/* Modifier - 修饰符 */
.project-card--featured { }
.project-card--disabled { }
.project-card__title--large { }
```

---

## 十、迁移风险与注意事项

### 10.1 路径引用更新

**风险**: 移动文件后，所有import路径需要更新，遗漏会导致运行时错误

**解决方案**:
1. 使用VS Code全局搜索替换
2. 配置路径别名，减少相对路径使用
3. 使用ESLint检测未解析的导入

**操作步骤**:
```bash
# 1. 查找所有需要更新的引用
# 例如: 查找所有引用Login组件的地方
grep -r "from.*Login" src/

# 2. 批量替换
# VS Code: Ctrl+Shift+H 全局替换
# 将 '@/views/Login' 替换为 '@/views/auth/Login'
```

---

### 10.2 路由路径变更

**风险**: 如果修改路由路径，需要同步更新所有router-link和编程式导航

**影响范围**:
- `<router-link to="/old-path">`
- `router.push('/old-path')`
- `router.replace('/old-path')`
- 浏览器书签和外部链接

**建议**:
1. **优先方案**: 保持现有路由路径不变，只调整文件组织
2. **必须修改**: 使用路由重定向保证向后兼容
   ```javascript
   // 添加重定向规则
   {
     path: '/apply/:projectId',
     redirect: to => ({
       name: 'StudentApply',
       params: to.params
     })
   }
   ```

---

### 10.3 Git历史记录保留

**风险**: 直接移动文件可能丢失Git历史记录

**解决方案**: 使用`git mv`命令

```bash
# 错误做法（会丢失历史）
mv src/views/Login src/views/auth/Login

# 正确做法（保留历史）
git mv src/views/Login src/views/auth/Login
```

**批量迁移脚本**:

```bash
#!/bin/bash
# migrate-views.sh

# 认证模块
git mv src/views/Login src/views/auth/Login
git mv src/views/Register src/views/auth/Register

# 学生模块
mkdir -p src/views/student
git mv src/views/Apply src/views/student/Apply
git mv src/views/MyProject src/views/student/MyProject
git mv src/views/Submit src/views/student/Submit
git mv src/views/GrowthCenter src/views/student/GrowthCenter
git mv src/views/SmartMatch src/views/student/SmartMatch

# ... 其他迁移
```

---

### 10.4 分支管理策略

**风险**: 直接在主分支重构可能影响其他开发人员

**建议流程**:

1. **创建重构分支**
   ```bash
   git checkout -b refactor/directory-restructure
   ```

2. **分阶段提交**
   ```bash
   # 阶段1: 基础架构
   git add src/layouts src/utils
   git commit -m "feat: 添加layouts和utils目录结构"

   # 阶段2: 公共组件
   git add src/components
   git commit -m "feat: 提取公共组件"

   # 阶段3: views重组
   git add src/views
   git commit -m "refactor: 重组views目录结构"

   # 阶段4: 路由重构
   git add src/router
   git commit -m "refactor: 模块化路由配置"
   ```

3. **代码审查**
   - 创建Pull Request
   - 团队成员Review
   - 通过CI/CD测试

4. **合并主分支**
   ```bash
   git checkout main
   git merge refactor/directory-restructure
   ```

---

### 10.5 渐进式迁移策略

**风险**: 一次性迁移工作量大，容易出错

**建议**: 按模块逐步迁移

**迁移优先级**:

| 优先级 | 模块 | 原因 |
|-------|------|------|
| P0 | 公共组件、工具函数 | 被其他模块依赖，优先提取 |
| P1 | 认证模块(Login/Register) | 功能独立，影响范围小 |
| P1 | 信息页面(About/Help等) | 功能简单，易于验证 |
| P2 | 学生模块 | 功能复杂度中等 |
| P2 | 企业模块 | 功能复杂度中等 |
| P3 | 管理员模块 | 功能复杂，需要权限测试 |

**迁移节奏**:
- 第1周: P0 + P1
- 第2周: P2
- 第3周: P3 + 测试优化

---

### 10.6 团队协作注意事项

1. **提前通知**: 重构前通知团队成员，避免代码冲突
2. **文档同步**: 更新项目README和开发文档
3. **培训说明**: 向团队讲解新的目录结构和命名规范
4. **Code Review**: 重构代码必须经过审查
5. **测试验证**: 功能测试、集成测试全部通过后才能合并

---

### 10.7 回滚方案

**如果重构出现问题，需要快速回滚**:

```bash
# 方案1: 回退到重构前的提交
git log --oneline  # 找到重构前的commit hash
git reset --hard <commit-hash>

# 方案2: 回退merge
git revert -m 1 <merge-commit-hash>

# 方案3: 创建hotfix分支修复
git checkout -b hotfix/rollback-refactor
```

---

### 10.8 性能影响评估

**可能的性能影响**:

1. **路由懒加载**: 模块化后需检查分包策略
2. **组件自动注册**: 确保只注册必要的全局组件
3. **打包体积**: 检查是否引入不必要的依赖

**优化措施**:

```javascript
// vite.config.js - 分包优化
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor': ['vue', 'vue-router', 'pinia'],
          'element-plus': ['element-plus'],
          'student': [
            './src/views/student/Apply',
            './src/views/student/MyProject',
            './src/views/student/Submit'
          ],
          'enterprise': [
            './src/views/enterprise/MyProject',
            './src/views/enterprise/Evaluation'
          ]
        }
      }
    }
  }
})
```

---

## 十一、附录

### 11.1 完整迁移检查清单

#### 目录结构
- [ ] 创建所有新目录
- [ ] 迁移所有文件到新位置
- [ ] 删除旧的空目录

#### 代码更新
- [ ] 更新所有import路径
- [ ] 更新路由配置
- [ ] 更新router-link和编程式导航
- [ ] 更新API调用路径
- [ ] 更新Store导入路径

#### 配置文件
- [ ] vite.config.js路径别名配置
- [ ] 环境变量文件创建
- [ ] ESLint配置更新
- [ ] TypeScript配置更新(如使用TS)

#### 组件提取
- [ ] AppHeader组件提取
- [ ] ProjectCard组件提取
- [ ] FileUploader组件提取
- [ ] StatusTag组件提取
- [ ] Timeline组件提取

#### Composables
- [ ] useAuth.js编写
- [ ] useForm.js编写
- [ ] usePagination.js编写

#### 工具函数
- [ ] constants.js常量定义
- [ ] enums.js枚举值定义
- [ ] validator.js验证函数
- [ ] formatter.js格式化函数

#### 路由
- [ ] 拆分路由模块
- [ ] 配置嵌套路由
- [ ] 编写路由守卫
- [ ] 添加重定向规则(如需要)

#### Layout
- [ ] DefaultLayout实现
- [ ] AuthLayout实现
- [ ] AdminLayout实现

#### 测试
- [ ] 功能测试通过
- [ ] 权限测试通过
- [ ] 兼容性测试通过
- [ ] 性能测试通过

#### 文档
- [ ] 更新README
- [ ] 更新开发文档
- [ ] 编写迁移说明
- [ ] 团队培训完成

---

### 11.2 常用命令速查

```bash
# 创建目录结构
mkdir -p src/{layouts,composables,utils,directives}
mkdir -p src/components/{layout,common,base}
mkdir -p src/router/modules
mkdir -p src/store/modules
mkdir -p src/api/modules

# 批量移动文件（保留Git历史）
git mv src/views/Login src/views/auth/Login
git mv src/views/Register src/views/auth/Register

# 全局搜索文件引用
grep -r "from.*Login" src/
grep -r "router.push" src/

# 查找未使用的文件
find src/views -type f -name "*.vue" | while read file; do
  grep -rq $(basename $file .vue) src/ || echo "未使用: $file"
done

# 检查打包体积
npm run build
npx vite-bundle-visualizer

# 代码格式化
npm run lint
npm run format
```

---

### 11.3 参考资源

- [Vue 3 官方文档](https://cn.vuejs.org/)
- [Vue Router 官方文档](https://router.vuejs.org/zh/)
- [Pinia 官方文档](https://pinia.vuejs.org/zh/)
- [Element Plus 官方文档](https://element-plus.org/zh-CN/)
- [Vite 官方文档](https://cn.vitejs.dev/)
- [Vue 3 组合式API风格指南](https://cn.vuejs.org/guide/introduction.html)
- [Vue 3 项目最佳实践](https://github.com/vuejs/core/tree/main/packages)

---

## 文档修订历史

| 版本 | 日期 | 修订人 | 修订内容 |
|------|------|--------|---------|
| 1.0 | 2025-11-22 | Claude | 初始版本，完成目录结构重组方案 |

---

**文档结束**
