# 背景与目标
<a id="section-1-background"></a>

背景：
本项目为“揭榜挂帅”平台前端（Vue 3 + Vite）。现有 `项目详情` 页面含较多里程碑管理操作和较大的里程碑卡片；同时“我的项目”页面缺乏发布方/中标方的独立管理入口。为提升职责分离、减少详情页臃肿并优化用户流程，需要新增专用的“项目管理”页面（发布方与中标方视图）并在“我的项目”中加入“我发布的”“我中标的”两个导航入口，同时将里程碑在详情页中精简为仅展示信息，把所有管理操作集中到新的管理页面。

目标：
- 在 `我的项目` 中新增导航项：`我发布的`（企业）和 `我中标的`（学生），并在右侧区域展示符合示例的项目卡列表；卡片点击可进入项目管理页面。
- 新增项目管理页 `/projects/:id/manage`（或同等路由），用于集中执行里程碑管理、交付物管理、团队协作与审核功能，并根据角色显示对应操作权限。
- 简化 `项目详情` 中的里程碑显示为只读、压缩的卡片（保留标题、状态、计划/实际日期、交付物计数、进度），删除交互按钮与审核操作。

----------------------------

目录

- [1 背景与目标](#section-1-background)
- [2 范围与非范围](#section-2-scope)
- [3 总体设计思路](#section-3-design)
- [4 详细设计](#section-4-detailed)
  - [4.1 路由](#section-4-1-routing)
  - [4.2 页面与组件（文件/位置）](#section-4-2-components)
  - [4.3 Store 与 API](#section-4-3-features)
  - [功能点 A：我的项目 - 我发布的 / 我中标的](#feature-a-my-projects)
  - [功能点 B：项目管理页 - 概览区](#feature-b-overview)
  - [功能点 C：里程碑管理清单](#feature-c-milestones)
  - [功能点 D：交付物上传/审核](#feature-d-deliverables)
  - [功能点 E：权限校验与路由守卫](#feature-e-permissions)
  - [功能点 F：项目详情页里程碑只读卡片](#feature-f-readonly)
- [5 代码实现精简说明](#section-5-code)
- [6 权限与显示逻辑](#section-6-permissions)
- [7 样式与界面规范（里程碑压缩建议）](#section-7-style)
- [8 测试/验收标准（详细）](#section-8-testing)
- [9 时间计划与任务拆分（todolist，按优先级）](#section-9-timeline)
- [10 风险与缓解](#section-10-risk)
- [11 提交与文档更新要求](#section-11-submission)

----------------------------

<a id="section-2-scope"></a>
2. 范围与非范围

包含：
- 前端新增/修改：`src/views/student/MyProject/index.vue`（导航扩展）、`src/router/modules/common.js`（路由新增）、`src/views/project/Manage/index.vue`（新增页面）、`src/views/project/Detail/index.vue`（里程碑展示精简）、`src/store/modules/project.js`（或类似 store）与 `src/api/project.js`（调用扩展）。
- UI：项目卡显示样式、里程碑卡片压缩样式、管理页里程碑完整功能区。
- 文档：在 `project_document/` 增加本开发计划文件，并更新 `[000]功能模块文档.md`（记录变更）。

不包含（当前任务范围外）：
- 后端接口改动（需与后端对接，若后端缺接口需单独提需求）；
- 自动化测试脚本（非必须），除非后续要求。

----------------------------

<a id="section-3-design"></a>
3. 总体设计思路

遵循单一职责与界面聚合原则：
- 项目详情页（公共、对外）负责对外展示和用户浏览，仅保留只读信息与查看按钮（不包含管理操作）；
- 项目管理页（受限、需登录）是发布方或中标方进行里程碑创建/编辑/审核、交付物上传、团队管理的主场所；
- `我的项目` 页面作为用户项目入口集成导航，按用户角色呈现“我发布的”“我中标的”等Tab，便于快速进入各自的管理工作台。

组件化与复用：里程碑展示（精简卡片）与管理（详情面板）使用不同组件：
- `MilestoneCardReadOnly.vue`（用于Detail页，紧凑只读）
- `MilestoneCardManage.vue`（用于 Manage 页，包含操作按钮、编辑弹窗等）

数据流采用现有 Pinia store，新增管理页相关 actions 并与 API 层解耦。

----------------------------

<a id="section-4-detailed"></a>
4. 详细设计

<a id="section-4-1-routing"></a>
4.1 路由
- 新增路由项（`src/router/modules/common.js` 或相应模块）：
```js
{
  path: 'projects/:id/manage',
  name: 'ProjectManage',
  component: () => import('@/views/project/Manage/index.vue'),
  meta: { title: '项目管理', requiresAuth: true }
}
```
- `我的项目` 可通过 query 或子路由（例如 `/my-projects?tab=published`）来表示选中 Tab，或在 `MyProject` 组件内部用局部状态切换。

<a id="section-4-2-components"></a>
4.2 页面与组件（文件/位置）
- `src/views/student/MyProject/index.vue`
  - 在侧边栏或顶部导航新增两个按钮：`我发布的`、`我中标的`；控制变量 `activeRoleTab` 的可能值扩展为 `published`、`studentProjects`（或 `awarded`/`won`）。
  - 右侧 `main-content` 保留已有 `project-card` 模板，统一为卡片组件 `ProjectCardCompact.vue`（展示示例所需信息），点击进入 `/projects/:id/manage`。

- 新增：`src/views/project/Manage/index.vue`
  - 页面结构建议：
    - 顶部项目概览（`ProjectOverview`）
    - 左侧或主区：里程碑列表（`MilestoneManageList`）
    - 右侧或下方：交付物上传区、团队面板、审计日志
  - 里程碑项使用 `MilestoneCardManage.vue`，提供编辑、提交、审核、上传交付物等操作（基于用户角色显示或隐藏按钮）。

- 修改：`src/views/project/Detail/index.vue`
  - 把现有里程碑卡片替换为 `MilestoneCardReadOnly.vue`，移除页面内所有对里程碑的管理动作（例如 `openMilestoneDetailDialog`、`查看详情` 按钮、发布方专属的 `el-badge` 审核角标等）。

- 插入：逐功能点详细实现指南（开发人员可复制执行）

下面给出每个功能点的“逐步实现”指南，目标是让开发人员能按步骤完成而无需额外设计决策。每一步都标注要修改/新增的具体文件、函数/变量名、prop、事件和 API 调用示例。

<a id="feature-a-my-projects"></a>
功能点 A：我的项目 - `我发布的` / `我中标的`

目标：在 `src/views/student/MyProject/index.vue` 的侧边栏增加两个 Tab（`我发布的`、`我中标的`），并在主区显示对应数据，点击卡片进入管理页（`ProjectManage`）。

步骤（按序，直接复制执行）：
1) 在文件 `src/views/student/MyProject/index.vue` 的 `<script setup>` 内新增变量与方法（精确代码）：

```js
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'
import { useProjectStore } from '@/store/modules/project'

const router = useRouter()
const store = useProjectStore()
const activeRoleTab = ref('studentProjects') // possible: 'studentProjects' | 'published' | 'won'

// 假设 store.state.myProjects 存放当前用户相关项目列表
const publishedCount = computed(() => store.myProjects.filter(p => p.ownerType === 'enterprise').length)
const wonCount = computed(() => store.myProjects.filter(p => p.ownerType === 'student' && p.status === 'awarded').length)

function viewManage(project) {
  router.push({ name: 'ProjectManage', params: { id: project.id } })
}
```

2) 在同文件模板侧边栏区域（找到 class="sidebar" 内合适位置）插入两个按钮，确保使用现有 `sidebar-item` 样式：

```html
<button class="sidebar-item" :class="{ active: activeRoleTab === 'published' }" @click="activeRoleTab = 'published'">
  我发布的 ({{ publishedCount }})
</button>
<button class="sidebar-item" :class="{ active: activeRoleTab === 'won' }" @click="activeRoleTab = 'won'">
  我中标的 ({{ wonCount }})
</button>
```

3) 在原有 `filteredProjects` 计算属性中加入对 `activeRoleTab` 的判断（精确替换/插入）：

```js
if (activeRoleTab.value === 'published' && p.ownerType !== 'enterprise') return false
if (activeRoleTab.value === 'won' && !(p.ownerType === 'student' && p.status === 'awarded')) return false
```

4) 抽离并使用 `ProjectCardCompact` 组件：新建 `src/components/ProjectCardCompact.vue`（详见 组件定义），并在模板中替换原有 `article.project-card` 为：

```html
<ProjectCardCompact v-for="p in filteredProjects" :key="p.id" :project="p" @view="viewManage" />
```

5) 注意点与校验：
- 使用 `store.fetchMyProjects()` 在页面 `onMounted` 时保证 `store.myProjects` 已经填充，避免计数为 0 的假象。
- 若需支持深链，请在路由 push 时保留当前 query，例如 `router.push({ name:'ProjectManage', params:{id}, query: { from: 'my-projects' } })`。

组件 `ProjectCardCompact.vue`：实现规范（精准）
- 文件：`src/components/ProjectCardCompact.vue`
- Props：
  - `project` { type: Object, required: true }
  - `showActions` { type: Boolean, default: false }
- Emits：
  - `view` (projectId)
  - `upload` (projectId)
  - `collaborate` (projectId)
- 模板要点：
  - 显示 `project.name`, `project.statusText`, `project.progress`, `project.remainDays`, `project.reward`, `project.brief`
  - 点击卡片主体触发 `emit('view', project.id)`，点击上传/协作按钮触发对应 emit

<a id="feature-b-overview"></a>
功能点 B：项目管理页 - 概览区（ProjectOverview）

目标：实现 `src/views/project/Manage/index.vue` 的顶部概览区，展示项目基本信息与快速操作（编辑、邀请成员、导出）。

步骤（逐项复制实现）：
1) 新建文件 `src/views/project/Manage/index.vue`，模板骨架（准确代码）：

```html
<template>
  <div class="project-manage-root">
    <ProjectOverview :project="project" :canEdit="canEdit" @edit="onProjectEdit" />
    <div class="manage-grid">
      <MilestoneManageList :milestones="milestones" :canEdit="canEdit" :canReview="canReview" @edit="openMilestoneEdit" @review="handleMilestoneReview" />
      <div class="side-panels">
        <DeliverablePanel :projectId="project.id" @uploaded="refreshMilestones" />
        <TeamPanel :members="project.members" :canEdit="canEdit" />
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, computed } from 'vue'
import { useRoute } from 'vue-router'
import { useProjectStore } from '@/store/modules/project'

const route = useRoute()
const projectId = route.params.id
const store = useProjectStore()
const project = ref(null)
const milestones = ref([])
const canEdit = computed(() => store.isCurrentUserOwner(store.manageProject))
const canReview = computed(() => store.isCurrentUserOwner(store.manageProject) || store.isCurrentUserAdmin())

async function fetchManageData() {
  const res = await store.fetchProjectForManage(projectId)
  project.value = res.project
  milestones.value = res.milestones
}

onMounted(fetchManageData)

function onProjectEdit(payload) {
  // payload 为编辑后的项目字段
  return store.updateProject(projectId, payload).then(fetchManageData)
}

function refreshMilestones() {
  return store.fetchProjectForManage(projectId).then(r => { milestones.value = r.milestones })
}
</script>
```

2) `ProjectOverview` 组件要求：
- Props: `project`, `canEdit`
- Emits: `edit`
- 内部实现精确：渲染 `el-tag` 状态、`el-rate` 评分、`el-button` 编辑（仅当 `canEdit` 为 true 显示）
- 编辑触发 `emit('edit', updatedPayload)`

<a id="feature-c-milestones"></a>
功能点 C：里程碑管理清单（MilestoneManageList / MilestoneCardManage）

目标：实现可增删改查、审核、上传交付物入口的里程碑管理列表。

逐步实现（逐项复制）：
1) 新建组件 `src/components/MilestoneCardManage.vue`，精确接口：

Props:
- `milestone` { type: Object, required: true }
- `canEdit` { type: Boolean, default: false }
- `canReview` { type: Boolean, default: false }

Emits:
- `edit` (milestone)
- `delete` (milestoneId)
- `review` ({ milestoneId, action, remark })
- `viewDeliverables` (milestoneId)

模板要点（必须实现）：
- 标题行显示 `milestone.title` 与状态 `el-tag`；
- 右侧显示按钮（条件渲染）：
  - `编辑`（visible if canEdit） -> 打开 `MilestoneEditModal`（实现为本地组件）并 emit 'edit'；
  - `删除`（visible if canEdit） -> 调用 `deleteMilestoneAPI(milestone.id)` 并 emit 'delete'；
  - `审核`（visible if canReview and milestone.status !== 'completed'） -> 弹出确认并 emit 'review'；
  - `查看交付物` -> emit 'viewDeliverables'

2) 编辑模态（MilestoneEditModal）字段（精确约束）：
- title: string（非空，最长 80 字符）
- plannedDate: yyyy-mm-dd（必填）
- description: string（可选，最长 1000 字符）
- deliverables: array of { name: string, type: string }（可选）

3) MilestoneManageList 行为：
- 在创建/编辑/删除/审核等操作后调用 store 的 `updateMilestone` / `createMilestone` / `deleteMilestone`，并在成功回调中 `await store.fetchProjectForManage(projectId)` 刷新本地数据或用局部替换策略更新 `manageMilestones`。

<a id="feature-d-deliverables"></a>
功能点 D：交付物上传/审核（DeliverablePanel）

目标：承接方上传交付物，发布方审核交付物。

逐步实现（逐项复制）：
1) 新建 `src/components/DeliverablePanel.vue`，使用 Element Plus `el-upload`：

Props:
- `projectId` Number required
- `milestoneId` Number optional

主要方法（精确实现）：
- `submitDeliverable(file, milestoneId)` 调用 `submitDeliverableAPI(projectId, formData)`，formData 包含 `file`, `milestoneId`, `meta`（JSON）
- `onUploadSuccess(response, file)` -> emit 'uploaded' 并 `ElMessage.success('上传成功')`
- `onUploadError(err)` -> `ElMessage.error('上传失败')`

2) 上传接口说明（与后端确认字段）：
- POST `/api/v1/projects/:projectId/deliverables`，multipart/form-data
- fields:
  - `projectId` (number)
  - `milestoneId` (number, optional)
  - `meta` (stringified JSON)
  - `file` (binary)

3) 审核流程（发布方）：
- 发布方在交付物列表行点击 `审核`，弹出 `ElDialog` 输入 `remark` 与 `通过/驳回`，提交到 `reviewDeliverableAPI(deliverableId, { status:'approved'|'rejected', remark })`，成功后刷新 `manageMilestones`。

<a id="feature-e-permissions"></a>
功能点 E：权限校验与路由守卫（精确）

目标：保证管理页安全访问与双重权限校验（路由守卫 + 页面内二次校验）。

实现步骤（逐项复制）：
1) 在 `src/router/guards.js` 中（existing guards 里）新增判断（示例）：

```js
router.beforeEach((to, from, next) => {
  if (to.name === 'ProjectManage') {
    if (!authStore.isLoggedIn) return next({ name: 'Login' })
    // 允许进入，但页面会根据用户是否为 owner 展示操作按钮
    return next()
  }
  // existing guards...
})
```

2) 页面内双重校验（必要且必须实现）：在 `Manage/index.vue` `fetchManageData` 完成后设置 `canEdit`、`canReview`：

```js
canEdit.value = store.isCurrentUserOwner(store.manageProject)
canReview.value = store.isCurrentUserAdmin() || canEdit.value
```

3) 所有触发写操作的方法开头都加权限判断：

```js
if (!canEdit.value) { ElMessage.error('无权限执行该操作'); return }
```

<a id="feature-f-readonly"></a>
功能点 F：项目详情页里程碑只读卡片（MilestoneCardReadOnly）

目标：替换 `src/views/project/Detail/index.vue` 内现有可操作卡片为只读、紧凑卡片。

逐步实现（直接复制）：
1) 新建文件 `src/components/MilestoneCardReadOnly.vue`（代码如下）：

```html
<template>
  <div class="milestone-card-readonly">
    <div class="title-row">
      <h4 class="milestone-title">{{ milestone.title }}</h4>
      <el-tag size="small" :type="getTagType(milestone.status)">{{ getStatusText(milestone.status) }}</el-tag>
    </div>
    <div class="meta-row">
      <span class="planned-date"><el-icon><Calendar /></el-icon> {{ milestone.plannedDate }}</span>
      <span v-if="milestone.actualDate" class="actual-date">实际：{{ milestone.actualDate }}</span>
    </div>
    <div class="footer-row">
      <div class="progress-wrapper">
        <div class="progress-bar"><div class="progress-inner" :style="{ width: milestone.progress + '%' }"></div></div>
        <span class="progress-text">{{ milestone.progress }}%</span>
      </div>
      <div class="deliverable-count">交付物：{{ milestone.deliverables?.length || 0 }}</div>
    </div>
  </div>
</template>

<script setup>
import { defineProps } from 'vue'
const props = defineProps({ milestone: Object })
function getStatusText(status) {
  return { 'completed': '已完成', 'in-progress': '进行中', 'pending': '待开始' }[status] || status
}
function getTagType(status) {
  return status === 'completed' ? 'success' : (status === 'in-progress' ? 'info' : 'warning')
}
</script>
```

2) 在 `src/views/project/Detail/index.vue` 中将原循环替换为：

```html
<MilestoneCardReadOnly v-for="m in milestones" :key="m.id" :milestone="m" />
```

3) 更新样式（`src/views/project/Detail/index.vue` 或全局样式）：

```css
.milestone-card-readonly { padding: 8px; min-height: 90px; border-radius: 6px; display:flex; flex-direction:column; gap:8px; background:#fff; }
.milestone-card-readonly .milestone-title { font-size:14px; font-weight:600; }
.progress-bar { height:8px; background:#f0f2f5; border-radius:4px; overflow:hidden; }
.progress-inner { height:100%; background:#409eff; }
```

注意：替换后务必删除或注释 `openMilestoneDetailDialog`、`el-badge` 等与原管理功能相关的方法/引用，避免运行时报错。

<a id="section-4-3-features"></a>
4.3 Store（Pinia）与 API
- Store（`src/store/modules/project.js` 或 `src/store/project.js`）：新增 action
  - `fetchProjectForManage(projectId)`：获取项目详情+里程碑列表+成员+交付物状态
  - `updateMilestone(milestoneId, payload)`：更新里程碑（管理页使用）
  - `submitDeliverable(projectId, formData)`
- API（`src/api/project.js`）：检查并复用已有 `getProjectDetailAPI`、`updateProjectAPI`、`getMyProjectsAPI`，必要时新增接口：
  - `getProjectMilestonesAPI(projectId)`
  - `updateMilestoneAPI(milestoneId, payload)`
  - `submitDeliverableAPI(projectId, payload)`

4.4 权限方案
- 根据 `user.role` 与 `project.ownerId` 判断权限：
  - 发布方（owner）可创建/编辑/审核里程碑并确认交付；
  - 中标方（承接团队）可上传交付物、提交里程碑完成申请；
  - 其他用户仅只读。
- 页面与组件通过 props 或 computed 控制按钮显示与行为。

4.5 交互与错误处理
- 所有写操作（update/submit）要有 loading 状态与成功/失败提示（使用 Element Plus 的 `ElMessage`）。
- 操作完成后：刷新 store 数据并回显，或局部更新 state 以避免不必要的全量请求。

----------------------------

<a id="section-5-code"></a>
5. 代码实现精简说明（文件级别修改与示例）

5.1 `src/views/student/MyProject/index.vue`
- 改动点：在侧边栏添加按钮并改造 `filteredProjects` 的过滤逻辑，`viewDetail` 改为跳转到管理页。示例片段：

```js
// viewDetail 调整
const viewDetail = (project) => {
  router.push(`/projects/${project.id}/manage`)
}
```

- 逻辑说明：保持原有的统计计数（ongoingCount、awardedCount 等），新增 `publishedCount` 与 `wonCount`（从 `getMyProjectsAPI` 数据中计算）。

5.2 `src/views/project/Detail/index.vue`
- 将里程碑卡片模板改为精简版（建议抽离为 `MilestoneCardReadOnly.vue`），移除按钮/弹窗引用：
  - 删除：`<el-button @click="openMilestoneDetailDialog">查看详情</el-button>`
  - 调整 CSS：将 `.milestone-card` 的 `min-height` 从 `180px` 降为 `90px`，减少 padding 与 gap。

5.3 新增 `src/views/project/Manage/index.vue`
- 示例骨架（伪代码）：

```html
<template>
  <div class="project-manage-root">
    <ProjectOverview :project="project" />
    <div class="manage-grid">
      <MilestoneManageList :milestones="milestones" @edit="openEdit" />
      <DeliverablePanel :projectId="project.id" />
    </div>
  </div>
</template>
```

- 说明：`MilestoneManageList` 提供里程碑操作，操作通过 store 的 `updateMilestone` / `createMilestone` 调用 API。

5.4 `src/store/modules/project.js`
- 新增 action 实现 fetch/update 操作；示例：

```js
async function fetchProjectForManage(projectId) {
  const res = await getProjectDetailAPI(projectId)
  const milestones = await getProjectMilestonesAPI(projectId)
  // 更新 state
}
```

5.5 `src/api/project.js`（必要时新增）
- 新增接口签名（前端调用示例）：

```js
export function getProjectMilestonesAPI(projectId) {
  return request({ url: `/projects/${projectId}/milestones`, method: 'get' })
}
```

----------------------------

<a id="section-6-permissions"></a>
6. 权限与显示逻辑（更详）

- `ProjectManage` 页面入口验证：meta.requiresAuth = true；组件内部二次确认项目对当前用户的权限（owner / member / guest）。
- 显示规则：
  - 如果 `user.id === project.ownerId`（发布方）：显示“编辑里程碑”“审核交付”“发布方备注”等控制项；
  - 如果 `user` 在 `project.winnerTeam`（中标方）：显示“提交交付物”“申请里程碑完成”等；
  - 其他用户：全部只读，并显示“如需参与请申请或联系发布方”的提示文本。

----------------------------

<a id="section-7-style"></a>
7. 样式与界面规范（里程碑压缩建议）

- `MilestoneCardReadOnly` 视觉规范：
  - 背景：白色，圆角 6px，内边距 8px；
  - 字体：标题 14px 台阶、元信息 12px；
  - 状态标签：小型 `el-tag`（size=small）；
  - 进度显示：小条形进度（高度 8px）+ 文本百分比；
  - 最小高度：90px；卡片间距减小；
  - 移除交互控件（按钮、角标、弹出层触发器）。

CSS 关键点（示例）:
```css
.milestone-card {
  padding: 8px;
  min-height: 90px;
  border-radius: 6px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
```

----------------------------

<a id="section-8-testing"></a>
8. 测试/验收标准（详细）

功能性测试：
- 我的项目页：切换到 `我发布的` 与 `我中标的`，对应列表数据正确（计数一致）并能跳转到 `/projects/:id/manage`。
- 管理页：
  - 发布方能创建/编辑/审核里程碑，并能在操作后看到实时状态更新；
  - 中标方能上传交付物并提交里程碑完成申请；
  - 非成员无写权限。
- 项目详情页：里程碑卡片仅展示（标题、状态、计划/实际日期、交付物数、进度%），无编辑/查看详情按钮。

界面与可用性：
- 压缩卡片在桌面、平板及手机上的展示良好（响应式），文本未溢出；
- 操作后有明确的 success/error 提示；

安全/边界情况：
- 未登录或无权限访问管理页应被重定向或显示无权限提示；
- 大文件上传限速/超时处理（前端有上传进度与失败重试提示）；

验收清单（PR 验收）:
- [ ] 新增路由 `/projects/:id/manage` 并通过路由守卫校验权限；
- [ ] `MyProject` 中新增两个导航并实现跳转；
- [ ] `ProjectDetail` 中里程碑卡片精简且无操作控件；
- [ ] 管理页能完成里程碑的所有核心管理流程（若后端接口未就绪，需说明 mock 行为）；
- [ ] 已在 `project_document/` 更新本计划；
- [ ] 提交包含中文注释与 PR 描述，附截图与手动验证步骤。

----------------------------

<a id="section-9-timeline"></a>
9. 时间计划与任务拆分（todolist，按优先级）
- 任务 A（0.5d）: 与后端确认所需 API 列表（若缺接口，提出后端需求）。
- 任务 B（0.5d）: 在 `MyProject` 添加 `我发布的`/`我中标的` 两个 Tab，并支持跳转到管理页（基本 UI）。
- 任务 C（1.5–2d）: 新增 `ProjectManage` 页面骨架与里程碑管理列表（含权限控制与 store 调用）。
- 任务 D（0.5–1d）: 精简 `ProjectDetail` 里程碑卡片并调整样式（只读展示）。
- 任务 E（1d）: 完成交付物上传面板、成员面板与日志（并与 API 联调）。
- 任务 F（0.5d）: 调整样式、修复已知兼容性问题、撰写 PR 文档与截图。

（注：每项完成后更新 `project_document/` 与 `[000]功能模块文档.md`，并在 PR 中注明各项验证步骤）

----------------------------

<a id="section-10-risk"></a>
10. 风险与缓解

- 风险：后端尚未提供必要 API（如里程碑单独 endpoint、交付物审核接口）。
  - 缓解：先做前端 mock 层，并列出后端接口需求文档；与后端协商优先级。
- 风险：权限边界与角色定义不明确。
  - 缓解：与产品/后端统一 `project.ownerId`、`project.winnerTeam` 的定义，形成明确规则。
- 风险：UI/UX 期望差异。
  - 缓解：在实现前产出 1-2 个低保真原型（静态截图）供产品确认。

----------------------------

<a id="section-11-submission"></a>
11. 提交与文档更新要求

- 提交规范：每次功能完成（每个子任务）提交小而聚焦的 commit，说明使用祈使句：例如 `Add project manage route and skeleton`、`Simplify milestone card in project detail`。
- PR 描述：包含改动范围、关键文件列表、手动验证步骤（按上面的验收清单）和截图。
- 文档更新：本文件（`[205]新增项目管理与里程碑详细计划.md`）保存为阶段性文档；同时把主要变更（API、路由、Store）同步到 `[000]功能模块文档.md`，并以时间戳记录变更历史。

----------------------------

附：本开发任务简明 todolist（可直接复制到 TODO 系统）
1. 与后端确认 API（getProjectMilestones, updateMilestone, submitDeliverable 等）并记录差异。
2. 在 `MyProject` 添加 `我发布的`/`我中标的` Tab，并支持路由跳转到 `/projects/:id/manage`。
3. 新建 `ProjectManage` 页面骨架并实现 ProjectOverview + MilestoneManageList。
4. 在 store 中新增 fetchProjectForManage 与 updateMilestone 等 actions，并在 API 层添加缺失接口。
5. 精简 `ProjectDetail` 中里程碑卡片为只读展示组件并调整样式。
6. 完成交付物上传面板与权限校验逻辑。
7. 编写手工验证步骤并更新 `project_document/` 与 `[000]功能模块文档.md`。
8. 提交 PR 并附上截图与验证步骤。


文档作者：前端开发（自动生成），时间戳：2025-12-26 ；请在开始编码前确认并回复“开始实现”，我将依据本计划逐步实现并在每步完成后更新 todo 列表与 `project_document/`。


