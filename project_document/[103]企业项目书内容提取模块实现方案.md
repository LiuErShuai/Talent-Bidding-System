# 企业项目书内容提取模块实现方案

[TOC]

## 目录

- [一、背景与目标](#一背景与目标)
  - [1.1 背景](#11-背景)
  - [1.2 目标](#12-目标)
  - [1.3 适用范围](#13-适用范围)
- [二、业务需求分析](#二业务需求分析)
  - [2.1 核心业务场景](#21-核心业务场景)
  - [2.2 功能需求清单](#22-功能需求清单)
- [三、模块功能设计](#三模块功能设计)
  - [3.1 文档上传模块](#31-文档上传模块)
  - [3.2 内容解析模块](#32-内容解析模块)
  - [3.3 结果展示模块](#33-结果展示模块)
  - [3.4 结果编辑模块](#34-结果编辑模块)
  - [3.5 结果对比模块](#35-结果对比模块可选)
  - [3.6 数据同步模块](#36-数据同步模块)
- [四、页面设计](#四页面设计)
  - [4.1 企业端：项目发布页面](#41-企业端项目发布页面新增提取区域)
  - [4.2 学生端：项目详情页](#42-学生端项目详情页新增展示区域)
  - [4.3 管理员端：项目审核页面](#43-管理员端项目审核页面补充标签功能)
- [五、API接口设计](#五api接口设计前端视角)
- [六、前端组件设计](#六前端组件设计)
- [七、状态管理设计](#七状态管理设计)
- [八、业务流程设计](#八业务流程设计)
- [九、用户体验优化](#九用户体验优化)
- [十、数据验证规则](#十数据验证规则)
- [十一、测试验证标准](#十一测试验证标准)
- [十二、实施计划](#十二实施计划)
- [十三、风险与应对](#十三风险与应对)
- [十四、后续优化方向](#十四后续优化方向)
- [十五、关键决策记录](#十五关键决策记录)
- [十六、待确认事项](#十六待确认事项)
- [十七、参考资料](#十七参考资料)

---

## 一、背景与目标

### 1.1 背景
在揭榜挂帅平台中，企业发布项目时需要填写大量项目信息，包括技术标签、核心要求、功能指标等。传统的手动填写方式效率低下，且容易出现信息遗漏或不准确的情况。

基于需求文档中"3.9.2 语义解析引擎"的设计，我们需要实现一个智能化的项目书内容提取模块，通过大语言模型自动解析企业上传的项目需求文档（PDF/Word），提取关键信息并结构化展示。

### 1.2 目标
- **提升效率**：减少企业手动填写时间，从平均30分钟降低到5-10分钟
- **提高准确性**：通过AI提取+人工确认的方式，确保信息提取的准确性
- **增强体验**：提供友好的编辑界面，支持企业对提取结果进行修改和完善
- **支持智能匹配**：提取的技术标签等信息可直接用于智能撮合引擎，提升匹配准确度

### 1.3 适用范围
- **用户角色**：企业用户（主要）、学校管理员（审核补充）
- **业务流程**：阶段0（立项预审）→ 阶段1（项目发布）
- **文档格式**：PDF、Word（.docx）

---

## 二、业务需求分析

### 2.1 核心业务场景

#### 场景1：企业首次上传项目书
1. 企业进入项目发布页面
2. 上传项目需求文档（PDF/Word）
3. 系统自动触发内容提取
4. 显示提取进度和结果
5. 企业确认或修改提取结果
6. 保存草稿或提交审核

#### 场景2：企业修改项目书
1. 企业已保存草稿项目
2. 重新上传新的项目书
3. 系统重新提取内容
4. 对比新旧提取结果（可选）
5. 企业确认使用新结果

#### 场景3：学校管理员审核补充
1. 管理员审核企业提交的项目
2. 查看AI提取的技术标签等信息
3. 补充或修正提取结果
4. 审核通过后信息同步到项目详情页

### 2.2 功能需求清单

| 功能模块 | 功能点 | 优先级 | 说明 |
|---------|--------|--------|------|
| 文档上传 | 支持PDF/Word格式 | P0 | 单文件上传，最大50MB |
| 文档解析 | 自动提取文档内容 | P0 | 异步处理，显示进度 |
| 信息提取 | 技术标签提取 | P0 | 匹配100+标签库 |
| 信息提取 | 任务类型识别 | P0 | 研发/设计/数据分析等 |
| 信息提取 | 核心要求提取 | P0 | 项目目标、功能要求等 |
| 信息提取 | 项目难度评估 | P1 | 1-5星评级 |
| 信息提取 | 能力要求提取 | P1 | 技术能力、经验要求 |
| 结果展示 | 提取结果可视化 | P0 | 结构化展示 |
| 结果编辑 | 技术标签编辑 | P0 | 增删改标签 |
| 结果编辑 | 核心要求编辑 | P0 | 富文本编辑 |
| 结果对比 | 新旧结果对比 | P1 | 显示差异 |
| 结果保存 | 保存提取结果 | P0 | 关联项目ID |
| 审核补充 | 管理员补充标签 | P1 | 审核阶段操作 |

---

## 三、模块功能设计

### 3.1 文档上传模块

#### 3.1.1 功能描述
企业用户上传项目需求文档，支持PDF和Word格式，系统自动触发解析流程。

#### 3.1.2 交互设计
- **上传位置**：项目发布表单的"项目需求文档"字段
- **上传方式**：拖拽上传或点击选择
- **文件限制**：
  - 格式：`.pdf`, `.doc`, `.docx`
  - 大小：最大50MB
  - 数量：单文件（可替换）
- **上传状态**：
  - 上传中：显示进度条
  - 上传成功：显示文件名和大小
  - 上传失败：显示错误提示

#### 3.1.3 业务规则
- 上传后自动触发解析，无需手动点击
- 支持替换已上传的文件，替换时重新解析
- 文件上传到OSS/服务器，返回文件URL

### 3.2 内容解析模块

#### 3.2.1 功能描述
调用后端API解析文档，提取结构化信息。前端负责展示解析进度和结果。

#### 3.2.2 解析流程
```
上传文档 → 调用解析API → 轮询解析状态 → 获取解析结果 → 展示结果
```

#### 3.2.3 状态管理
- **解析中**：显示"正在解析文档，请稍候..."
- **解析成功**：展示提取结果
- **解析失败**：显示错误信息，支持重新解析
- **超时处理**：超过2分钟提示用户，支持取消

#### 3.2.4 提取内容结构
```javascript
{
  // 技术标签（数组）
  techTags: ['Python', 'TensorFlow', 'Flask', 'Vue.js'],
  
  // 任务类型（单选）
  taskType: '研发类', // 研发类/设计类/数据分析类/测试类/其他
  
  // 项目难度（1-5星）
  difficulty: 4,
  
  // 核心要求（结构化）
  coreRequirements: {
    // 项目目标（数组）
    goals: [
      '开发AI智能客服系统',
      '支持多轮对话和上下文理解',
      '集成知识库管理系统'
    ],
    
    // 功能要求（数组）
    functionalRequirements: [
      '用户管理模块',
      '对话管理模块',
      '知识库管理模块',
      '统计分析模块'
    ],
    
    // 性能指标（数组）
    performanceRequirements: [
      '响应时间小于200ms',
      '并发用户数支持1000+',
      '系统可用性99.9%'
    ],
    
    // 技术能力要求（文本）
    techRequirements: '熟悉Python编程，了解深度学习框架，有NLP项目经验优先'
  },
  
  // 提取时间
  extractedAt: '2025-01-20 10:30:00',
  
  // 原始文档URL
  documentUrl: 'https://...'
}
```

### 3.3 结果展示模块

#### 3.3.1 功能描述
以结构化的方式展示AI提取的结果，支持企业快速浏览和确认。

#### 3.3.2 展示区域设计

**区域1：技术标签展示**
- 标签云形式展示
- 每个标签可点击删除
- 支持添加新标签（从标签库选择或手动输入）
- 标签分类显示（编程语言、框架、工具等）

**区域2：任务类型展示**
- 单选按钮组
- 选项：研发类、设计类、数据分析类、测试类、其他

**区域3：项目难度展示**
- 星级评分组件
- 1-5星可选
- 显示难度说明（如：4星=高级项目）

**区域4：核心要求展示**
- 折叠面板形式
- 分为：项目目标、功能要求、性能指标、技术能力要求
- 每个部分支持展开/收起
- 内容支持编辑（富文本或纯文本）

#### 3.3.3 交互设计
- **确认使用**：一键确认所有提取结果
- **手动编辑**：进入编辑模式，逐项修改
- **重新提取**：删除当前结果，重新解析文档
- **对比查看**：如果有历史提取结果，显示对比视图

### 3.4 结果编辑模块

#### 3.4.1 功能描述
允许企业对AI提取的结果进行修改、补充和完善。

#### 3.4.2 编辑功能

**技术标签编辑**
- 删除标签：点击标签的×按钮
- 添加标签：
  - 方式1：从标签库选择（搜索/分类浏览）
  - 方式2：手动输入（需验证是否在标签库中）
- 标签验证：只能添加系统标签库中的标签（100+标签）

**核心要求编辑**
- 项目目标：支持添加/删除/修改目标项
- 功能要求：支持添加/删除/修改功能项
- 性能指标：支持添加/删除/修改指标项
- 技术能力要求：富文本编辑器，支持格式化

**任务类型修改**
- 下拉选择或单选按钮组

**项目难度调整**
- 星级评分组件，1-5星可选

#### 3.4.3 编辑状态管理
- **未编辑**：显示"AI提取结果（未修改）"
- **已编辑**：显示"AI提取结果（已修改）"
- **保存状态**：自动保存或手动保存
- **撤销功能**：支持撤销到原始提取结果

### 3.5 结果对比模块（可选）

#### 3.5.1 功能描述
当企业重新上传文档或重新提取时，对比新旧提取结果的差异。

#### 3.5.2 对比展示
- 左右分栏对比
- 高亮显示差异项
- 支持选择使用新结果或保留旧结果

### 3.6 数据同步模块

#### 3.6.1 功能描述
将确认的提取结果同步到项目表单和项目详情页。

#### 3.6.2 同步时机
- **保存草稿时**：提取结果保存到项目草稿
- **提交审核时**：提取结果关联到项目
- **审核通过后**：提取结果展示在项目详情页

#### 3.6.3 同步内容
- 技术标签 → 项目技术标签字段
- 任务类型 → 项目分类字段
- 核心要求 → 项目详情页的"核心要求"区域
- 项目难度 → 项目难度字段（用于筛选）

---

## 四、页面设计

### 4.1 企业端：项目发布页面（新增提取区域）

#### 4.1.1 页面位置
在项目发布表单中，位于"项目需求文档"上传字段下方。

#### 4.1.2 布局设计

**上传区域**：
```
┌─────────────────────────────────────────┐
│ 项目需求文档上传                          │
│ ─────────────────────────────────────── │
│                                         │
│     📄 拖拽文件到此处或点击上传          │
│                                         │
│     支持格式：PDF、Word                  │
│     文件大小：最大50MB                   │
│                                         │
│     [选择文件]                           │
│                                         │
└─────────────────────────────────────────┘
```

**解析中状态**：
```
┌─────────────────────────────────────────┐
│ 🤖 AI智能提取中...                      │
│ ─────────────────────────────────────── │
│                                         │
│     ⏳ 正在解析文档，请稍候...           │
│                                         │
│     ▓▓▓▓▓▓▓▓░░░░ 60%                    │
│                                         │
│     预计还需 30 秒                       │
│                                         │
│     [取消解析]                           │
│                                         │
└─────────────────────────────────────────┘
```

**提取结果展示**：
```
┌─────────────────────────────────────────┐
│ 🤖 AI智能提取结果                        │
│ ─────────────────────────────────────── │
│                                         │
│ 📄 文档信息                             │
│    项目需求书.pdf (2.3MB)               │
│    [重新上传] [重新提取]                │
│                                         │
│ 🏷️ 技术标签（已提取 8 个）              │
│    [Python] [TensorFlow] [Flask]        │
│    [Vue.js] [MySQL] [Redis] [+]         │
│                                         │
│ 📋 任务类型                              │
│    ○ 研发类  ○ 设计类  ○ 数据分析类     │
│    ○ 测试类  ○ 其他                     │
│                                         │
│ ⭐ 项目难度                              │
│    ⭐⭐⭐⭐ (4星 - 高级项目)             │
│    [调整难度]                            │
│                                         │
│ 📝 核心要求                              │
│    ▼ 点击展开查看详情                   │
│                                         │
│    [确认使用] [手动编辑]                 │
│                                         │
└─────────────────────────────────────────┘
```

**核心要求展开后**：
```
┌─────────────────────────────────────────┐
│ 📝 核心要求                              │
│ ─────────────────────────────────────── │
│                                         │
│ 📌 项目目标：                            │
│    • 开发AI智能客服系统                  │
│    • 支持多轮对话和上下文理解            │
│    • 集成知识库管理系统                  │
│                                         │
│ 📌 功能要求：                            │
│    • 用户管理模块                        │
│    • 对话管理模块                        │
│    • 知识库管理模块                      │
│    • 统计分析模块                        │
│                                         │
│ 📌 性能指标：                            │
│    • 响应时间小于200ms                   │
│    • 并发用户数支持1000+                 │
│    • 系统可用性99.9%                     │
│                                         │
│ 📌 技术能力要求：                        │
│    熟悉Python编程，了解深度学习框架，    │
│    有NLP项目经验优先                     │
│                                         │
│    [收起] [编辑]                         │
└─────────────────────────────────────────┘
```

#### 4.1.3 交互细节

**上传交互**：
- 拖拽文件到上传区域，区域高亮显示
- 点击上传按钮，打开文件选择对话框
- 上传成功后，自动触发解析
- 显示上传进度条（0-100%）

**解析交互**：
- 解析开始后，显示解析进度和预计时间
- 支持取消解析操作
- 解析完成后，自动展开结果区域
- 解析失败时，显示错误信息和重试按钮

**编辑交互**：
- 点击"手动编辑"进入编辑模式
- 技术标签：点击×删除，点击+添加
- 核心要求：点击"编辑"进入编辑界面
- 编辑过程中实时保存（防丢失）
- 支持撤销操作（最多10步）

### 4.2 学生端：项目详情页（新增展示区域）

#### 4.2.1 页面位置
在项目详情页的"项目详情"标签页中，位于项目背景之前。

#### 4.2.2 布局设计
```
┌─────────────────────────────────────────┐
│ 项目详情                                 │
├─────────────────────────────────────────┤
│                                         │
│ 🏷️ 技术标签                             │
│ [Python] [TensorFlow] [Flask] [Vue.js] │
│                                         │
│ 📋 任务类型：研发类                      │
│ ⭐ 项目难度：⭐⭐⭐⭐ (4星)              │
│                                         │
│ 📝 核心要求                              │
│ ┌─────────────────────────────────────┐ │
│ │ 项目目标：                            │ │
│ │ • 开发AI智能客服系统                  │ │
│ │ • 支持多轮对话和上下文理解            │ │
│ │                                      │ │
│ │ 功能要求：                            │ │
│ │ • 用户管理模块                        │ │
│ │ • 对话管理模块                        │ │
│ │ • 知识库管理模块                      │ │
│ │                                      │ │
│ │ 性能指标：                            │ │
│ │ • 响应时间小于200ms                   │ │
│ │ • 并发用户数支持1000+                 │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ■ 项目背景                              │
│ ...                                     │
└─────────────────────────────────────────┘
```

### 4.3 管理员端：项目审核页面（补充标签功能）

#### 4.3.1 功能描述
管理员在审核项目时，可以查看和补充AI提取的技术标签等信息。

#### 4.3.2 交互设计
- 显示AI提取结果
- 支持添加/删除技术标签
- 支持修改任务类型和难度
- 修改记录保存到审核意见中

---

## 五、API接口设计（前端视角）

### 5.1 文档解析接口

**接口名称**：解析项目需求文档  
**请求方式**：POST  
**接口路径**：`/api/v1/project/parse-document`  
**请求参数**：
```javascript
{
  file: File, // 文件对象
  projectId?: string // 可选，如果是更新已有项目
}
```

**响应数据**：
```javascript
{
  code: 200,
  data: {
    taskId: 'parse_task_123', // 解析任务ID
    status: 'processing', // processing/success/failed
    message: '文档解析中，请稍候...'
  }
}
```

### 5.2 查询解析状态接口

**接口名称**：查询解析状态  
**请求方式**：GET  
**接口路径**：`/api/v1/project/parse-status/:taskId`  
**响应数据**：
```javascript
{
  code: 200,
  data: {
    status: 'success', // processing/success/failed
    progress: 100, // 0-100
    result: { // status为success时返回
      techTags: [...],
      taskType: '研发类',
      difficulty: 4,
      coreRequirements: {...}
    },
    error: null // status为failed时返回错误信息
  }
}
```

### 5.3 获取提取结果接口

**接口名称**：获取项目提取结果  
**请求方式**：GET  
**接口路径**：`/api/v1/project/:projectId/extracted-info`  
**响应数据**：
```javascript
{
  code: 200,
  data: {
    extractedInfo: {...}, // 提取结果对象
    isEdited: false, // 是否被编辑过
    extractedAt: '2025-01-20 10:30:00'
  }
}
```

### 5.4 更新提取结果接口

**接口名称**：更新提取结果  
**请求方式**：PUT  
**接口路径**：`/api/v1/project/:projectId/extracted-info`  
**请求参数**：
```javascript
{
  techTags: [...],
  taskType: '研发类',
  difficulty: 4,
  coreRequirements: {...}
}
```

### 5.5 获取技术标签库接口

**接口名称**：获取技术标签库  
**请求方式**：GET  
**接口路径**：`/api/v1/project/tech-tags`  
**响应数据**：
```javascript
{
  code: 200,
  data: {
    categories: [
      {
        name: '编程语言',
        tags: ['Python', 'Java', 'JavaScript', ...]
      },
      {
        name: '前端技术',
        tags: ['Vue.js', 'React', 'Angular', ...]
      },
      // ...
    ]
  }
}
```

---

## 六、前端组件设计

### 6.1 DocumentUpload 组件

**组件名称**：`DocumentUpload.vue`  
**组件路径**：`src/components/common/DocumentUpload/index.vue`  
**功能**：文档上传组件，支持拖拽上传

**Props**：
- `modelValue`: File | null - 当前文件
- `accept`: string - 接受的文件类型（默认：'.pdf,.doc,.docx'）
- `maxSize`: number - 最大文件大小（默认：50MB）

**Events**：
- `update:modelValue`: 文件变化事件
- `upload-success`: 上传成功事件
- `upload-error`: 上传失败事件

### 6.2 ExtractionResult 组件

**组件名称**：`ExtractionResult.vue`  
**组件路径**：`src/components/project/ExtractionResult/index.vue`  
**功能**：展示和编辑AI提取结果

**Props**：
- `extractedInfo`: Object - 提取结果对象
- `editable`: boolean - 是否可编辑（默认：true）
- `loading`: boolean - 是否加载中

**Events**：
- `confirm`: 确认使用提取结果
- `edit`: 进入编辑模式
- `update`: 更新提取结果

### 6.3 TechTagEditor 组件

**组件名称**：`TechTagEditor.vue`  
**组件路径**：`src/components/project/TechTagEditor/index.vue`  
**功能**：技术标签编辑器

**Props**：
- `modelValue`: Array - 标签数组
- `tagLibrary`: Array - 标签库数据

**Events**：
- `update:modelValue`: 标签变化事件

### 6.4 CoreRequirementsEditor 组件

**组件名称**：`CoreRequirementsEditor.vue`  
**组件路径**：`src/components/project/CoreRequirementsEditor/index.vue`  
**功能**：核心要求编辑器

**Props**：
- `modelValue`: Object - 核心要求对象
- `editable`: boolean - 是否可编辑

**Events**：
- `update:modelValue`: 内容变化事件

---

## 七、状态管理设计

### 7.1 Pinia Store：extractionStore

**Store路径**：`src/store/modules/extraction.js`

**State**：
```javascript
{
  // 当前解析任务
  currentTask: null,
  
  // 解析状态
  parseStatus: 'idle', // idle/processing/success/failed
  
  // 提取结果
  extractedInfo: null,
  
  // 技术标签库
  techTagLibrary: [],
  
  // 是否已编辑
  isEdited: false
}
```

**Actions**：
- `parseDocument(file, projectId)` - 解析文档
- `checkParseStatus(taskId)` - 查询解析状态
- `getExtractedInfo(projectId)` - 获取提取结果
- `updateExtractedInfo(projectId, data)` - 更新提取结果
- `loadTechTagLibrary()` - 加载标签库
- `resetExtraction()` - 重置提取状态

**Getters**：
- `isProcessing` - 是否正在解析
- `hasExtractedInfo` - 是否有提取结果
- `techTagsByCategory` - 按分类组织的标签

---

## 八、业务流程设计

### 8.1 完整业务流程

```
┌─────────────────────────────────────────┐
│ 阶段0：立项预审                           │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 1. 企业上传项目需求文档                   │
│    - 选择PDF/Word文件                    │
│    - 文件大小限制50MB                     │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 2. 系统自动触发解析                       │
│    - 调用解析API                         │
│    - 显示解析进度                        │
│    - 轮询解析状态                        │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 3. 解析完成，展示提取结果                 │
│    - 技术标签                            │
│    - 任务类型                            │
│    - 项目难度                            │
│    - 核心要求                            │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 4. 企业确认或编辑                         │
│    ├─ 确认使用 → 直接保存                │
│    └─ 手动编辑 → 修改后保存              │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 5. 保存草稿或提交审核                     │
│    - 提取结果关联到项目                   │
│    - 保存到数据库                         │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 6. 学校管理员审核（可选补充）              │
│    - 查看提取结果                        │
│    - 补充/修正标签                       │
└─────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ 7. 审核通过，同步到项目详情页             │
│    - 技术标签展示                        │
│    - 核心要求展示                        │
│    - 用于智能匹配                        │
└─────────────────────────────────────────┘
```

### 8.2 异常处理流程

**场景1：解析失败**
- **触发条件**：后端返回解析失败状态
- **处理方式**：
  - 显示友好的错误提示："文档解析失败，可能原因：文档格式异常、内容无法识别等"
  - 提供"重新解析"按钮
  - 提供"手动填写"选项，允许跳过AI提取
  - 记录错误日志，便于后续优化

**场景2：解析超时**
- **触发条件**：解析时间超过2分钟
- **处理方式**：
  - 显示超时提示："解析时间较长，请稍候或选择手动填写"
  - 提供"继续等待"和"取消解析"选项
  - 取消后允许手动填写
  - 后台继续处理，完成后通知用户

**场景3：网络错误**
- **触发条件**：网络请求失败、超时等
- **处理方式**：
  - 显示网络错误提示："网络连接异常，请检查网络后重试"
  - 自动重试机制（最多3次，间隔2秒）
  - 重试失败后，提供"手动重试"按钮
  - 支持离线保存，网络恢复后自动提交

**场景4：文件格式不支持**
- **触发条件**：上传非PDF/Word格式文件
- **处理方式**：
  - 上传前即验证文件格式
  - 显示格式错误提示："仅支持PDF、Word格式文件"
  - 提供格式说明和示例
  - 阻止文件上传

**场景5：文件过大**
- **触发条件**：文件大小超过50MB
- **处理方式**：
  - 上传前验证文件大小
  - 显示错误提示："文件大小不能超过50MB"
  - 提示用户压缩文件或拆分文档

**场景6：提取结果为空**
- **触发条件**：AI提取结果中关键字段为空
- **处理方式**：
  - 显示提示："未能从文档中提取到有效信息"
  - 提供"重新提取"和"手动填写"选项
  - 记录空结果情况，用于优化提取算法

**场景7：标签库匹配失败**
- **触发条件**：提取的技术标签不在标签库中
- **处理方式**：
  - 显示未匹配标签列表
  - 提供相似标签推荐
  - 允许手动选择正确标签
  - 记录新标签，供管理员审核添加

---

## 九、用户体验优化

### 9.1 加载状态优化
- 解析中显示进度条和预计时间
- 使用骨架屏展示结果区域
- 提供取消解析功能

### 9.2 错误提示优化
- 友好的错误提示文案
- 提供解决方案建议
- 支持一键重试

### 9.3 编辑体验优化
- 实时保存编辑内容
- 支持撤销操作
- 编辑状态清晰标识

### 9.4 响应式设计
- 移动端适配
- 平板端优化
- PC端完整功能

---

## 十、数据验证规则

### 10.1 文件验证
- 格式：仅支持 `.pdf`, `.doc`, `.docx`
- 大小：最大50MB
- 内容：文件必须可读，非加密

### 10.2 提取结果验证
- 技术标签：必须来自标签库
- 任务类型：必须从预设选项中选择
- 项目难度：1-5之间的整数
- 核心要求：各字段不能为空

### 10.3 编辑验证
- 标签数量：最多20个
- 文本长度：各文本字段有最大长度限制
- 必填项：关键字段必须填写

---

## 十一、测试验证标准

### 11.1 功能测试清单

**文档上传功能**
- [ ] PDF格式文件上传成功
- [ ] Word格式文件上传成功
- [ ] 拖拽上传功能正常
- [ ] 点击上传功能正常
- [ ] 文件替换功能正常
- [ ] 文件大小限制生效（50MB）
- [ ] 文件格式验证生效（仅PDF/Word）
- [ ] 上传进度显示正常
- [ ] 上传失败错误提示正确

**解析功能**
- [ ] 上传后自动触发解析
- [ ] 解析进度显示正常
- [ ] 解析状态轮询正常
- [ ] 解析成功结果展示正确
- [ ] 解析失败错误处理正确
- [ ] 解析超时处理正确
- [ ] 取消解析功能正常

**提取结果展示**
- [ ] 技术标签正确展示
- [ ] 任务类型正确展示
- [ ] 项目难度正确展示
- [ ] 核心要求正确展示
- [ ] 展开/收起功能正常
- [ ] 结果区域样式正确

**编辑功能**
- [ ] 技术标签删除功能正常
- [ ] 技术标签添加功能正常
- [ ] 标签库选择功能正常
- [ ] 核心要求编辑功能正常
- [ ] 任务类型修改功能正常
- [ ] 项目难度调整功能正常
- [ ] 编辑状态保存正常
- [ ] 撤销功能正常

**数据同步**
- [ ] 保存草稿时数据同步正确
- [ ] 提交审核时数据同步正确
- [ ] 详情页数据展示正确
- [ ] 数据关联正确

### 11.2 兼容性测试

**浏览器兼容**
- [ ] Chrome（最新版及前2个版本）
- [ ] Firefox（最新版及前2个版本）
- [ ] Edge（最新版及前2个版本）
- [ ] Safari（最新版及前2个版本）

**文件格式兼容**
- [ ] PDF文件（不同版本）
- [ ] Word 2007+ (.docx)
- [ ] Word 2003 (.doc) - 如支持

**设备兼容**
- [ ] PC端（1920x1080及以上）
- [ ] 平板端（768px-1024px）
- [ ] 移动端（375px-768px）

### 11.3 性能测试

**响应时间**
- [ ] 文档上传响应时间 < 5秒（50MB文件）
- [ ] 解析状态查询响应时间 < 1秒
- [ ] 提取结果加载时间 < 2秒
- [ ] 编辑操作响应时间 < 500ms
- [ ] 页面整体加载时间 < 2秒

**并发性能**
- [ ] 支持10个用户同时上传文档
- [ ] 支持20个用户同时查看提取结果
- [ ] 解析任务队列处理正常

**资源占用**
- [ ] 内存占用合理（< 100MB）
- [ ] CPU占用合理（< 30%）
- [ ] 网络请求优化（减少不必要请求）

### 11.4 用户体验测试

**操作流程**
- [ ] 上传→解析→确认流程顺畅
- [ ] 编辑操作直观易懂
- [ ] 错误提示清晰明确
- [ ] 帮助信息完整

**界面体验**
- [ ] 界面美观统一
- [ ] 交互反馈及时
- [ ] 加载状态清晰
- [ ] 响应式布局正常

**可访问性**
- [ ] 键盘操作支持
- [ ] 屏幕阅读器兼容
- [ ] 色彩对比度符合标准

### 11.5 边界测试

**文件边界**
- [ ] 空文件处理
- [ ] 超大文件处理（接近50MB）
- [ ] 损坏文件处理
- [ ] 加密文件处理

**数据边界**
- [ ] 提取结果为空
- [ ] 提取结果字段缺失
- [ ] 标签数量超限（>20个）
- [ ] 文本内容超长

**网络边界**
- [ ] 网络断开处理
- [ ] 网络延迟处理
- [ ] 请求超时处理
- [ ] 服务器错误处理

---

## 十二、实施计划

### 12.1 开发阶段划分

**第一阶段：基础功能（1周）**
- **Day 1-2**：文档上传组件开发
  - DocumentUpload组件实现
  - 文件验证逻辑
  - 上传进度显示
- **Day 3-4**：解析API集成
  - 解析接口调用
  - 状态轮询机制
  - 进度展示组件
- **Day 5**：基础结果展示
  - ExtractionResult组件框架
  - 结果数据结构定义
  - 基础样式实现

**第二阶段：编辑功能（1周）**
- **Day 1-2**：技术标签编辑
  - TechTagEditor组件
  - 标签库数据加载
  - 标签增删改功能
- **Day 3-4**：核心要求编辑
  - CoreRequirementsEditor组件
  - 富文本编辑器集成（可选）
  - 内容验证逻辑
- **Day 5**：数据保存与状态管理
  - Pinia store实现
  - 数据持久化
  - 编辑状态管理

**第三阶段：详情页集成（3天）**
- **Day 1**：详情页展示组件
  - 技术标签展示区域
  - 核心要求展示区域
  - 样式优化
- **Day 2**：数据同步逻辑
  - 审核通过后数据同步
  - 详情页数据加载
- **Day 3**：联调测试
  - 端到端流程测试
  - 数据一致性验证

**第四阶段：优化完善（3天）**
- **Day 1**：用户体验优化
  - 加载状态优化
  - 错误提示优化
  - 交互细节优化
- **Day 2**：错误处理完善
  - 异常场景处理
  - 边界情况处理
  - 容错机制
- **Day 3**：测试验证
  - 功能测试
  - 兼容性测试
  - 性能测试

### 12.2 里程碑

| 里程碑 | 时间节点 | 交付物 | 验收标准 |
|--------|---------|--------|---------|
| M1：基础功能完成 | 第1周末 | 文档上传+解析+展示 | 能够上传文档并看到提取结果 |
| M2：编辑功能完成 | 第2周末 | 完整编辑功能 | 能够编辑所有提取结果并保存 |
| M3：详情页集成 | 第3周中 | 详情页展示 | 详情页正确展示提取结果 |
| M4：测试完成 | 第3周末 | 完整功能+测试报告 | 所有测试用例通过 |

### 12.3 开发依赖

**前端依赖**
- Element Plus（已集成）
- Vue 3 Composition API（已集成）
- Pinia（已集成）
- Axios（已集成）

**可能需要的新依赖**
- 富文本编辑器（如：TinyMCE、Quill）- 可选
- 文件预览组件（如：vue-pdf）- 可选

**后端依赖**
- 文档解析API（需后端提供）
- 大模型API集成（需后端提供）
- 文件存储服务（OSS/服务器）

### 12.4 开发注意事项

1. **API接口约定**
   - 与后端提前约定接口格式
   - 定义错误码和错误信息
   - 确定轮询间隔和超时时间

2. **性能优化**
   - 大文件上传使用分片上传
   - 解析状态轮询使用指数退避
   - 提取结果数据缓存

3. **用户体验**
   - 所有异步操作提供加载状态
   - 错误提示友好明确
   - 支持操作撤销

4. **数据安全**
   - 文件上传前验证
   - 敏感信息脱敏
   - 操作日志记录

---

## 十三、风险与应对

### 13.1 技术风险
- **风险**：大模型解析准确率不高
- **应对**：提供人工编辑功能，支持多次提取

### 13.2 性能风险
- **风险**：解析耗时过长
- **应对**：异步处理，显示进度，支持取消

### 13.3 兼容性风险
- **风险**：不同格式文档解析失败
- **应对**：格式验证，错误提示，支持手动填写

---

## 十四、后续优化方向

### 14.1 功能增强
- 支持更多文档格式（Excel、PPT等）
- 支持批量文档解析
- 提取结果模板化

### 14.2 智能化提升
- 提取准确率优化
- 支持多语言文档
- 自动分类优化

### 14.3 数据分析
- 提取准确率统计
- 用户编辑行为分析
- 标签使用频率分析

---

## 附录

### A. 技术标签库分类（参考）

- 编程语言：Python, Java, JavaScript, C++, Go, PHP, C#, Ruby等
- 前端技术：Vue.js, React, Angular, 小程序, HTML5, CSS3, TypeScript等
- 后端技术：Spring Boot, Django, Flask, Node.js, Express, Koa等
- 数据库：MySQL, PostgreSQL, Redis, MongoDB, ElasticSearch, Oracle等
- AI/大数据：机器学习, 深度学习, 数据分析, NLP, 计算机视觉, PyTorch, TensorFlow等
- 移动开发：Android, iOS, Flutter, React Native, uni-app等
- 设计工具：Photoshop, Figma, Sketch, Axure, 墨刀等
- 运维工具：Docker, Kubernetes, Jenkins, Git, Linux等

### B. 任务类型枚举

- 研发类
- 设计类
- 数据分析类
- 测试类
- 文档类
- 其他

### C. 项目难度说明

- 1星：入门级，适合初学者
- 2星：初级，需要一定基础
- 3星：中级，需要扎实基础
- 4星：高级，需要丰富经验
- 5星：专家级，需要专业能力

---

## 十五、关键决策记录

### 15.1 技术选型决策

**文档解析方式**
- **决策**：采用后端解析，前端仅负责展示和交互
- **理由**：文档解析涉及大模型调用，计算资源消耗大，后端处理更安全高效

**状态管理方案**
- **决策**：使用Pinia管理提取状态
- **理由**：项目已使用Pinia，保持技术栈统一

**标签编辑方案**
- **决策**：仅允许选择标签库中的标签
- **理由**：保证标签标准化，便于智能匹配和统计分析

**解析超时处理**
- **决策**：2分钟超时，允许用户选择继续等待或取消
- **理由**：平衡用户体验和系统资源，给用户选择权

### 15.2 业务规则决策

**提取时机**
- **决策**：上传后自动触发，无需手动点击
- **理由**：减少用户操作步骤，提升体验

**编辑权限**
- **决策**：企业可编辑，管理员可补充
- **理由**：保证数据准确性，同时给予灵活性

**数据同步时机**
- **决策**：保存草稿时即保存提取结果，审核通过后展示
- **理由**：避免数据丢失，同时保证审核流程完整性

### 15.3 用户体验决策

**进度展示**
- **决策**：显示进度百分比和预计时间
- **理由**：让用户了解处理进度，减少等待焦虑

**错误处理**
- **决策**：提供重试和手动填写两种选项
- **理由**：保证功能可用性，不因AI失败阻塞业务流程

**编辑模式**
- **决策**：支持逐项编辑，实时保存
- **理由**：降低编辑门槛，防止数据丢失

---

## 十六、待确认事项

### 16.1 需要与后端确认

- [ ] 文档解析API的具体接口格式
- [ ] 解析任务状态轮询的间隔和超时时间
- [ ] 文件上传的存储位置和访问方式
- [ ] 提取结果的数据结构最终版本
- [ ] 错误码和错误信息的定义
- [ ] 技术标签库的获取方式

### 16.2 需要与产品确认

- [ ] 提取结果的必填字段
- [ ] 编辑功能的详细交互
- [ ] 详情页展示的优先级
- [ ] 管理员补充标签的权限范围
- [ ] 项目难度的展示方式

### 16.3 需要与设计确认

- [ ] 提取结果区域的UI设计稿
- [ ] 编辑界面的交互设计
- [ ] 错误提示的样式规范
- [ ] 移动端适配方案

---

## 十七、参考资料

### 17.1 相关文档
- `[000]需求分析文档.md` - 3.9.2 语义解析引擎
- `[001]原型设计文档.md` - 项目发布页面原型
- `[100]目录结构重组.md` - 前端目录结构规范

### 17.2 技术文档
- Element Plus 文档：https://element-plus.org/
- Vue 3 文档：https://vuejs.org/
- Pinia 文档：https://pinia.vuejs.org/

### 17.3 业务背景
- 智能撮合引擎需求
- 技术标签体系设计
- 项目生命周期管理

---

**文档版本**：v1.0  
**创建时间**：2025-01-20  
**最后更新**：2025-01-20  
**文档状态**：待实施  
**文档编号**：103  
**文档类型**：阶段性文档（实施方案）

